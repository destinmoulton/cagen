
/*

A pub/sub and variable exchange for CAGEN

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Subscribe and publish to a channel.
Set and get global variables.
 */
var Bus,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Bus = (function() {
  function Bus() {
    this.subscribe = bind(this.subscribe, this);
    this._channels = {};
    this._vault = {};
  }

  Bus.prototype.subscribe = function(channel, callback) {
    if (!this._channels.hasOwnProperty(channel)) {
      this._channels[channel] = [];
    }
    return this._channels[channel].push(callback);
  };

  Bus.prototype.broadcast = function(channel, payload) {
    var i, len, ref, results, subscriber;
    if (this._channels.hasOwnProperty(channel)) {
      ref = this._channels[channel];
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        subscriber = ref[i];
        results.push(subscriber(payload));
      }
      return results;
    }
  };

  Bus.prototype.set = function(name, variable) {
    return this._vault[name] = variable;
  };

  Bus.prototype.get = function(name) {
    if (!this._vault.hasOwnProperty(name)) {
      return console.log("Bus: Unable to find ${name} in vault.");
    } else {
      return this._vault[name];
    }
  };

  return Bus;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnVzLmpzIiwic291cmNlcyI6WyJCdXMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLEdBQUE7RUFBQTs7QUFhTTtFQUVVLGFBQUE7O0lBQ1IsSUFBQyxDQUFBLFNBQUQsR0FBYTtJQUNiLElBQUMsQ0FBQSxNQUFELEdBQVU7RUFGRjs7Z0JBSVosU0FBQSxHQUFXLFNBQUMsT0FBRCxFQUFVLFFBQVY7SUFDUCxJQUFHLENBQUksSUFBQyxDQUFBLFNBQVMsQ0FBQyxjQUFYLENBQTBCLE9BQTFCLENBQVA7TUFDSSxJQUFDLENBQUEsU0FBVSxDQUFBLE9BQUEsQ0FBWCxHQUFzQixHQUQxQjs7V0FHQSxJQUFDLENBQUEsU0FBVSxDQUFBLE9BQUEsQ0FBUSxDQUFDLElBQXBCLENBQXlCLFFBQXpCO0VBSk87O2dCQU1YLFNBQUEsR0FBVyxTQUFDLE9BQUQsRUFBVSxPQUFWO0FBQ1AsUUFBQTtJQUFBLElBQUcsSUFBQyxDQUFBLFNBQVMsQ0FBQyxjQUFYLENBQTBCLE9BQTFCLENBQUg7QUFDSTtBQUFBO1dBQUEscUNBQUE7O3FCQUNJLFVBQUEsQ0FBVyxPQUFYO0FBREo7cUJBREo7O0VBRE87O2dCQUtYLEdBQUEsR0FBSyxTQUFDLElBQUQsRUFBTyxRQUFQO1dBQ0QsSUFBQyxDQUFBLE1BQU8sQ0FBQSxJQUFBLENBQVIsR0FBZ0I7RUFEZjs7Z0JBR0wsR0FBQSxHQUFLLFNBQUMsSUFBRDtJQUNELElBQUcsQ0FBSSxJQUFDLENBQUEsTUFBTSxDQUFDLGNBQVIsQ0FBdUIsSUFBdkIsQ0FBUDthQUNJLE9BQU8sQ0FBQyxHQUFSLENBQVksdUNBQVosRUFESjtLQUFBLE1BQUE7QUFFSyxhQUFPLElBQUMsQ0FBQSxNQUFPLENBQUEsSUFBQSxFQUZwQjs7RUFEQyIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuXG5BIHB1Yi9zdWIgYW5kIHZhcmlhYmxlIGV4Y2hhbmdlIGZvciBDQUdFTlxuXG5AYXV0aG9yIERlc3RpbiBNb3VsdG9uXG5AZ2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9kZXN0aW5tb3VsdG9uL2NhZ2VuXG5AbGljZW5zZSBNSVRcblxuU3Vic2NyaWJlIGFuZCBwdWJsaXNoIHRvIGEgY2hhbm5lbC5cblNldCBhbmQgZ2V0IGdsb2JhbCB2YXJpYWJsZXMuXG5cbiMjI1xuXG5jbGFzcyBCdXNcblxuICAgIGNvbnN0cnVjdG9yOigpLT5cbiAgICAgICAgQF9jaGFubmVscyA9IHt9XG4gICAgICAgIEBfdmF1bHQgPSB7fVxuXG4gICAgc3Vic2NyaWJlOiAoY2hhbm5lbCwgY2FsbGJhY2spPT5cbiAgICAgICAgaWYgbm90IEBfY2hhbm5lbHMuaGFzT3duUHJvcGVydHkoY2hhbm5lbClcbiAgICAgICAgICAgIEBfY2hhbm5lbHNbY2hhbm5lbF0gPSBbXVxuXG4gICAgICAgIEBfY2hhbm5lbHNbY2hhbm5lbF0ucHVzaChjYWxsYmFjaylcblxuICAgIGJyb2FkY2FzdDogKGNoYW5uZWwsIHBheWxvYWQpLT5cbiAgICAgICAgaWYgQF9jaGFubmVscy5oYXNPd25Qcm9wZXJ0eShjaGFubmVsKVxuICAgICAgICAgICAgZm9yIHN1YnNjcmliZXIgaW4gQF9jaGFubmVsc1tjaGFubmVsXVxuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIocGF5bG9hZClcblxuICAgIHNldDogKG5hbWUsIHZhcmlhYmxlKS0+XG4gICAgICAgIEBfdmF1bHRbbmFtZV0gPSB2YXJpYWJsZVxuXG4gICAgZ2V0OiAobmFtZSktPlxuICAgICAgICBpZiBub3QgQF92YXVsdC5oYXNPd25Qcm9wZXJ0eShuYW1lKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJCdXM6IFVuYWJsZSB0byBmaW5kICR7bmFtZX0gaW4gdmF1bHQuXCIpXG4gICAgICAgIGVsc2UgcmV0dXJuIEBfdmF1bHRbbmFtZV0iXX0=


/*

Manage shared variables for CAGEN

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Component of Cellular Automata Generator (CAGEN)

Manage variables for the cagen components.
 */
var Shared;

Shared = (function() {
  function Shared() {
    this._cellColorActiveBackground = "#000000";
    this._cellColorBorder = "#000000";
    this._currentRuleDecimal = 0;
    this._topRowBinaryArray = [];
    radio('shared.set.currentruledecimal').subscribe((function(_this) {
      return function(newDecimalValue) {
        return _this._currentRuleDecimal = newDecimalValue;
      };
    })(this));
    radio('shared.get.currentruledecimal').subscribe((function(_this) {
      return function(callback) {
        return callback(_this._currentRuleDecimal);
      };
    })(this));
    radio('shared.set.toprowbinary').subscribe((function(_this) {
      return function(data) {
        return _this.topRowBinaryArray = data;
      };
    })(this));
    radio('shared.get.toprowbinary').subscribe((function(_this) {
      return function(callback) {
        return callback(_this.topRowBinaryArray);
      };
    })(this));
    radio('shared.set.cellcolor.activebackground').subscribe((function(_this) {
      return function(hexColor) {
        return _this._cellColorActiveBackground = hexColor;
      };
    })(this));
    radio('shared.get.cellcolor.activebackground').subscribe((function(_this) {
      return function(callback) {
        return callback(_this._cellColorActiveBackground);
      };
    })(this));
    radio('shared.set.cellcolor.border').subscribe((function(_this) {
      return function(hexColor) {
        return _this._cellColorBorder = hexColor;
      };
    })(this));
    radio('shared.get.cellcolor.border').subscribe((function(_this) {
      return function(callback) {
        return callback(_this._cellColorBorder);
      };
    })(this));
  }

  return Shared;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2hhcmVkLmpzIiwic291cmNlcyI6WyJTaGFyZWQuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQTs7QUFjTTtFQUVXLGdCQUFBO0lBQ1QsSUFBQyxDQUFBLDBCQUFELEdBQThCO0lBQzlCLElBQUMsQ0FBQSxnQkFBRCxHQUFvQjtJQUNwQixJQUFDLENBQUEsbUJBQUQsR0FBdUI7SUFDdkIsSUFBQyxDQUFBLGtCQUFELEdBQXNCO0lBRXRCLEtBQUEsQ0FBTSwrQkFBTixDQUFzQyxDQUFDLFNBQXZDLENBQ0ksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLGVBQUQ7ZUFDSSxLQUFDLENBQUEsbUJBQUQsR0FBdUI7TUFEM0I7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBREo7SUFLQSxLQUFBLENBQU0sK0JBQU4sQ0FBc0MsQ0FBQyxTQUF2QyxDQUNJLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxRQUFEO2VBQ0ksUUFBQSxDQUFTLEtBQUMsQ0FBQSxtQkFBVjtNQURKO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQURKO0lBS0EsS0FBQSxDQUFNLHlCQUFOLENBQWdDLENBQUMsU0FBakMsQ0FDSSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsSUFBRDtlQUNJLEtBQUMsQ0FBQSxpQkFBRCxHQUFxQjtNQUR6QjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FESjtJQUtBLEtBQUEsQ0FBTSx5QkFBTixDQUFnQyxDQUFDLFNBQWpDLENBQ0ksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFFBQUQ7ZUFDSSxRQUFBLENBQVMsS0FBQyxDQUFBLGlCQUFWO01BREo7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBREo7SUFLQSxLQUFBLENBQU0sdUNBQU4sQ0FBOEMsQ0FBQyxTQUEvQyxDQUNJLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxRQUFEO2VBQ0ksS0FBQyxDQUFBLDBCQUFELEdBQThCO01BRGxDO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQURKO0lBS0EsS0FBQSxDQUFNLHVDQUFOLENBQThDLENBQUMsU0FBL0MsQ0FDSSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsUUFBRDtlQUNJLFFBQUEsQ0FBUyxLQUFDLENBQUEsMEJBQVY7TUFESjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FESjtJQUtBLEtBQUEsQ0FBTSw2QkFBTixDQUFvQyxDQUFDLFNBQXJDLENBQ0ksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFFBQUQ7ZUFDSSxLQUFDLENBQUEsZ0JBQUQsR0FBb0I7TUFEeEI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBREo7SUFLQSxLQUFBLENBQU0sNkJBQU4sQ0FBb0MsQ0FBQyxTQUFyQyxDQUNJLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQyxRQUFEO2VBQ0ksUUFBQSxDQUFTLEtBQUMsQ0FBQSxnQkFBVjtNQURKO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQURKO0VBekNTIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG5cbk1hbmFnZSBzaGFyZWQgdmFyaWFibGVzIGZvciBDQUdFTlxuXG5AYXV0aG9yIERlc3RpbiBNb3VsdG9uXG5AZ2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9kZXN0aW5tb3VsdG9uL2NhZ2VuXG5AbGljZW5zZSBNSVRcblxuQ29tcG9uZW50IG9mIENlbGx1bGFyIEF1dG9tYXRhIEdlbmVyYXRvciAoQ0FHRU4pXG5cbk1hbmFnZSB2YXJpYWJsZXMgZm9yIHRoZSBjYWdlbiBjb21wb25lbnRzLlxuXG4jIyNcblxuY2xhc3MgU2hhcmVkXG5cbiAgICBjb25zdHJ1Y3RvcjogKCktPlxuICAgICAgICBAX2NlbGxDb2xvckFjdGl2ZUJhY2tncm91bmQgPSBcIiMwMDAwMDBcIlxuICAgICAgICBAX2NlbGxDb2xvckJvcmRlciA9IFwiIzAwMDAwMFwiXG4gICAgICAgIEBfY3VycmVudFJ1bGVEZWNpbWFsID0gMFxuICAgICAgICBAX3RvcFJvd0JpbmFyeUFycmF5ID0gW11cblxuICAgICAgICByYWRpbygnc2hhcmVkLnNldC5jdXJyZW50cnVsZWRlY2ltYWwnKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAobmV3RGVjaW1hbFZhbHVlKT0+XG4gICAgICAgICAgICAgICAgQF9jdXJyZW50UnVsZURlY2ltYWwgPSBuZXdEZWNpbWFsVmFsdWVcbiAgICAgICAgKVxuXG4gICAgICAgIHJhZGlvKCdzaGFyZWQuZ2V0LmN1cnJlbnRydWxlZGVjaW1hbCcpLnN1YnNjcmliZShcbiAgICAgICAgICAgIChjYWxsYmFjayk9PlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKEBfY3VycmVudFJ1bGVEZWNpbWFsKVxuICAgICAgICApXG5cbiAgICAgICAgcmFkaW8oJ3NoYXJlZC5zZXQudG9wcm93YmluYXJ5Jykuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGEpPT5cbiAgICAgICAgICAgICAgICBAdG9wUm93QmluYXJ5QXJyYXkgPSBkYXRhXG4gICAgICAgIClcblxuICAgICAgICByYWRpbygnc2hhcmVkLmdldC50b3Byb3diaW5hcnknKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoY2FsbGJhY2spPT5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhAdG9wUm93QmluYXJ5QXJyYXkpXG4gICAgICAgIClcblxuICAgICAgICByYWRpbygnc2hhcmVkLnNldC5jZWxsY29sb3IuYWN0aXZlYmFja2dyb3VuZCcpLnN1YnNjcmliZShcbiAgICAgICAgICAgIChoZXhDb2xvcik9PlxuICAgICAgICAgICAgICAgIEBfY2VsbENvbG9yQWN0aXZlQmFja2dyb3VuZCA9IGhleENvbG9yXG4gICAgICAgIClcblxuICAgICAgICByYWRpbygnc2hhcmVkLmdldC5jZWxsY29sb3IuYWN0aXZlYmFja2dyb3VuZCcpLnN1YnNjcmliZShcbiAgICAgICAgICAgIChjYWxsYmFjayk9PlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKEBfY2VsbENvbG9yQWN0aXZlQmFja2dyb3VuZClcbiAgICAgICAgKVxuXG4gICAgICAgIHJhZGlvKCdzaGFyZWQuc2V0LmNlbGxjb2xvci5ib3JkZXInKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoaGV4Q29sb3IpPT5cbiAgICAgICAgICAgICAgICBAX2NlbGxDb2xvckJvcmRlciA9IGhleENvbG9yXG4gICAgICAgIClcblxuICAgICAgICByYWRpbygnc2hhcmVkLmdldC5jZWxsY29sb3IuYm9yZGVyJykuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGNhbGxiYWNrKT0+XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soQF9jZWxsQ29sb3JCb3JkZXIpXG4gICAgICAgICkiXX0=


/*

The DOM configuration for the Cellular Automata GENerator (CAGEN).

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Component of Cellular Automata Generator (CAGEN)

Contains the settings for the DOM objects.

Holds ids and classes of relevant DOM objects.
 */
var DOM;

DOM = (function() {
  function DOM() {}

  DOM.ids = {
    'BOARD': {
      'CONTAINER': 'cagen-board',
      'MESSAGE_CONTAINER': 'cagen-generatemessage-container'
    },
    'CAGEN': {
      'MAIN_CONTAINER': 'cagen-container'
    },
    'GENERATOR': {
      'CONTENT_CONTAINER': 'cagen-generator-content',
      'RULE_PREVIEW_CONTAINER': 'cagen-rules-preview-container',
      'RULE_DROPDOWN': 'cagen-generator-select-input',
      'RULE_GENERATE_BUTTON': 'cagen-generator-generate-button',
      'COLORPICKER_BUTTON': 'cagen-generator-colorpicker-button',
      'COLORPICKER_CONTAINER': 'cagen-colorpicker',
      'COLORPICKER_CELL': 'cagen-colorpicker-cell',
      'COLORPICKER_BORDER': 'cagen-colorpicker-border',
      'TEMPLATE_BOARD': 'tmpl-cagen-generator-board',
      'TEMPLATE_COLORPICKER': 'tmpl-cagen-generator-colorpicker',
      'TEMPLATE_MAIN_CONTAINER': 'tmpl-cagen-generator',
      'TEMPLATE_RULE_PREVIEW_CELL': 'tmpl-cagen-generator-preview-cell'
    },
    'TABS': {
      'CONTAINER': 'cagen-tab-container',
      'TEMPLATE': 'tmpl-cagen-tabs'
    },
    'THUMBNAILS': {
      'TEMPLATE_THUMBNAILS': 'tmpl-cagen-thumbnails'
    },
    'TOPROWEDITOR': {
      'BUTTON_GENERATE': 'rowed-button-generate',
      'BUTTON_RESET': 'rowed-button-resetrow',
      'EDITOR_CONTAINER': 'rowed-editor-container',
      'ROW_CONTAINER': 'rowed-slider-row-container',
      'SLIDER_CONTAINER': 'rowed-slider-container',
      'SLIDER': 'rowed-slider',
      'SLIDER_ARROW_LEFT': 'rowed-slider-arrow-left',
      'SLIDER_ARROW_RIGHT': 'rowed-slider-arrow-right',
      'TEMPLATE_TOPROWEDITOR': 'tmpl-cagen-toproweditor',
      'TEMPLATE_SLIDER_CELL': 'tmpl-rowed-slider-cell',
      'TEMPLATE_EDITOR_CELL': 'tmpl-rowed-editor-cell'
    }
  };

  DOM.classes = {
    'BOARD': {
      'CELL_ACTIVE_CLASS': 'cagen-board-cell-active',
      'CELL_BASE_CLASS': 'cagen-board-cell'
    },
    'GENERATOR': {
      'RULE_PREVIEW_CELL_ACTIVE': 'cagen-generator-preview-cell-active'
    },
    'TABS': {
      'ACTIVE': 'active'
    },
    'THUMBNAILS': {
      'THUMB_BOX': 'cagen-rulethumb-box'
    },
    'TOPROWEDITOR': {
      'EDITOR_CELL': 'rowed-editor-cell',
      'EDITOR_CELL_ACTIVE': 'rowed-editor-cell-active',
      'SLIDER_CELL_ACTIVE': 'cagen-board-cell-active'
    }
  };

  DOM.prefixes = {
    'BOARD': {
      'CELL': 'sb_'
    },
    'GENERATOR': {
      'RULE_PREVIEW_CELL': 'cagen-generator-preview-',
      'RULE_PREVIEW_DIGIT': 'cagen-generator-preview-digit-'
    },
    'TABS': {
      'TAB_PREFIX': 'cagen-tab-'
    },
    'TOPROWEDITOR': {
      'SLIDER_COL': 'rowed-slider-col-'
    }
  };

  DOM.elemById = function(section, element) {
    return document.getElementById(this.getID(section, element));
  };

  DOM.elemByPrefix = function(section, prefix, suffix) {
    return document.getElementById(this.getPrefix(section, prefix) + suffix);
  };

  DOM.getClass = function(section, element) {
    return this.classes[section][element];
  };

  DOM.getID = function(section, element) {
    if (!this.ids.hasOwnProperty(section)) {
      console.log("DOM::getID() - Unable to find `" + section + "`");
      return void 0;
    }
    if (!this.ids[section].hasOwnProperty(element)) {
      console.log("DOM::getID() - Unable to find `" + element + "`");
      return void 0;
    }
    return this.ids[section][element];
  };

  DOM.getPrefix = function(section, prefix) {
    return this.prefixes[section][prefix];
  };

  return DOM;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QSxDQUFTLENBQUEsT0FBQTtFQURuQjs7RUFHVixHQUFDLENBQUEsS0FBRCxHQUFPLFNBQUMsT0FBRCxFQUFVLE9BQVY7SUFFSCxJQUFHLENBQUksSUFBQyxDQUFBLEdBQUcsQ0FBQyxjQUFMLENBQW9CLE9BQXBCLENBQVA7TUFDSSxPQUFPLENBQUMsR0FBUixDQUFZLGlDQUFBLEdBQWtDLE9BQWxDLEdBQTBDLEdBQXREO0FBQ0EsYUFBTyxPQUZYOztJQUlBLElBQUcsQ0FBSSxJQUFDLENBQUEsR0FBSSxDQUFBLE9BQUEsQ0FBUSxDQUFDLGNBQWQsQ0FBNkIsT0FBN0IsQ0FBUDtNQUNJLE9BQU8sQ0FBQyxHQUFSLENBQVksaUNBQUEsR0FBa0MsT0FBbEMsR0FBMEMsR0FBdEQ7QUFDQSxhQUFPLE9BRlg7O0FBSUEsV0FBTyxJQUFDLENBQUEsR0FBSSxDQUFBLE9BQUEsQ0FBUyxDQUFBLE9BQUE7RUFWbEI7O0VBWVAsR0FBQyxDQUFBLFNBQUQsR0FBVyxTQUFDLE9BQUQsRUFBVSxNQUFWO0FBQ1AsV0FBTyxJQUFDLENBQUEsUUFBUyxDQUFBLE9BQUEsQ0FBUyxDQUFBLE1BQUE7RUFEbkIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcblxuVGhlIERPTSBjb25maWd1cmF0aW9uIGZvciB0aGUgQ2VsbHVsYXIgQXV0b21hdGEgR0VOZXJhdG9yIChDQUdFTikuXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vY2FnZW5cbkBsaWNlbnNlIE1JVFxuXG5Db21wb25lbnQgb2YgQ2VsbHVsYXIgQXV0b21hdGEgR2VuZXJhdG9yIChDQUdFTilcblxuQ29udGFpbnMgdGhlIHNldHRpbmdzIGZvciB0aGUgRE9NIG9iamVjdHMuXG5cbkhvbGRzIGlkcyBhbmQgY2xhc3NlcyBvZiByZWxldmFudCBET00gb2JqZWN0cy5cbiMjI1xuY2xhc3MgRE9NXG4gICAgQGlkcyA9IHtcbiAgICAgICAgJ0JPQVJEJzp7XG4gICAgICAgICAgICAnQ09OVEFJTkVSJzonY2FnZW4tYm9hcmQnLFxuICAgICAgICAgICAgJ01FU1NBR0VfQ09OVEFJTkVSJzonY2FnZW4tZ2VuZXJhdGVtZXNzYWdlLWNvbnRhaW5lcidcbiAgICAgICAgfSxcbiAgICAgICAgJ0NBR0VOJzp7XG4gICAgICAgICAgICAnTUFJTl9DT05UQUlORVInOidjYWdlbi1jb250YWluZXInXG4gICAgICAgIH0sXG4gICAgICAgICdHRU5FUkFUT1InOntcbiAgICAgICAgICAgICdDT05URU5UX0NPTlRBSU5FUic6J2NhZ2VuLWdlbmVyYXRvci1jb250ZW50JyxcbiAgICAgICAgICAgICdSVUxFX1BSRVZJRVdfQ09OVEFJTkVSJzonY2FnZW4tcnVsZXMtcHJldmlldy1jb250YWluZXInLFxuICAgICAgICAgICAgJ1JVTEVfRFJPUERPV04nOidjYWdlbi1nZW5lcmF0b3Itc2VsZWN0LWlucHV0JyxcbiAgICAgICAgICAgICdSVUxFX0dFTkVSQVRFX0JVVFRPTic6J2NhZ2VuLWdlbmVyYXRvci1nZW5lcmF0ZS1idXR0b24nLFxuICAgICAgICAgICAgJ0NPTE9SUElDS0VSX0JVVFRPTic6J2NhZ2VuLWdlbmVyYXRvci1jb2xvcnBpY2tlci1idXR0b24nLFxuICAgICAgICAgICAgJ0NPTE9SUElDS0VSX0NPTlRBSU5FUic6J2NhZ2VuLWNvbG9ycGlja2VyJyxcbiAgICAgICAgICAgICdDT0xPUlBJQ0tFUl9DRUxMJzonY2FnZW4tY29sb3JwaWNrZXItY2VsbCcsXG4gICAgICAgICAgICAnQ09MT1JQSUNLRVJfQk9SREVSJzonY2FnZW4tY29sb3JwaWNrZXItYm9yZGVyJyxcbiAgICAgICAgICAgICdURU1QTEFURV9CT0FSRCc6J3RtcGwtY2FnZW4tZ2VuZXJhdG9yLWJvYXJkJyxcbiAgICAgICAgICAgICdURU1QTEFURV9DT0xPUlBJQ0tFUic6J3RtcGwtY2FnZW4tZ2VuZXJhdG9yLWNvbG9ycGlja2VyJyxcbiAgICAgICAgICAgICdURU1QTEFURV9NQUlOX0NPTlRBSU5FUic6J3RtcGwtY2FnZW4tZ2VuZXJhdG9yJyxcbiAgICAgICAgICAgICdURU1QTEFURV9SVUxFX1BSRVZJRVdfQ0VMTCc6J3RtcGwtY2FnZW4tZ2VuZXJhdG9yLXByZXZpZXctY2VsbCcsXG4gICAgICAgIH0sXG4gICAgICAgICdUQUJTJzp7XG4gICAgICAgICAgICAnQ09OVEFJTkVSJzonY2FnZW4tdGFiLWNvbnRhaW5lcicsXG4gICAgICAgICAgICAnVEVNUExBVEUnOid0bXBsLWNhZ2VuLXRhYnMnXG4gICAgICAgIH0sXG4gICAgICAgICdUSFVNQk5BSUxTJzp7XG4gICAgICAgICAgICAnVEVNUExBVEVfVEhVTUJOQUlMUyc6J3RtcGwtY2FnZW4tdGh1bWJuYWlscycsXG4gICAgICAgIH0sXG4gICAgICAgICdUT1BST1dFRElUT1InOntcbiAgICAgICAgICAgICdCVVRUT05fR0VORVJBVEUnOiAncm93ZWQtYnV0dG9uLWdlbmVyYXRlJyxcbiAgICAgICAgICAgICdCVVRUT05fUkVTRVQnOiAncm93ZWQtYnV0dG9uLXJlc2V0cm93JyxcbiAgICAgICAgICAgICdFRElUT1JfQ09OVEFJTkVSJzogJ3Jvd2VkLWVkaXRvci1jb250YWluZXInLFxuICAgICAgICAgICAgJ1JPV19DT05UQUlORVInOiAncm93ZWQtc2xpZGVyLXJvdy1jb250YWluZXInLFxuICAgICAgICAgICAgJ1NMSURFUl9DT05UQUlORVInOiAncm93ZWQtc2xpZGVyLWNvbnRhaW5lcicsXG4gICAgICAgICAgICAnU0xJREVSJzoncm93ZWQtc2xpZGVyJyxcbiAgICAgICAgICAgICdTTElERVJfQVJST1dfTEVGVCc6J3Jvd2VkLXNsaWRlci1hcnJvdy1sZWZ0JyxcbiAgICAgICAgICAgICdTTElERVJfQVJST1dfUklHSFQnOidyb3dlZC1zbGlkZXItYXJyb3ctcmlnaHQnLFxuICAgICAgICAgICAgJ1RFTVBMQVRFX1RPUFJPV0VESVRPUic6ICd0bXBsLWNhZ2VuLXRvcHJvd2VkaXRvcicsXG4gICAgICAgICAgICAnVEVNUExBVEVfU0xJREVSX0NFTEwnOid0bXBsLXJvd2VkLXNsaWRlci1jZWxsJyxcbiAgICAgICAgICAgICdURU1QTEFURV9FRElUT1JfQ0VMTCc6J3RtcGwtcm93ZWQtZWRpdG9yLWNlbGwnXG4gICAgICAgIH0sXG4gICAgfVxuXG4gICAgQGNsYXNzZXMgPSB7XG4gICAgICAgICdCT0FSRCc6e1xuICAgICAgICAgICAgJ0NFTExfQUNUSVZFX0NMQVNTJzonY2FnZW4tYm9hcmQtY2VsbC1hY3RpdmUnLFxuICAgICAgICAgICAgJ0NFTExfQkFTRV9DTEFTUyc6J2NhZ2VuLWJvYXJkLWNlbGwnLFxuICAgICAgICB9LFxuICAgICAgICAnR0VORVJBVE9SJzp7XG4gICAgICAgICAgICAnUlVMRV9QUkVWSUVXX0NFTExfQUNUSVZFJzonY2FnZW4tZ2VuZXJhdG9yLXByZXZpZXctY2VsbC1hY3RpdmUnXG4gICAgICAgIH0sXG4gICAgICAgICdUQUJTJzp7XG4gICAgICAgICAgICAnQUNUSVZFJzonYWN0aXZlJ1xuICAgICAgICB9LFxuICAgICAgICAnVEhVTUJOQUlMUyc6e1xuICAgICAgICAgICAgJ1RIVU1CX0JPWCc6J2NhZ2VuLXJ1bGV0aHVtYi1ib3gnLFxuICAgICAgICB9LFxuICAgICAgICAnVE9QUk9XRURJVE9SJzp7XG4gICAgICAgICAgICAnRURJVE9SX0NFTEwnOidyb3dlZC1lZGl0b3ItY2VsbCcsXG4gICAgICAgICAgICAnRURJVE9SX0NFTExfQUNUSVZFJzoncm93ZWQtZWRpdG9yLWNlbGwtYWN0aXZlJyxcbiAgICAgICAgICAgICdTTElERVJfQ0VMTF9BQ1RJVkUnOidjYWdlbi1ib2FyZC1jZWxsLWFjdGl2ZSdcbiAgICAgICAgfSxcbiAgICB9XG5cbiAgICBAcHJlZml4ZXMgPSB7XG4gICAgICAgICdCT0FSRCc6e1xuICAgICAgICAgICAgJ0NFTEwnOidzYl8nXG4gICAgICAgIH0sXG4gICAgICAgICdHRU5FUkFUT1InOntcbiAgICAgICAgICAgICdSVUxFX1BSRVZJRVdfQ0VMTCc6J2NhZ2VuLWdlbmVyYXRvci1wcmV2aWV3LScsXG4gICAgICAgICAgICAnUlVMRV9QUkVWSUVXX0RJR0lUJzonY2FnZW4tZ2VuZXJhdG9yLXByZXZpZXctZGlnaXQtJ1xuICAgICAgICB9LFxuICAgICAgICAnVEFCUyc6e1xuICAgICAgICAgICAgJ1RBQl9QUkVGSVgnOidjYWdlbi10YWItJ1xuICAgICAgICB9LFxuICAgICAgICAnVE9QUk9XRURJVE9SJzp7XG4gICAgICAgICAgICAnU0xJREVSX0NPTCc6J3Jvd2VkLXNsaWRlci1jb2wtJ1xuICAgICAgICB9LFxuICAgIH1cblxuICAgICNcbiAgICAjIEdldCBhbiBlbGVtZW50IGJ5IGlkXG4gICAgI1xuICAgIEBlbGVtQnlJZDooc2VjdGlvbiwgZWxlbWVudCkgLT5cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEBnZXRJRChzZWN0aW9uLCBlbGVtZW50KSlcblxuICAgIEBlbGVtQnlQcmVmaXg6KHNlY3Rpb24sIHByZWZpeCwgc3VmZml4KSAtPlxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQGdldFByZWZpeChzZWN0aW9uLCBwcmVmaXgpICsgc3VmZml4KVxuXG4gICAgQGdldENsYXNzOihzZWN0aW9uLCBlbGVtZW50KSAtPlxuICAgICAgICByZXR1cm4gQGNsYXNzZXNbc2VjdGlvbl1bZWxlbWVudF1cblxuICAgIEBnZXRJRDooc2VjdGlvbiwgZWxlbWVudCkgLT5cblxuICAgICAgICBpZiBub3QgQGlkcy5oYXNPd25Qcm9wZXJ0eShzZWN0aW9uKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJET006OmdldElEKCkgLSBVbmFibGUgdG8gZmluZCBgXCIrc2VjdGlvbitcImBcIilcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWRcblxuICAgICAgICBpZiBub3QgQGlkc1tzZWN0aW9uXS5oYXNPd25Qcm9wZXJ0eShlbGVtZW50KVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJET006OmdldElEKCkgLSBVbmFibGUgdG8gZmluZCBgXCIrZWxlbWVudCtcImBcIilcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgICAgIFxuICAgICAgICByZXR1cm4gQGlkc1tzZWN0aW9uXVtlbGVtZW50XVxuICAgIFxuICAgIEBnZXRQcmVmaXg6KHNlY3Rpb24sIHByZWZpeCktPlxuICAgICAgICByZXR1cm4gQHByZWZpeGVzW3NlY3Rpb25dW3ByZWZpeF0iXX0=


/*
CAGEN: Cellular Automata GENerator

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Generate a cellular automata board based on a passed rule.
 */
var Board;

Board = (function() {
  function Board() {
    this._colorBorder = "#000000";
    this._colorCellActive = "#000000";
    this._boardNoCellsWide = 0;
    this._boardNoCellsHigh = 0;
    this._boardCellWidthPx = 5;
    this._boardCellHeightPx = 5;
    this._currentRow = 1;
    this._rootRowBinary = [];
    this._currentCells = [];
    this._RuleMatcher = new RuleMatcher();
  }

  Board.prototype.buildBoard = function(rootRowBinary, noCellsWide, noSectionsHigh) {
    this._boardElem = document.getElementById(DOM.getID('BOARD', 'CONTAINER'));
    this._messageElem = document.getElementById(DOM.getID('BOARD', 'MESSAGE_CONTAINER'));
    this._rootRowBinary = rootRowBinary;
    radio('shared.get.currentruledecimal').broadcast((function(_this) {
      return function(currentRuleDecimal) {
        return _this._RuleMatcher.setCurrentRule(currentRuleDecimal);
      };
    })(this));
    this._boardNoCellsWide = noCellsWide;
    this._boardNoCellsHigh = noSectionsHigh;
    this._boardElem.innerWidth = noCellsWide * this._boardCellWidthPx;
    this._boardElem.innerHeight = noSectionsHigh * this._boardCellHeightPx;
    this._boardElem.innerHtml = "";
    this._boardElem.style.display = "none";
    this._currentRow = 1;
    this._messageElem.style.display = "block";
    return setTimeout((function(_this) {
      return function() {
        _this._generateRows();
        _this._messageElem.style.display = "none";
        return _this._boardElem.style.display = "block";
      };
    })(this), 500);
  };

  Board.prototype._setupColorEvents = function() {
    radio('shared.set.cellcolor.activebackground').subscribe((function(_this) {
      return function(hexColor) {
        return _this._changeCellActiveBackroundColor(hexColor);
      };
    })(this));
    return radio('shared.set.cellcolor.border').subscribe((function(_this) {
      return function(hexColor) {
        return _this._changeCellBorderColor(hexColor);
      };
    })(this));
  };

  Board.prototype._generateRows = function() {
    var i, ref, results, row;
    this._buildTopRow();
    results = [];
    for (row = i = 2, ref = this._boardNoCellsHigh; 2 <= ref ? i <= ref : i >= ref; row = 2 <= ref ? ++i : --i) {
      this._currentRow = row;
      results.push(this._buildRow(row));
    }
    return results;
  };

  Board.prototype._buildRow = function(row) {
    var col, i, oneIndex, ref, twoIndex, zeroIndex;
    for (col = i = 1, ref = this._boardNoCellsWide; 1 <= ref ? i <= ref : i >= ref; col = 1 <= ref ? ++i : --i) {
      zeroIndex = this._currentCells[row - 1][col - 1];
      if (zeroIndex === void 0) {
        zeroIndex = this._currentCells[row - 1][this._boardNoCellsWide];
      }
      oneIndex = this._currentCells[row - 1][col];
      twoIndex = this._currentCells[row - 1][col + 1];
      if (twoIndex === void 0) {
        twoIndex = this._currentCells[row - 1][1];
      }
      if (this._RuleMatcher.match(zeroIndex, oneIndex, twoIndex) === 0) {
        this._getCellHtml(row, col, false);
      } else {
        this._getCellHtml(row, col, true);
      }
    }
    return this._currentRow++;
  };

  Board.prototype._buildTopRow = function() {
    var cell, col, i, ref;
    for (col = i = 1, ref = this._boardNoCellsWide; 1 <= ref ? i <= ref : i >= ref; col = 1 <= ref ? ++i : --i) {
      cell = this._rootRowBinary[col];
      if (cell === 1) {
        this._getCellHtml(this._currentRow, col, true);
      } else {
        this._getCellHtml(this._currentRow, col, false);
      }
    }
    return this._currentRow++;
  };

  Board.prototype._getCellHtml = function(row, col, active) {
    var tmpCell, tmpClass, tmpID, tmpLeftPx, tmpTopPx;
    if (!this._currentCells[row]) {
      this._currentCells[row] = [];
    }
    this._currentCells[row][col] = active ? 1 : 0;
    tmpID = DOM.getPrefix('BOARD', 'CELL') + this._currentRow + "_" + col;
    tmpLeftPx = (col - 1) * this._boardCellWidthPx;
    tmpTopPx = (row - 1) * this._boardCellHeightPx;
    tmpCell = document.createElement('div');
    tmpCell.setAttribute('id', tmpID);
    tmpCell.style.top = tmpTopPx + "px";
    tmpCell.style.left = tmpLeftPx + "px";
    tmpClass = DOM.getClass('BOARD', 'CELL_BASE_CLASS');
    if (active) {
      tmpCell.style.backgroundColor = this._colorCellActive;
      tmpClass += " " + (DOM.getClass('BOARD', 'CELL_ACTIVE_CLASS'));
    }
    tmpCell.setAttribute('class', "" + tmpClass);
    tmpCell.style.borderColor = this._colorBorder;
    return this._boardElem.appendChild(tmpCell);
  };

  Board.prototype._changeCellActiveBackroundColor = function(hexColor) {
    var cell, cellsElems, i, len, results;
    this._colorCellActive = hexColor;
    cellsElems = document.querySelectorAll('.' + DOM.getClass('BOARD', 'CELL_ACTIVE_CLASS'));
    results = [];
    for (i = 0, len = cellsElems.length; i < len; i++) {
      cell = cellsElems[i];
      results.push(cell.style.backgroundColor = this._colorCellActive);
    }
    return results;
  };

  Board.prototype._changeCellBorderColor = function(hexColor) {
    var cell, cellsElems, i, len, results;
    this._colorBorder = hexColor;
    cellsElems = document.querySelectorAll('.' + DOM.getClass('BOARD', 'CELL_BASE_CLASS'));
    results = [];
    for (i = 0, len = cellsElems.length; i < len; i++) {
      cell = cellsElems[i];
      results.push(cell.style.borderColor = this._colorBorder);
    }
    return results;
  };

  return Board;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQm9hcmQuanMiLCJzb3VyY2VzIjpbIkJvYXJkLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7OztBQUFBLElBQUE7O0FBWU07RUFNVyxlQUFBO0lBQ1QsSUFBQyxDQUFBLFlBQUQsR0FBZ0I7SUFDaEIsSUFBQyxDQUFBLGdCQUFELEdBQW9CO0lBQ3BCLElBQUMsQ0FBQSxpQkFBRCxHQUFxQjtJQUNyQixJQUFDLENBQUEsaUJBQUQsR0FBcUI7SUFDckIsSUFBQyxDQUFBLGlCQUFELEdBQXFCO0lBQ3JCLElBQUMsQ0FBQSxrQkFBRCxHQUFzQjtJQUV0QixJQUFDLENBQUEsV0FBRCxHQUFlO0lBRWYsSUFBQyxDQUFBLGNBQUQsR0FBa0I7SUFDbEIsSUFBQyxDQUFBLGFBQUQsR0FBaUI7SUFDakIsSUFBQyxDQUFBLFlBQUQsR0FBb0IsSUFBQSxXQUFBLENBQUE7RUFaWDs7a0JBbUJiLFVBQUEsR0FBWSxTQUFDLGFBQUQsRUFBZ0IsV0FBaEIsRUFBNkIsY0FBN0I7SUFFUixJQUFDLENBQUEsVUFBRCxHQUFjLFFBQVEsQ0FBQyxjQUFULENBQXdCLEdBQUcsQ0FBQyxLQUFKLENBQVUsT0FBVixFQUFtQixXQUFuQixDQUF4QjtJQUNkLElBQUMsQ0FBQSxZQUFELEdBQWdCLFFBQVEsQ0FBQyxjQUFULENBQXdCLEdBQUcsQ0FBQyxLQUFKLENBQVUsT0FBVixFQUFtQixtQkFBbkIsQ0FBeEI7SUFFaEIsSUFBQyxDQUFBLGNBQUQsR0FBa0I7SUFFbEIsS0FBQSxDQUFNLCtCQUFOLENBQXNDLENBQUMsU0FBdkMsQ0FDSSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsa0JBQUQ7ZUFDSSxLQUFDLENBQUEsWUFBWSxDQUFDLGNBQWQsQ0FBNkIsa0JBQTdCO01BREo7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBREo7SUFLQSxJQUFDLENBQUEsaUJBQUQsR0FBcUI7SUFDckIsSUFBQyxDQUFBLGlCQUFELEdBQXFCO0lBQ3JCLElBQUMsQ0FBQSxVQUFVLENBQUMsVUFBWixHQUF5QixXQUFBLEdBQWMsSUFBQyxDQUFBO0lBQ3hDLElBQUMsQ0FBQSxVQUFVLENBQUMsV0FBWixHQUEwQixjQUFBLEdBQWlCLElBQUMsQ0FBQTtJQUc1QyxJQUFDLENBQUEsVUFBVSxDQUFDLFNBQVosR0FBd0I7SUFFeEIsSUFBQyxDQUFBLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBbEIsR0FBNEI7SUFDNUIsSUFBQyxDQUFBLFdBQUQsR0FBZTtJQUdmLElBQUMsQ0FBQSxZQUFZLENBQUMsS0FBSyxDQUFDLE9BQXBCLEdBQThCO1dBQzlCLFVBQUEsQ0FBVyxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7UUFFUCxLQUFDLENBQUEsYUFBRCxDQUFBO1FBQ0EsS0FBQyxDQUFBLFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBcEIsR0FBOEI7ZUFDOUIsS0FBQyxDQUFBLFVBQVUsQ0FBQyxLQUFLLENBQUMsT0FBbEIsR0FBNEI7TUFKckI7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBQVgsRUFLQyxHQUxEO0VBekJROztrQkFnQ1osaUJBQUEsR0FBa0IsU0FBQTtJQUNkLEtBQUEsQ0FBTSx1Q0FBTixDQUE4QyxDQUFDLFNBQS9DLENBQ0ksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFFBQUQ7ZUFDSSxLQUFDLENBQUEsK0JBQUQsQ0FBaUMsUUFBakM7TUFESjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FESjtXQUtBLEtBQUEsQ0FBTSw2QkFBTixDQUFvQyxDQUFDLFNBQXJDLENBQ0ksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFDLFFBQUQ7ZUFDSSxLQUFDLENBQUEsc0JBQUQsQ0FBd0IsUUFBeEI7TUFESjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FESjtFQU5jOztrQkFjbEIsYUFBQSxHQUFjLFNBQUE7QUFDVixRQUFBO0lBQUEsSUFBQyxDQUFBLFlBQUQsQ0FBQTtBQUdBO1NBQVcscUdBQVg7TUFDSSxJQUFDLENBQUEsV0FBRCxHQUFlO21CQUNmLElBQUMsQ0FBQSxTQUFELENBQVcsR0FBWDtBQUZKOztFQUpVOztrQkFZZCxTQUFBLEdBQVcsU0FBQyxHQUFEO0FBR1AsUUFBQTtBQUFBLFNBQVcscUdBQVg7TUFDSSxTQUFBLEdBQVksSUFBQyxDQUFBLGFBQWMsQ0FBQSxHQUFBLEdBQUksQ0FBSixDQUFPLENBQUEsR0FBQSxHQUFJLENBQUo7TUFDbEMsSUFBRyxTQUFBLEtBQWEsTUFBaEI7UUFHSSxTQUFBLEdBQVksSUFBQyxDQUFBLGFBQWMsQ0FBQSxHQUFBLEdBQUksQ0FBSixDQUFPLENBQUEsSUFBQyxDQUFBLGlCQUFELEVBSHRDOztNQUlBLFFBQUEsR0FBVyxJQUFDLENBQUEsYUFBYyxDQUFBLEdBQUEsR0FBSSxDQUFKLENBQU8sQ0FBQSxHQUFBO01BQ2pDLFFBQUEsR0FBVyxJQUFDLENBQUEsYUFBYyxDQUFBLEdBQUEsR0FBSSxDQUFKLENBQU8sQ0FBQSxHQUFBLEdBQUksQ0FBSjtNQUNqQyxJQUFHLFFBQUEsS0FBWSxNQUFmO1FBR0ksUUFBQSxHQUFXLElBQUMsQ0FBQSxhQUFjLENBQUEsR0FBQSxHQUFJLENBQUosQ0FBTyxDQUFBLENBQUEsRUFIckM7O01BTUEsSUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDLEtBQWQsQ0FBb0IsU0FBcEIsRUFBK0IsUUFBL0IsRUFBeUMsUUFBekMsQ0FBQSxLQUFzRCxDQUF6RDtRQUNJLElBQUMsQ0FBQSxZQUFELENBQWMsR0FBZCxFQUFtQixHQUFuQixFQUF3QixLQUF4QixFQURKO09BQUEsTUFBQTtRQUdJLElBQUMsQ0FBQSxZQUFELENBQWMsR0FBZCxFQUFtQixHQUFuQixFQUF3QixJQUF4QixFQUhKOztBQWRKO1dBbUJBLElBQUMsQ0FBQSxXQUFEO0VBdEJPOztrQkE0QlgsWUFBQSxHQUFjLFNBQUE7QUFJVixRQUFBO0FBQUEsU0FBVyxxR0FBWDtNQUNJLElBQUEsR0FBTyxJQUFDLENBQUEsY0FBZSxDQUFBLEdBQUE7TUFDdkIsSUFBRyxJQUFBLEtBQVEsQ0FBWDtRQUNJLElBQUMsQ0FBQSxZQUFELENBQWMsSUFBQyxDQUFBLFdBQWYsRUFBNEIsR0FBNUIsRUFBaUMsSUFBakMsRUFESjtPQUFBLE1BQUE7UUFHSSxJQUFDLENBQUEsWUFBRCxDQUFjLElBQUMsQ0FBQSxXQUFmLEVBQTRCLEdBQTVCLEVBQWlDLEtBQWpDLEVBSEo7O0FBRko7V0FNQSxJQUFDLENBQUEsV0FBRDtFQVZVOztrQkFlZCxZQUFBLEdBQWMsU0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLE1BQVg7QUFFVixRQUFBO0lBQUEsSUFBRyxDQUFDLElBQUMsQ0FBQSxhQUFjLENBQUEsR0FBQSxDQUFuQjtNQUNJLElBQUMsQ0FBQSxhQUFjLENBQUEsR0FBQSxDQUFmLEdBQXNCLEdBRDFCOztJQUVBLElBQUMsQ0FBQSxhQUFjLENBQUEsR0FBQSxDQUFLLENBQUEsR0FBQSxDQUFwQixHQUE4QixNQUFILEdBQWUsQ0FBZixHQUFzQjtJQUVqRCxLQUFBLEdBQVEsR0FBRyxDQUFDLFNBQUosQ0FBYyxPQUFkLEVBQXNCLE1BQXRCLENBQUEsR0FBZ0MsSUFBQyxDQUFBLFdBQWpDLEdBQStDLEdBQS9DLEdBQXFEO0lBQzdELFNBQUEsR0FBWSxDQUFDLEdBQUEsR0FBSSxDQUFMLENBQUEsR0FBUSxJQUFDLENBQUE7SUFDckIsUUFBQSxHQUFXLENBQUMsR0FBQSxHQUFJLENBQUwsQ0FBQSxHQUFRLElBQUMsQ0FBQTtJQUVwQixPQUFBLEdBQVUsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsS0FBdkI7SUFDVixPQUFPLENBQUMsWUFBUixDQUFxQixJQUFyQixFQUEyQixLQUEzQjtJQUNBLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBZCxHQUFvQixRQUFBLEdBQVc7SUFDL0IsT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFkLEdBQXFCLFNBQUEsR0FBWTtJQUdqQyxRQUFBLEdBQVcsR0FBRyxDQUFDLFFBQUosQ0FBYSxPQUFiLEVBQXNCLGlCQUF0QjtJQUNYLElBQUcsTUFBSDtNQUNJLE9BQU8sQ0FBQyxLQUFLLENBQUMsZUFBZCxHQUFnQyxJQUFDLENBQUE7TUFDakMsUUFBQSxJQUFZLEdBQUEsR0FBRyxDQUFFLEdBQUcsQ0FBQyxRQUFKLENBQWEsT0FBYixFQUFzQixtQkFBdEIsQ0FBRixFQUZuQjs7SUFJQSxPQUFPLENBQUMsWUFBUixDQUFxQixPQUFyQixFQUE4QixFQUFBLEdBQUcsUUFBakM7SUFFQSxPQUFPLENBQUMsS0FBSyxDQUFDLFdBQWQsR0FBNEIsSUFBQyxDQUFBO1dBQzdCLElBQUMsQ0FBQSxVQUFVLENBQUMsV0FBWixDQUF3QixPQUF4QjtFQXhCVTs7a0JBNkJkLCtCQUFBLEdBQWlDLFNBQUMsUUFBRDtBQUM3QixRQUFBO0lBQUEsSUFBQyxDQUFBLGdCQUFELEdBQW9CO0lBRXBCLFVBQUEsR0FBYSxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsR0FBQSxHQUFNLEdBQUcsQ0FBQyxRQUFKLENBQWEsT0FBYixFQUFzQixtQkFBdEIsQ0FBaEM7QUFFYjtTQUFBLDRDQUFBOzttQkFDSSxJQUFJLENBQUMsS0FBSyxDQUFDLGVBQVgsR0FBNkIsSUFBQyxDQUFBO0FBRGxDOztFQUw2Qjs7a0JBV2pDLHNCQUFBLEdBQXdCLFNBQUMsUUFBRDtBQUNwQixRQUFBO0lBQUEsSUFBQyxDQUFBLFlBQUQsR0FBZ0I7SUFDaEIsVUFBQSxHQUFhLFFBQVEsQ0FBQyxnQkFBVCxDQUEwQixHQUFBLEdBQU0sR0FBRyxDQUFDLFFBQUosQ0FBYSxPQUFiLEVBQXNCLGlCQUF0QixDQUFoQztBQUViO1NBQUEsNENBQUE7O21CQUNJLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBWCxHQUF5QixJQUFDLENBQUE7QUFEOUI7O0VBSm9CIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG5DQUdFTjogQ2VsbHVsYXIgQXV0b21hdGEgR0VOZXJhdG9yXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vY2FnZW5cbkBsaWNlbnNlIE1JVFxuXG5HZW5lcmF0ZSBhIGNlbGx1bGFyIGF1dG9tYXRhIGJvYXJkIGJhc2VkIG9uIGEgcGFzc2VkIHJ1bGUuXG5cbiMjI1xuXG5cbmNsYXNzIEJvYXJkXG5cbiAgICAjXG4gICAgIyBDb25zdHJ1Y3RvciBmb3IgdGhlIEJvYXJkIGNsYXNzLlxuICAgICMgSW5pdGlhbGl6ZSB0aGUgc2hhcmVkIHZhcmlhYmxlcyBmb3IgdGhlIGJvYXJkLlxuICAgICMgXG4gICAgY29uc3RydWN0b3I6ICgpLT5cbiAgICAgICAgQF9jb2xvckJvcmRlciA9IFwiIzAwMDAwMFwiXG4gICAgICAgIEBfY29sb3JDZWxsQWN0aXZlID0gXCIjMDAwMDAwXCJcbiAgICAgICAgQF9ib2FyZE5vQ2VsbHNXaWRlID0gMFxuICAgICAgICBAX2JvYXJkTm9DZWxsc0hpZ2ggPSAwXG4gICAgICAgIEBfYm9hcmRDZWxsV2lkdGhQeCA9IDVcbiAgICAgICAgQF9ib2FyZENlbGxIZWlnaHRQeCA9IDVcblxuICAgICAgICBAX2N1cnJlbnRSb3cgPSAxXG4gICAgICAgIFxuICAgICAgICBAX3Jvb3RSb3dCaW5hcnkgPSBbXVxuICAgICAgICBAX2N1cnJlbnRDZWxscyA9IFtdXG4gICAgICAgIEBfUnVsZU1hdGNoZXIgPSBuZXcgUnVsZU1hdGNoZXIoKVxuICAgICAgICBcbiAgICAjXG4gICAgIyBCdWlsZCB0aGUgYm9hcmQuXG4gICAgIyBUYWtlIGEgYmluYXJ5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByb290L3RvcCByb3cgYW5kXG4gICAgIyB0aGVuIGdlbmVyYXRlIHRoZSBjZWxscy5cbiAgICAjIFxuICAgIGJ1aWxkQm9hcmQ6IChyb290Um93QmluYXJ5LCBub0NlbGxzV2lkZSwgbm9TZWN0aW9uc0hpZ2gpIC0+XG4gICAgICAgICMgU2VsZWN0IGxvY2FsIGpRdWVyeSBET00gb2JqZWN0c1xuICAgICAgICBAX2JvYXJkRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKERPTS5nZXRJRCgnQk9BUkQnLCAnQ09OVEFJTkVSJykpO1xuICAgICAgICBAX21lc3NhZ2VFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRE9NLmdldElEKCdCT0FSRCcsICdNRVNTQUdFX0NPTlRBSU5FUicpKTtcbiAgICAgICAgXG4gICAgICAgIEBfcm9vdFJvd0JpbmFyeSA9IHJvb3RSb3dCaW5hcnlcbiAgICAgICAgXG4gICAgICAgIHJhZGlvKCdzaGFyZWQuZ2V0LmN1cnJlbnRydWxlZGVjaW1hbCcpLmJyb2FkY2FzdChcbiAgICAgICAgICAgIChjdXJyZW50UnVsZURlY2ltYWwpPT5cbiAgICAgICAgICAgICAgICBAX1J1bGVNYXRjaGVyLnNldEN1cnJlbnRSdWxlKGN1cnJlbnRSdWxlRGVjaW1hbClcbiAgICAgICAgKVxuXG4gICAgICAgIEBfYm9hcmROb0NlbGxzV2lkZSA9IG5vQ2VsbHNXaWRlXG4gICAgICAgIEBfYm9hcmROb0NlbGxzSGlnaCA9IG5vU2VjdGlvbnNIaWdoXG4gICAgICAgIEBfYm9hcmRFbGVtLmlubmVyV2lkdGggPSBub0NlbGxzV2lkZSAqIEBfYm9hcmRDZWxsV2lkdGhQeFxuICAgICAgICBAX2JvYXJkRWxlbS5pbm5lckhlaWdodCA9IG5vU2VjdGlvbnNIaWdoICogQF9ib2FyZENlbGxIZWlnaHRQeFxuXG4gICAgICAgICMgQ2xlYXIgdGhlIGJvYXJkXG4gICAgICAgIEBfYm9hcmRFbGVtLmlubmVySHRtbCA9IFwiXCJcblxuICAgICAgICBAX2JvYXJkRWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICAgICAgQF9jdXJyZW50Um93ID0gMVxuXG4gICAgICAgICMgU2hvdyB0aGUgZ2VuZXJhdGluZyBtZXNzYWdlXG4gICAgICAgIEBfbWVzc2FnZUVsZW0uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgICAgICBzZXRUaW1lb3V0KD0+XG4gICAgICAgICAgICAjIEdlbmVyYXRlIHRoZSByb3dzXG4gICAgICAgICAgICBAX2dlbmVyYXRlUm93cygpXG4gICAgICAgICAgICBAX21lc3NhZ2VFbGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgICAgICAgICAgQF9ib2FyZEVsZW0uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgICAgICAsNTAwKVxuXG4gICAgX3NldHVwQ29sb3JFdmVudHM6KCktPlxuICAgICAgICByYWRpbygnc2hhcmVkLnNldC5jZWxsY29sb3IuYWN0aXZlYmFja2dyb3VuZCcpLnN1YnNjcmliZShcbiAgICAgICAgICAgIChoZXhDb2xvcik9PlxuICAgICAgICAgICAgICAgIEBfY2hhbmdlQ2VsbEFjdGl2ZUJhY2tyb3VuZENvbG9yKGhleENvbG9yKVxuICAgICAgICApXG5cbiAgICAgICAgcmFkaW8oJ3NoYXJlZC5zZXQuY2VsbGNvbG9yLmJvcmRlcicpLnN1YnNjcmliZShcbiAgICAgICAgICAgIChoZXhDb2xvcik9PlxuICAgICAgICAgICAgICAgIEBfY2hhbmdlQ2VsbEJvcmRlckNvbG9yKGhleENvbG9yKVxuICAgICAgICApXG5cbiAgICAjXG4gICAgIyBHZW5lcmF0ZSB0aGUgcm93cyBpbiB0aGUgYm9hcmRcbiAgICAjIFxuICAgIF9nZW5lcmF0ZVJvd3M6KCktPlxuICAgICAgICBAX2J1aWxkVG9wUm93KClcblxuICAgICAgICAjIFN0YXJ0IGF0IHRoZSAybmQgcm93ICh0aGUgZmlyc3Qvcm9vdCByb3cgaXMgYWxyZWFkeSBzZXQpXG4gICAgICAgIGZvciByb3cgaW4gWzIuLkBfYm9hcmROb0NlbGxzSGlnaF1cbiAgICAgICAgICAgIEBfY3VycmVudFJvdyA9IHJvd1xuICAgICAgICAgICAgQF9idWlsZFJvdyhyb3cpXG4gICAgICAgIFxuXG4gICAgI1xuICAgICMgQWRkIHRoZSBibG9ja3MgdG8gYSByb3dcbiAgICAjIFxuICAgIF9idWlsZFJvdzogKHJvdykgLT5cblxuICAgICAgICAjIExvb3Agb3ZlciBlYWNoIGNvbHVtbiBpbiB0aGUgY3VycmVudCByb3dcbiAgICAgICAgZm9yIGNvbCBpbiBbMS4uQF9ib2FyZE5vQ2VsbHNXaWRlXVxuICAgICAgICAgICAgemVyb0luZGV4ID0gQF9jdXJyZW50Q2VsbHNbcm93LTFdW2NvbC0xXVxuICAgICAgICAgICAgaWYgemVyb0luZGV4IGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICMgV3JhcCB0byB0aGUgZW5kIG9mIHRoZSByb3dcbiAgICAgICAgICAgICAgICAjIHdoZW4gYXQgdGhlIGJlZ2lubmluZ1xuICAgICAgICAgICAgICAgIHplcm9JbmRleCA9IEBfY3VycmVudENlbGxzW3Jvdy0xXVtAX2JvYXJkTm9DZWxsc1dpZGVdXG4gICAgICAgICAgICBvbmVJbmRleCA9IEBfY3VycmVudENlbGxzW3Jvdy0xXVtjb2xdXG4gICAgICAgICAgICB0d29JbmRleCA9IEBfY3VycmVudENlbGxzW3Jvdy0xXVtjb2wrMV1cbiAgICAgICAgICAgIGlmIHR3b0luZGV4IGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICMgV3JhcCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSByb3dcbiAgICAgICAgICAgICAgICAjIHdoZW4gdGhlIGVuZCBpcyByZWFjaGVkXG4gICAgICAgICAgICAgICAgdHdvSW5kZXggPSBAX2N1cnJlbnRDZWxsc1tyb3ctMV1bMV1cblxuICAgICAgICAgICAgIyBEZXRlcm1pbmUgd2hldGhlciB0aGUgYmxvY2sgc2hvdWxkIGJlIHNldCBvciBub3RcbiAgICAgICAgICAgIGlmIEBfUnVsZU1hdGNoZXIubWF0Y2goemVyb0luZGV4LCBvbmVJbmRleCwgdHdvSW5kZXgpIGlzIDBcbiAgICAgICAgICAgICAgICBAX2dldENlbGxIdG1sKHJvdywgY29sLCBmYWxzZSlcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBAX2dldENlbGxIdG1sKHJvdywgY29sLCB0cnVlKVxuXG4gICAgICAgIEBfY3VycmVudFJvdysrXG4gICAgICAgIFxuXG4gICAgI1xuICAgICMgQWRkIGNlbGxzIHRvIHRoZSByb290L3RvcCByb3dcbiAgICAjIFxuICAgIF9idWlsZFRvcFJvdzogLT5cblxuICAgICAgICAjIEJ1aWxkIHRoZSB0b3Agcm93IGZyb20gdGhlIHJvb3Qgcm93IGJpbmFyeVxuICAgICAgICAjICAgdGhpcyBpcyBkZWZpbmVkIGJ5IHRoZSByb290IHJvdyBlZGl0b3JcbiAgICAgICAgZm9yIGNvbCBpbiBbMS4uQF9ib2FyZE5vQ2VsbHNXaWRlXVxuICAgICAgICAgICAgY2VsbCA9IEBfcm9vdFJvd0JpbmFyeVtjb2xdXG4gICAgICAgICAgICBpZiBjZWxsIGlzIDFcbiAgICAgICAgICAgICAgICBAX2dldENlbGxIdG1sKEBfY3VycmVudFJvdywgY29sLCB0cnVlKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIEBfZ2V0Q2VsbEh0bWwoQF9jdXJyZW50Um93LCBjb2wsIGZhbHNlKVxuICAgICAgICBAX2N1cnJlbnRSb3crK1xuXG4gICAgI1xuICAgICMgR2V0IHRoZSBjZWxsIGh0bWxcbiAgICAjIFxuICAgIF9nZXRDZWxsSHRtbDogKHJvdywgY29sLCBhY3RpdmUpLT5cbiAgICAgICAgIyBBZGQgdGhlIGNlbGwgc3RhdGUgdG8gdGhlIGN1cnJlbnQgYXJyYXlcbiAgICAgICAgaWYgIUBfY3VycmVudENlbGxzW3Jvd11cbiAgICAgICAgICAgIEBfY3VycmVudENlbGxzW3Jvd10gPSBbXVxuICAgICAgICBAX2N1cnJlbnRDZWxsc1tyb3ddW2NvbF0gPSBpZiBhY3RpdmUgdGhlbiAxIGVsc2UgMFxuXG4gICAgICAgIHRtcElEID0gRE9NLmdldFByZWZpeCgnQk9BUkQnLCdDRUxMJykgKyBAX2N1cnJlbnRSb3cgKyBcIl9cIiArIGNvbFxuICAgICAgICB0bXBMZWZ0UHggPSAoY29sLTEpKkBfYm9hcmRDZWxsV2lkdGhQeFxuICAgICAgICB0bXBUb3BQeCA9IChyb3ctMSkqQF9ib2FyZENlbGxIZWlnaHRQeFxuXG4gICAgICAgIHRtcENlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICB0bXBDZWxsLnNldEF0dHJpYnV0ZSgnaWQnLCB0bXBJRClcbiAgICAgICAgdG1wQ2VsbC5zdHlsZS50b3AgPSB0bXBUb3BQeCArIFwicHhcIlxuICAgICAgICB0bXBDZWxsLnN0eWxlLmxlZnQgPSB0bXBMZWZ0UHggKyBcInB4XCJcbiAgICAgICAgIyBJbmxpbmUgQ1NTIGZvciB0aGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGNlbGxcblxuICAgICAgICB0bXBDbGFzcyA9IERPTS5nZXRDbGFzcygnQk9BUkQnLCAnQ0VMTF9CQVNFX0NMQVNTJylcbiAgICAgICAgaWYgYWN0aXZlXG4gICAgICAgICAgICB0bXBDZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IEBfY29sb3JDZWxsQWN0aXZlXG4gICAgICAgICAgICB0bXBDbGFzcyArPSBcIiAjeyBET00uZ2V0Q2xhc3MoJ0JPQVJEJywgJ0NFTExfQUNUSVZFX0NMQVNTJykgfVwiXG5cbiAgICAgICAgdG1wQ2VsbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgXCIje3RtcENsYXNzfVwiKVxuICAgICAgICBcbiAgICAgICAgdG1wQ2VsbC5zdHlsZS5ib3JkZXJDb2xvciA9IEBfY29sb3JCb3JkZXJcbiAgICAgICAgQF9ib2FyZEVsZW0uYXBwZW5kQ2hpbGQodG1wQ2VsbCk7XG4gICAgXG4gICAgI1xuICAgICMgQ2hhbmdlIHRoZSBjb2xvciBvZiB0aGUgY2VsbHNcbiAgICAjXG4gICAgX2NoYW5nZUNlbGxBY3RpdmVCYWNrcm91bmRDb2xvcjogKGhleENvbG9yKS0+XG4gICAgICAgIEBfY29sb3JDZWxsQWN0aXZlID0gaGV4Q29sb3JcblxuICAgICAgICBjZWxsc0VsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBET00uZ2V0Q2xhc3MoJ0JPQVJEJywgJ0NFTExfQUNUSVZFX0NMQVNTJykpXG5cbiAgICAgICAgZm9yIGNlbGwgaW4gY2VsbHNFbGVtc1xuICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBAX2NvbG9yQ2VsbEFjdGl2ZVxuXG4gICAgI1xuICAgICMgQ2hhbmdlIHRoZSBib3JkZXIgY29sb3Igb2YgdGhlIGNlbGxzXG4gICAgI1xuICAgIF9jaGFuZ2VDZWxsQm9yZGVyQ29sb3I6IChoZXhDb2xvciktPlxuICAgICAgICBAX2NvbG9yQm9yZGVyID0gaGV4Q29sb3JcbiAgICAgICAgY2VsbHNFbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgRE9NLmdldENsYXNzKCdCT0FSRCcsICdDRUxMX0JBU0VfQ0xBU1MnKSlcblxuICAgICAgICBmb3IgY2VsbCBpbiBjZWxsc0VsZW1zXG4gICAgICAgICAgICBjZWxsLnN0eWxlLmJvcmRlckNvbG9yID0gQF9jb2xvckJvcmRlciJdfQ==


/*

The Generator for the Cellular Automata GENerator (CAGEN).

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Component of Cellular Automata Generator (CAGEN)

Functionality for building the generator for
controlling the cellular automata generation.

- Display a preview of the rules.
- Display the generated board.
 */
var Generator;

Generator = (function() {
  function Generator(BUS) {
    this.BUS = BUS;
    this._currentRule = 0;
    this._previewBoxWidth = 40;
    this._noBoardColumns = 151;
    this._noBoardRows = 75;
    this._isColorPickerEnabled = false;
    this._ruleList = [];
    this.BUS.subscribe('generator.run', (function(_this) {
      return function() {
        _this.run();
      };
    })(this));
  }

  Generator.prototype.run = function() {
    var cagenMainElem, generatorTemplateHTML;
    generatorTemplateHTML = DOM.elemById('GENERATOR', 'TEMPLATE_MAIN_CONTAINER').innerHTML;
    cagenMainElem = DOM.elemById('CAGEN', 'MAIN_CONTAINER');
    cagenMainElem.innerHTML = Mustache.render(generatorTemplateHTML, {});
    this._Board = new Board();
    this._setupRuleDropdown();
    DOM.elemById('GENERATOR', 'COLORPICKER_BUTTON').addEventListener('click', (function(_this) {
      return function() {
        if (_this._isColorPickerEnabled) {
          return _this._disableColorPicker();
        } else {
          return _this._enableColorPicker();
        }
      };
    })(this));
    this._buildBoard();
    return true;
  };

  Generator.prototype._enableColorPicker = function() {
    var colorPickerElem, colorpickerTemplateHTML;
    colorpickerTemplateHTML = DOM.elemById('GENERATOR', 'TEMPLATE_COLORPICKER').innerHTML;
    colorPickerElem = DOM.elemById('GENERATOR', 'COLORPICKER_CONTAINER');
    colorPickerElem.innerHTML = Mustache.render(colorpickerTemplateHTML, {});
    this._isColorPickerEnabled = true;
    ColorPicker(DOM.elemById('GENERATOR', 'COLORPICKER_CELL'), (function(_this) {
      return function(hex) {
        return radio('shared.set.cellcolor.activebackground').broadcast(hex);
      };
    })(this));
    return ColorPicker(DOM.elemById('GENERATOR', 'COLORPICKER_BORDER'), (function(_this) {
      return function(hex) {
        return radio('shared.set.cellcolor.border').broadcast(hex);
      };
    })(this));
  };

  Generator.prototype._disableColorPicker = function() {
    this._isColorPickerEnabled = false;
    return DOM.elemById('GENERATOR', 'COLORPICKER_CONTAINER').innerHTML = "";
  };

  Generator.prototype._setupRuleDropdown = function() {
    var dropdownElem, i, optionsHTML, rule;
    dropdownElem = DOM.elemById('GENERATOR', 'RULE_DROPDOWN');
    optionsHTML = "";
    for (rule = i = 0; i <= 255; rule = ++i) {
      optionsHTML += "<option value='" + rule + "'>" + rule + "</option>";
    }
    dropdownElem.innerHTML = optionsHTML;
    radio('shared.get.currentruledecimal').broadcast(function(currentRule) {
      return dropdownElem.value = currentRule;
    });
    dropdownElem.addEventListener('change', (function(_this) {
      return function(event) {
        return radio('shared.set.currentruledecimal').broadcast(event.target.value);
      };
    })(this));
    return DOM.elemById('GENERATOR', 'RULE_GENERATE_BUTTON').addEventListener('click', (function(_this) {
      return function() {
        return _this._buildBoard();
      };
    })(this));
  };

  Generator.prototype._buildBoard = function() {
    var binary, cellBoardHtml;
    cellBoardHtml = DOM.elemById('GENERATOR', 'TEMPLATE_BOARD').innerHTML;
    DOM.elemById('GENERATOR', 'CONTENT_CONTAINER').innerHTML = Mustache.render(cellBoardHtml, {});
    this._rulesContainerElem = DOM.elemById('GENERATOR', 'RULE_PREVIEW_CONTAINER');
    binary = [];
    radio('shared.get.toprowbinary').broadcast(function(currentRule) {
      return binary = currentRule;
    });
    this._Board.buildBoard(binary, this._noBoardColumns, this._noBoardRows);
    this._buildRulePreview();
    return true;
  };

  Generator.prototype._buildRulePreview = function() {
    var activeClass, binary, currentRule, i, index, jTmpCell, jTmpDigit, left, leftBit, middleBit, previewCellHtml, rendered, results, rightBit, tmplOptions;
    currentRule = "";
    radio('rulematcher.get.rulebinarysting').broadcast((function(_this) {
      return function(binaryString) {
        return currentRule = binaryString;
      };
    })(this));
    previewCellHtml = DOM.elemById('GENERATOR', 'TEMPLATE_RULE_PREVIEW_CELL').innerHTML;
    activeClass = this._rulesContainerElem.innerHTML = "";
    results = [];
    for (index = i = 7; i >= 0; index = --i) {
      binary = index.toString(2);
      if (binary.length === 2) {
        binary = "0" + binary;
      } else if (binary.length === 1) {
        binary = "00" + binary;
      }
      leftBit = false;
      middleBit = false;
      rightBit = false;
      if (binary.charAt(0) === "1") {
        leftBit = true;
      }
      if (binary.charAt(1) === "1") {
        middleBit = true;
      }
      if (binary.charAt(2) === "1") {
        rightBit = true;
      }
      left = (7 - index) * this._previewBoxWidth;
      tmplOptions = {
        left: left,
        previewIndex: index,
        leftBitActive: leftBit,
        middleBitActive: middleBit,
        rightBitActive: rightBit
      };
      rendered = Mustache.render(previewCellHtml, tmplOptions);
      this._rulesContainerElem.innerHTML += rendered;
      jTmpCell = DOM.elemByPrefix('GENERATOR', 'RULE_PREVIEW_CELL', index);
      jTmpDigit = DOM.elemByPrefix('GENERATOR', 'RULE_PREVIEW_DIGIT', index);
      jTmpCell.classList.remove(DOM.getClass('GENERATOR', 'RULE_PREVIEW_CELL_ACTIVE'));
      jTmpDigit.innerHTML = "0";
      if (currentRule.substr(7 - index, 1) === "1") {
        jTmpCell.classList.add(DOM.getClass('GENERATOR', 'RULE_PREVIEW_CELL_ACTIVE'));
        results.push(jTmpDigit.innerHTML = "1");
      } else {
        results.push(void 0);
      }
    }
    return results;
  };

  return Generator;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2VuZXJhdG9yLmpzIiwic291cmNlcyI6WyJHZW5lcmF0b3IuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUE7O0FBaUJNO0VBT1UsbUJBQUMsR0FBRDtJQUNSLElBQUMsQ0FBQSxHQUFELEdBQU87SUFFUCxJQUFDLENBQUEsWUFBRCxHQUFnQjtJQUNoQixJQUFDLENBQUEsZ0JBQUQsR0FBb0I7SUFDcEIsSUFBQyxDQUFBLGVBQUQsR0FBbUI7SUFDbkIsSUFBQyxDQUFBLFlBQUQsR0FBZ0I7SUFFaEIsSUFBQyxDQUFBLHFCQUFELEdBQXlCO0lBRXpCLElBQUMsQ0FBQSxTQUFELEdBQWE7SUFFYixJQUFDLENBQUEsR0FBRyxDQUFDLFNBQUwsQ0FBZSxlQUFmLEVBQ0ksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO1FBQ0ksS0FBQyxDQUFBLEdBQUQsQ0FBQTtNQURKO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQURKO0VBWlE7O3NCQXFCWixHQUFBLEdBQUksU0FBQTtBQUNBLFFBQUE7SUFBQSxxQkFBQSxHQUF3QixHQUFHLENBQUMsUUFBSixDQUFhLFdBQWIsRUFBMEIseUJBQTFCLENBQW9ELENBQUM7SUFDN0UsYUFBQSxHQUFnQixHQUFHLENBQUMsUUFBSixDQUFhLE9BQWIsRUFBc0IsZ0JBQXRCO0lBQ2hCLGFBQWEsQ0FBQyxTQUFkLEdBQTBCLFFBQVEsQ0FBQyxNQUFULENBQWdCLHFCQUFoQixFQUFzQyxFQUF0QztJQUcxQixJQUFDLENBQUEsTUFBRCxHQUFjLElBQUEsS0FBQSxDQUFBO0lBRWQsSUFBQyxDQUFBLGtCQUFELENBQUE7SUFHQSxHQUFHLENBQUMsUUFBSixDQUFhLFdBQWIsRUFBeUIsb0JBQXpCLENBQThDLENBQUMsZ0JBQS9DLENBQWdFLE9BQWhFLEVBQ0ksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO1FBQ0ksSUFBRyxLQUFDLENBQUEscUJBQUo7aUJBQ0ksS0FBQyxDQUFBLG1C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TUFBTSxDQUFDLE1BQVAsQ0FBYyxDQUFkLENBQUEsS0FBb0IsR0FBdkI7UUFDSSxRQUFBLEdBQVcsS0FEZjs7TUFHQSxJQUFBLEdBQU8sQ0FBQyxDQUFBLEdBQUUsS0FBSCxDQUFBLEdBQVUsSUFBQyxDQUFBO01BR2xCLFdBQUEsR0FBYztRQUNWLElBQUEsRUFBSyxJQURLO1FBRVYsWUFBQSxFQUFhLEtBRkg7UUFHVixhQUFBLEVBQWMsT0FISjtRQUlWLGVBQUEsRUFBZ0IsU0FKTjtRQUtWLGNBQUEsRUFBZSxRQUxMOztNQVFkLFFBQUEsR0FBVyxRQUFRLENBQUMsTUFBVCxDQUFnQixlQUFoQixFQUFpQyxXQUFqQztNQUNYLElBQUMsQ0FBQSxtQkFBbUIsQ0FBQyxTQUFyQixJQUFrQztNQUVsQyxRQUFBLEdBQVcsR0FBRyxDQUFDLFlBQUosQ0FBaUIsV0FBakIsRUFBOEIsbUJBQTlCLEVBQWtELEtBQWxEO01BQ1gsU0FBQSxHQUFZLEdBQUcsQ0FBQyxZQUFKLENBQWlCLFdBQWpCLEVBQThCLG9CQUE5QixFQUFtRCxLQUFuRDtNQUVaLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBbkIsQ0FBMEIsR0FBRyxDQUFDLFFBQUosQ0FBYSxXQUFiLEVBQTBCLDBCQUExQixDQUExQjtNQUNBLFNBQVMsQ0FBQyxTQUFWLEdBQXNCO01BQ3RCLElBQUcsV0FBVyxDQUFDLE1BQVosQ0FBbUIsQ0FBQSxHQUFFLEtBQXJCLEVBQTJCLENBQTNCLENBQUEsS0FBaUMsR0FBcEM7UUFDSSxRQUFRLENBQUMsU0FBUyxDQUFDLEdBQW5CLENBQXVCLEdBQUcsQ0FBQyxRQUFKLENBQWEsV0FBYixFQUEwQiwwQkFBMUIsQ0FBdkI7cUJBQ0EsU0FBUyxDQUFDLFNBQVYsR0FBc0IsS0FGMUI7T0FBQSxNQUFBOzZCQUFBOztBQTNDSjs7RUFaZSIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuXG5UaGUgR2VuZXJhdG9yIGZvciB0aGUgQ2VsbHVsYXIgQXV0b21hdGEgR0VOZXJhdG9yIChDQUdFTikuXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vY2FnZW5cbkBsaWNlbnNlIE1JVFxuXG5Db21wb25lbnQgb2YgQ2VsbHVsYXIgQXV0b21hdGEgR2VuZXJhdG9yIChDQUdFTilcblxuRnVuY3Rpb25hbGl0eSBmb3IgYnVpbGRpbmcgdGhlIGdlbmVyYXRvciBmb3JcbmNvbnRyb2xsaW5nIHRoZSBjZWxsdWxhciBhdXRvbWF0YSBnZW5lcmF0aW9uLlxuXG4tIERpc3BsYXkgYSBwcmV2aWV3IG9mIHRoZSBydWxlcy5cbi0gRGlzcGxheSB0aGUgZ2VuZXJhdGVkIGJvYXJkLlxuXG4jIyNcbmNsYXNzIEdlbmVyYXRvclxuXG4gICAgI1xuICAgICMgR2VuZXJhdG9yIENvbnN0cnVjdG9yXG4gICAgIyBJbml0aWFsaXplIHRoZSBJRHMsIGxvY2FsIGpRdWVyeSBvYmplY3RzLCBhbmQgc2l6ZXNcbiAgICAjIGZvciB0aGUgR2VuZXJhdG9yLlxuICAgICMgXG4gICAgY29uc3RydWN0b3I6KEJVUykgLT5cbiAgICAgICAgQEJVUyA9IEJVU1xuICAgICAgICBcbiAgICAgICAgQF9jdXJyZW50UnVsZSA9IDBcbiAgICAgICAgQF9wcmV2aWV3Qm94V2lkdGggPSA0MFxuICAgICAgICBAX25vQm9hcmRDb2x1bW5zID0gMTUxXG4gICAgICAgIEBfbm9Cb2FyZFJvd3MgPSA3NVxuXG4gICAgICAgIEBfaXNDb2xvclBpY2tlckVuYWJsZWQgPSBmYWxzZVxuXG4gICAgICAgIEBfcnVsZUxpc3QgPSBbXVxuXG4gICAgICAgIEBCVVMuc3Vic2NyaWJlKCdnZW5lcmF0b3IucnVuJyxcbiAgICAgICAgICAgICgpPT5cbiAgICAgICAgICAgICAgICBAcnVuKClcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgKVxuXG4gICAgI1xuICAgICMgU2hvdyB0aGUgR2VuZXJhdG9yXG4gICAgIyBcbiAgICBydW46KCkgLT5cbiAgICAgICAgZ2VuZXJhdG9yVGVtcGxhdGVIVE1MID0gRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCAnVEVNUExBVEVfTUFJTl9DT05UQUlORVInKS5pbm5lckhUTUxcbiAgICAgICAgY2FnZW5NYWluRWxlbSA9IERPTS5lbGVtQnlJZCgnQ0FHRU4nLCAnTUFJTl9DT05UQUlORVInKVxuICAgICAgICBjYWdlbk1haW5FbGVtLmlubmVySFRNTCA9IE11c3RhY2hlLnJlbmRlcihnZW5lcmF0b3JUZW1wbGF0ZUhUTUwse30pXG5cbiAgICAgICAgIyBCdWlsZCBhIG5ldyBCb2FyZFxuICAgICAgICBAX0JvYXJkID0gbmV3IEJvYXJkKClcbiAgICAgICAgXG4gICAgICAgIEBfc2V0dXBSdWxlRHJvcGRvd24oKVxuXG5cbiAgICAgICAgRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCdDT0xPUlBJQ0tFUl9CVVRUT04nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXG4gICAgICAgICAgICAoKT0+XG4gICAgICAgICAgICAgICAgaWYgQF9pc0NvbG9yUGlja2VyRW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICBAX2Rpc2FibGVDb2xvclBpY2tlcigpXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBAX2VuYWJsZUNvbG9yUGlja2VyKClcbiAgICAgICAgKVxuXG4gICAgICAgICMgRmluYWwgc3RlcCBpcyB0byBidWlsZCB0aGUgYm9hcmRcbiAgICAgICAgQF9idWlsZEJvYXJkKClcblxuICAgICAgICByZXR1cm4gdHJ1ZVxuXG5cbiAgICBfZW5hYmxlQ29sb3JQaWNrZXI6KCkgLT5cbiAgICAgICAgY29sb3JwaWNrZXJUZW1wbGF0ZUhUTUwgPSBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsICdURU1QTEFURV9DT0xPUlBJQ0tFUicpLmlubmVySFRNTFxuICAgICAgICBjb2xvclBpY2tlckVsZW0gPSBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsICdDT0xPUlBJQ0tFUl9DT05UQUlORVInKVxuICAgICAgICBjb2xvclBpY2tlckVsZW0uaW5uZXJIVE1MID0gTXVzdGFjaGUucmVuZGVyKGNvbG9ycGlja2VyVGVtcGxhdGVIVE1MLHt9KVxuXG4gICAgICAgIEBfaXNDb2xvclBpY2tlckVuYWJsZWQgPSB0cnVlXG4gICAgICAgIENvbG9yUGlja2VyKERPTS5lbGVtQnlJZCgnR0VORVJBVE9SJywnQ09MT1JQSUNLRVJfQ0VMTCcpLCBcbiAgICAgICAgICAgIChoZXgpPT5cbiAgICAgICAgICAgICAgICByYWRpbygnc2hhcmVkLnNldC5jZWxsY29sb3IuYWN0aXZlYmFja2dyb3VuZCcpLmJyb2FkY2FzdChoZXgpXG4gICAgICAgIClcbiAgICAgICAgQ29sb3JQaWNrZXIoRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCdDT0xPUlBJQ0tFUl9CT1JERVInKSwgXG4gICAgICAgICAgICAoaGV4KT0+XG4gICAgICAgICAgICAgICAgcmFkaW8oJ3NoYXJlZC5zZXQuY2VsbGNvbG9yLmJvcmRlcicpLmJyb2FkY2FzdChoZXgpXG4gICAgICAgIClcblxuICAgIF9kaXNhYmxlQ29sb3JQaWNrZXI6KCkgLT5cbiAgICAgICAgQF9pc0NvbG9yUGlja2VyRW5hYmxlZCA9IGZhbHNlXG4gICAgICAgIERPTS5lbGVtQnlJZCgnR0VORVJBVE9SJywnQ09MT1JQSUNLRVJfQ09OVEFJTkVSJykuaW5uZXJIVE1MID0gXCJcIlxuXG4gICAgI1xuICAgICMgU2V0dXAgdGhlIHJ1bGUgc2VsZWN0b3IgZHJvcGRvd25cbiAgICAjXG4gICAgX3NldHVwUnVsZURyb3Bkb3duOigpIC0+XG4gICAgICAgIGRyb3Bkb3duRWxlbSA9IERPTS5lbGVtQnlJZCgnR0VORVJBVE9SJywnUlVMRV9EUk9QRE9XTicpXG4gICAgICAgIFxuICAgICAgICAjIEdlbmVyYXRlIHRoZSBydWxlIGRyb3Bkb3duIG9wdGlvbnNcbiAgICAgICAgb3B0aW9uc0hUTUwgPSBcIlwiXG4gICAgICAgIGZvciBydWxlIGluIFswLi4yNTVdXG4gICAgICAgICAgICBvcHRpb25zSFRNTCArPSBcIjxvcHRpb24gdmFsdWU9JyN7cnVsZX0nPiN7cnVsZX08L29wdGlvbj5cIlxuICAgICAgICAgICAgXG4gICAgICAgIGRyb3Bkb3duRWxlbS5pbm5lckhUTUwgPSBvcHRpb25zSFRNTFxuXG4gICAgICAgICMgQ2hhbmdlIHRoZSBjdXJyZW50IHJ1bGUgZnJvbSB0aGUgZHJvcGRvd25cbiAgICAgICAgcmFkaW8oJ3NoYXJlZC5nZXQuY3VycmVudHJ1bGVkZWNpbWFsJykuYnJvYWRjYXN0KFxuICAgICAgICAgICAgKGN1cnJlbnRSdWxlKS0+XG4gICAgICAgICAgICAgICAgZHJvcGRvd25FbGVtLnZhbHVlID0gY3VycmVudFJ1bGVcbiAgICAgICAgKVxuXG4gICAgICAgICMgU2V0dXAgdGhlIGNoYW5nZSBydWxlIGV2ZW50XG4gICAgICAgIGRyb3Bkb3duRWxlbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBcbiAgICAgICAgICAgIChldmVudCk9PlxuICAgICAgICAgICAgICAgIHJhZGlvKCdzaGFyZWQuc2V0LmN1cnJlbnRydWxlZGVjaW1hbCcpLmJyb2FkY2FzdChldmVudC50YXJnZXQudmFsdWUpXG4gICAgICAgIClcblxuICAgICAgICAjIFNldHVwIHRoZSBHZW5lcmF0ZSBidXR0b24gY2xpY2sgZXZlbnRcbiAgICAgICAgRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCAnUlVMRV9HRU5FUkFURV9CVVRUT04nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXG4gICAgICAgICAgICAoKT0+QF9idWlsZEJvYXJkKClcbiAgICAgICAgKVxuXG4gICAgI1xuICAgICMgQnVpbGQgdGhlIHByZXZpZXcgYm9hcmQgZnJvbSB0aGUgdGVtcGxhdGVcbiAgICAjIFxuICAgIF9idWlsZEJvYXJkOigpIC0+XG4gICAgICAgIGNlbGxCb2FyZEh0bWwgPSBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsJ1RFTVBMQVRFX0JPQVJEJykuaW5uZXJIVE1MXG4gICAgICAgIFxuICAgICAgICBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsJ0NPTlRFTlRfQ09OVEFJTkVSJykuaW5uZXJIVE1MID0gTXVzdGFjaGUucmVuZGVyKGNlbGxCb2FyZEh0bWwse30pXG5cbiAgICAgICAgQF9ydWxlc0NvbnRhaW5lckVsZW0gPSBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsJ1JVTEVfUFJFVklFV19DT05UQUlORVInKVxuICAgICAgICBcbiAgICAgICAgYmluYXJ5ID0gW11cbiAgICAgICAgcmFkaW8oJ3NoYXJlZC5nZXQudG9wcm93YmluYXJ5JykuYnJvYWRjYXN0KFxuICAgICAgICAgICAgKGN1cnJlbnRSdWxlKS0+XG4gICAgICAgICAgICAgICAgYmluYXJ5ID0gY3VycmVudFJ1bGVcbiAgICAgICAgKVxuXG4gICAgICAgIEBfQm9hcmQuYnVpbGRCb2FyZChiaW5hcnksIEBfbm9Cb2FyZENvbHVtbnMsIEBfbm9Cb2FyZFJvd3MpXG4gICAgICAgIEBfYnVpbGRSdWxlUHJldmlldygpXG4gICAgICAgIHJldHVybiB0cnVlXG5cbiAgICAjXG4gICAgIyBCdWlsZCB0aGUgUnVsZSBQcmV2aWV3XG4gICAgIyBcbiAgICBfYnVpbGRSdWxlUHJldmlldzogLT5cbiAgICAgICAgY3VycmVudFJ1bGUgPSBcIlwiXG4gICAgICAgIHJhZGlvKCdydWxlbWF0Y2hlci5nZXQucnVsZWJpbmFyeXN0aW5nJykuYnJvYWRjYXN0KFxuICAgICAgICAgICAgKGJpbmFyeVN0cmluZyk9PlxuICAgICAgICAgICAgICAgIGN1cnJlbnRSdWxlID0gYmluYXJ5U3RyaW5nXG4gICAgICAgIClcblxuICAgICAgICAjIFVzZSB0aGUgdGVtcGxhdGUgdG8gZ2VuZXJhdGUgdGhlIHByZXZpZXdcbiAgICAgICAgcHJldmlld0NlbGxIdG1sID0gRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCdURU1QTEFURV9SVUxFX1BSRVZJRVdfQ0VMTCcpLmlubmVySFRNTFxuXG4gICAgICAgIGFjdGl2ZUNsYXNzID0gXG4gICAgICAgIEBfcnVsZXNDb250YWluZXJFbGVtLmlubmVySFRNTCA9IFwiXCJcbiAgICAgICAgZm9yIGluZGV4IGluIFs3Li4wXVxuICAgICAgICAgICAgIyBHZXQgdGhlIGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgaW5kZXhcbiAgICAgICAgICAgIGJpbmFyeSA9IGluZGV4LnRvU3RyaW5nKDIpXG5cbiAgICAgICAgICAgICMgUGFkIHRoZSBiaW5hcnkgdG8gMyBiaXRzXG4gICAgICAgICAgICBpZiBiaW5hcnkubGVuZ3RoIGlzIDJcbiAgICAgICAgICAgICAgICBiaW5hcnkgPSBcIjAje2JpbmFyeX1cIlxuICAgICAgICAgICAgZWxzZSBpZiBiaW5hcnkubGVuZ3RoIGlzIDFcbiAgICAgICAgICAgICAgICBiaW5hcnkgPSBcIjAwI3tiaW5hcnl9XCJcblxuICAgICAgICAgICAgIyBDb252ZXJ0IHRoZSBiaW5hcnkgdG8gdXNhYmxlIGJvb2xlYW4gdmFsdWVzIGZvciB0ZW1wbGF0ZVxuICAgICAgICAgICAgbGVmdEJpdCA9IGZhbHNlXG4gICAgICAgICAgICBtaWRkbGVCaXQgPSBmYWxzZVxuICAgICAgICAgICAgcmlnaHRCaXQgPSBmYWxzZVxuXG4gICAgICAgICAgICBpZiBiaW5hcnkuY2hhckF0KDApIGlzIFwiMVwiXG4gICAgICAgICAgICAgICAgbGVmdEJpdCA9IHRydWVcblxuICAgICAgICAgICAgaWYgYmluYXJ5LmNoYXJBdCgxKSBpcyBcIjFcIlxuICAgICAgICAgICAgICAgIG1pZGRsZUJpdCA9IHRydWVcblxuICAgICAgICAgICAgaWYgYmluYXJ5LmNoYXJBdCgyKSBpcyBcIjFcIlxuICAgICAgICAgICAgICAgIHJpZ2h0Qml0ID0gdHJ1ZVxuXG4gICAgICAgICAgICBsZWZ0ID0gKDctaW5kZXgpKkBfcHJldmlld0JveFdpZHRoXG5cbiAgICAgICAgICAgICMgVGhlIHRlbXBsYXRlIG9wdGlvbnMgZm9yIE11c3RhY2hlIHRvIHJlbmRlclxuICAgICAgICAgICAgdG1wbE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbGVmdDpsZWZ0LFxuICAgICAgICAgICAgICAgIHByZXZpZXdJbmRleDppbmRleCxcbiAgICAgICAgICAgICAgICBsZWZ0Qml0QWN0aXZlOmxlZnRCaXQsXG4gICAgICAgICAgICAgICAgbWlkZGxlQml0QWN0aXZlOm1pZGRsZUJpdCxcbiAgICAgICAgICAgICAgICByaWdodEJpdEFjdGl2ZTpyaWdodEJpdFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZW5kZXJlZCA9IE11c3RhY2hlLnJlbmRlcihwcmV2aWV3Q2VsbEh0bWwsIHRtcGxPcHRpb25zKVxuICAgICAgICAgICAgQF9ydWxlc0NvbnRhaW5lckVsZW0uaW5uZXJIVE1MICs9IHJlbmRlcmVkXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGpUbXBDZWxsID0gRE9NLmVsZW1CeVByZWZpeCgnR0VORVJBVE9SJywgJ1JVTEVfUFJFVklFV19DRUxMJyxpbmRleClcbiAgICAgICAgICAgIGpUbXBEaWdpdCA9IERPTS5lbGVtQnlQcmVmaXgoJ0dFTkVSQVRPUicsICdSVUxFX1BSRVZJRVdfRElHSVQnLGluZGV4KVxuXG4gICAgICAgICAgICBqVG1wQ2VsbC5jbGFzc0xpc3QucmVtb3ZlKERPTS5nZXRDbGFzcygnR0VORVJBVE9SJywgJ1JVTEVfUFJFVklFV19DRUxMX0FDVElWRScpKVxuICAgICAgICAgICAgalRtcERpZ2l0LmlubmVySFRNTCA9IFwiMFwiXG4gICAgICAgICAgICBpZiBjdXJyZW50UnVsZS5zdWJzdHIoNy1pbmRleCwxKSBpcyBcIjFcIlxuICAgICAgICAgICAgICAgIGpUbXBDZWxsLmNsYXNzTGlzdC5hZGQoRE9NLmdldENsYXNzKCdHRU5FUkFUT1InLCAnUlVMRV9QUkVWSUVXX0NFTExfQUNUSVZFJykpXG4gICAgICAgICAgICAgICAgalRtcERpZ2l0LmlubmVySFRNTCA9IFwiMVwiXG4iXX0=


/*
RuleMatcher.coffee

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Component of Cellular Automata Generator (CAGEN)

The rule is a binary string. Each 1 in the binary string
represents a rule to-be-followed in the next row of
generated blocks.

There are 255 rules of 8 block positions.

Rule 0 Example:
111 110 101 100 011 010 001 000
 0   0   0   0   0   0   0   0

Rule 20 Example:
111 110 101 100 011 010 001 000
 0   0   1   0   1   0   0   0

Rule 255 Example:
111 110 101 100 011 010 001 000
 1   1   1   1   1   1   1   1

The position of filled cells on the top row determines
the composition of the next row and so on.
 */
var RuleMatcher;

RuleMatcher = (function() {
  function RuleMatcher() {
    this._binaryRule = "";
    this._patterns = ['111', '110', '101', '100', '011', '010', '001', '000'];
    radio('rulematcher.get.rulebinarysting').subscribe((function(_this) {
      return function(callback) {
        return callback(_this._binaryRule);
      };
    })(this));
  }

  RuleMatcher.prototype.setCurrentRule = function(decimalRule) {
    return this._binaryRule = this._decToBinary(decimalRule);
  };

  RuleMatcher.prototype.match = function(zeroIndex, oneIndex, twoIndex) {
    var foundPatternIndex, patternToFind;
    patternToFind = "" + zeroIndex + oneIndex + twoIndex;
    foundPatternIndex = this._patterns.indexOf(patternToFind);
    return parseInt(this._binaryRule.substr(foundPatternIndex, 1));
  };

  RuleMatcher.prototype._decToBinary = function(decValue) {
    var binary, i, length, num, ref;
    binary = (parseInt(decValue)).toString(2);
    length = binary.length;
    if (length < 8) {
      for (num = i = ref = length; ref <= 7 ? i <= 7 : i >= 7; num = ref <= 7 ? ++i : --i) {
        binary = "0" + binary;
      }
    }
    return binary;
  };

  return RuleMatcher;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUnVsZU1hdGNoZXIuanMiLCJzb3VyY2VzIjpbIlJ1bGVNYXRjaGVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUE7O0FBZ0NNO0VBTVcscUJBQUE7SUFDVCxJQUFDLENBQUEsV0FBRCxHQUFlO0lBQ2YsSUFBQyxDQUFBLFNBQUQsR0FBYSxDQUNULEtBRFMsRUFFVCxLQUZTLEVBR1QsS0FIUyxFQUlULEtBSlMsRUFLVCxLQUxTLEVBTVQsS0FOUyxFQU9ULEtBUFMsRUFRVCxLQVJTO0lBV2IsS0FBQSxDQUFNLGlDQUFOLENBQXdDLENBQUMsU0FBekMsQ0FDSSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUMsUUFBRDtlQUNJLFFBQUEsQ0FBUyxLQUFDLENBQUEsV0FBVjtNQURKO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQURKO0VBYlM7O3dCQXFCYixjQUFBLEdBQWdCLFNBQUMsV0FBRDtXQUlaLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBQyxDQUFBLFlBQUQsQ0FBYyxXQUFkO0VBSkg7O3dCQVNoQixLQUFBLEdBQU8sU0FBQyxTQUFELEVBQVksUUFBWixFQUFzQixRQUF0QjtBQUVILFFBQUE7SUFBQSxhQUFBLEdBQWdCLEVBQUEsR0FBRyxTQUFILEdBQWUsUUFBZixHQUEwQjtJQUUxQyxpQkFBQSxHQUFvQixJQUFDLENBQUEsU0FBUyxDQUFDLE9BQVgsQ0FBbUIsYUFBbkI7QUFHcEIsV0FBTyxRQUFBLENBQVMsSUFBQyxDQUFBLFdBQVcsQ0FBQyxNQUFiLENBQW9CLGlCQUFwQixFQUFzQyxDQUF0QyxDQUFUO0VBUEo7O3dCQWNQLFlBQUEsR0FBYyxTQUFDLFFBQUQ7QUFFVixRQUFBO0lBQUEsTUFBQSxHQUFTLENBQUMsUUFBQSxDQUFTLFFBQVQsQ0FBRCxDQUFvQixDQUFDLFFBQXJCLENBQThCLENBQTlCO0lBQ1QsTUFBQSxHQUFTLE1BQU0sQ0FBQztJQUVoQixJQUFHLE1BQUEsR0FBUyxDQUFaO0FBRUksV0FBVyw4RUFBWDtRQUNJLE1BQUEsR0FBUyxHQUFBLEdBQUk7QUFEakIsT0FGSjs7QUFLQSxXQUFPO0VBVkciLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcblJ1bGVNYXRjaGVyLmNvZmZlZVxuXG5AYXV0aG9yIERlc3RpbiBNb3VsdG9uXG5AZ2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9kZXN0aW5tb3VsdG9uL2NhZ2VuXG5AbGljZW5zZSBNSVRcblxuQ29tcG9uZW50IG9mIENlbGx1bGFyIEF1dG9tYXRhIEdlbmVyYXRvciAoQ0FHRU4pXG5cblRoZSBydWxlIGlzIGEgYmluYXJ5IHN0cmluZy4gRWFjaCAxIGluIHRoZSBiaW5hcnkgc3RyaW5nXG5yZXByZXNlbnRzIGEgcnVsZSB0by1iZS1mb2xsb3dlZCBpbiB0aGUgbmV4dCByb3cgb2ZcbmdlbmVyYXRlZCBibG9ja3MuXG5cblRoZXJlIGFyZSAyNTUgcnVsZXMgb2YgOCBibG9jayBwb3NpdGlvbnMuXG5cblJ1bGUgMCBFeGFtcGxlOlxuMTExIDExMCAxMDEgMTAwIDAxMSAwMTAgMDAxIDAwMFxuIDAgICAwICAgMCAgIDAgICAwICAgMCAgIDAgICAwXG5cblJ1bGUgMjAgRXhhbXBsZTpcbjExMSAxMTAgMTAxIDEwMCAwMTEgMDEwIDAwMSAwMDBcbiAwICAgMCAgIDEgICAwICAgMSAgIDAgICAwICAgMFxuXG5SdWxlIDI1NSBFeGFtcGxlOlxuMTExIDExMCAxMDEgMTAwIDAxMSAwMTAgMDAxIDAwMFxuIDEgICAxICAgMSAgIDEgICAxICAgMSAgIDEgICAxXG5cblRoZSBwb3NpdGlvbiBvZiBmaWxsZWQgY2VsbHMgb24gdGhlIHRvcCByb3cgZGV0ZXJtaW5lc1xudGhlIGNvbXBvc2l0aW9uIG9mIHRoZSBuZXh0IHJvdyBhbmQgc28gb24uXG5cbiMjI1xuXG5jbGFzcyBSdWxlTWF0Y2hlclxuICAgIFxuICAgICNcbiAgICAjIFNldHVwIHRoZSBsb2NhbCB2YXJpYWJsZXNcbiAgICAjIEBjb25zdHJ1Y3RvclxuICAgICMgXG4gICAgY29uc3RydWN0b3I6ICgpLT5cbiAgICAgICAgQF9iaW5hcnlSdWxlID0gXCJcIlxuICAgICAgICBAX3BhdHRlcm5zID0gW1xuICAgICAgICAgICAgJzExMScsXG4gICAgICAgICAgICAnMTEwJyxcbiAgICAgICAgICAgICcxMDEnLFxuICAgICAgICAgICAgJzEwMCcsXG4gICAgICAgICAgICAnMDExJyxcbiAgICAgICAgICAgICcwMTAnLFxuICAgICAgICAgICAgJzAwMScsXG4gICAgICAgICAgICAnMDAwJ1xuICAgICAgICBdXG5cbiAgICAgICAgcmFkaW8oJ3J1bGVtYXRjaGVyLmdldC5ydWxlYmluYXJ5c3RpbmcnKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoY2FsbGJhY2spPT5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhAX2JpbmFyeVJ1bGUpXG4gICAgICAgIClcblxuICAgICNcbiAgICAjIFNldCB0aGUgY3VycmVudCBydWxlIGZyb20gYSBkZWNpbWFsIHZhbHVlXG4gICAgIyBcbiAgICBzZXRDdXJyZW50UnVsZTogKGRlY2ltYWxSdWxlKS0+XG4gICAgICAgICMgVGhlIGJpbmFyeSBydWxlIGNvbnRhaW5zIHRoZSBzZXF1ZW5jZSBvZlxuICAgICAgICAjIDAncyAobm8gYmxvY2spIGFuZCAxJ3MgKGJsb2NrKSBmb3IgdGhlXG4gICAgICAgICMgbmV4dCByb3cuXG4gICAgICAgIEBfYmluYXJ5UnVsZSA9IEBfZGVjVG9CaW5hcnkoZGVjaW1hbFJ1bGUpXG5cbiAgICAjXG4gICAgIyBNYXRjaCBhIHBhdHRlcm4gZm9yIHRoZSB0aHJlZSBiaXQgcG9zaXRpb25zXG4gICAgIyBcbiAgICBtYXRjaDogKHplcm9JbmRleCwgb25lSW5kZXgsIHR3b0luZGV4KS0+XG4gICAgICAgICMgTWF0Y2ggdGhyZWUgY2VsbHMgd2l0aGluXG4gICAgICAgIHBhdHRlcm5Ub0ZpbmQgPSBcIiN7emVyb0luZGV4fSN7b25lSW5kZXh9I3t0d29JbmRleH1cIlxuXG4gICAgICAgIGZvdW5kUGF0dGVybkluZGV4ID0gQF9wYXR0ZXJucy5pbmRleE9mKHBhdHRlcm5Ub0ZpbmQpXG5cbiAgICAgICAgIyBSZXR1cm4gdGhlIGJpbmFyeSBydWxlJ3MgMCBvciAxIG1hcHBpbmdcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KEBfYmluYXJ5UnVsZS5zdWJzdHIoZm91bmRQYXR0ZXJuSW5kZXgsMSkpXG5cbiAgICAjXG4gICAgIyBDb252ZXJ0IGEgZGVjaW1hbCB2YWx1ZSB0byBpdHMgYmluYXJ5IHJlcHJlc2VudGF0aW9uXG4gICAgI1xuICAgICMgQHJldHVybiBzdHJpbmcgQmluYXJ5IHJ1bGVcbiAgICAjIFxuICAgIF9kZWNUb0JpbmFyeTogKGRlY1ZhbHVlKS0+XG4gICAgICAgICMgR2VuZXJhdGUgdGhlIGJpbmFyeSBzdHJpbmcgZnJvbSB0aGUgZGVjaW1hbFxuICAgICAgICBiaW5hcnkgPSAocGFyc2VJbnQoZGVjVmFsdWUpKS50b1N0cmluZygyKVxuICAgICAgICBsZW5ndGggPSBiaW5hcnkubGVuZ3RoXG5cbiAgICAgICAgaWYgbGVuZ3RoIDwgOFxuICAgICAgICAgICAgIyBQYWQgdGhlIGJpbmFyeSByZXByZXNlbmF0aW9uIHdpdGggbGVhZGluZyAwJ3NcbiAgICAgICAgICAgIGZvciBudW0gaW4gW2xlbmd0aC4uN11cbiAgICAgICAgICAgICAgICBiaW5hcnkgPSBcIjAje2JpbmFyeX1cIlxuICAgICAgICAgICAgICAgIFxuICAgICAgICByZXR1cm4gYmluYXJ5XG4iXX0=


/*

Generate the Rule Thumbnails for CAGEN and the event
handler for when a rule thumbnail is clicked.

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Component of Cellular Automata GENerator (CAGEN)


Each rule has a thumbnail. The user can click the thumbnail
to generate the Automata for that rule.
 */
var Thumbnails;

Thumbnails = (function() {
  function Thumbnails(BUS) {
    this.BUS = BUS;
    this.BUS.subscribe('thumbnails.run', (function(_this) {
      return function() {
        _this.run();
      };
    })(this));
  }

  Thumbnails.prototype.run = function() {
    var i, j, k, ref, rendered, results, results1, ruleList, thumbnailHTML, thumbsElems;
    ruleList = (function() {
      results = [];
      for (j = 0; j <= 255; j++){ results.push(j); }
      return results;
    }).apply(this);
    thumbnailHTML = DOM.elemById('THUMBNAILS', 'TEMPLATE_THUMBNAILS').innerHTML;
    rendered = Mustache.render(thumbnailHTML, {
      ruleList: ruleList
    });
    DOM.elemById('CAGEN', 'MAIN_CONTAINER').innerHTML = rendered;
    thumbsElems = document.querySelectorAll('.' + DOM.getClass('THUMBNAILS', 'THUMB_BOX'));
    results1 = [];
    for (i = k = 0, ref = thumbsElems.length - 1; 0 <= ref ? k <= ref : k >= ref; i = 0 <= ref ? ++k : --k) {
      results1.push(thumbsElems[i].addEventListener('click', (function(_this) {
        return function(event) {
          return _this._ruleThumbClicked(event);
        };
      })(this)));
    }
    return results1;
  };

  Thumbnails.prototype._ruleThumbClicked = function(event) {
    var rule;
    rule = event.target.getAttribute('data-rule');
    radio('shared.set.currentruledecimal').broadcast(rule);
    return this.BUS.broadcast('tabs.show.generator');
  };

  return Thumbnails;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGh1bWJuYWlscy5qcyIsInNvdXJjZXMiOlsiVGh1bWJuYWlscy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBOztBQWlCTTtFQUtXLG9CQUFDLEdBQUQ7SUFDVCxJQUFDLENBQUEsR0FBRCxHQUFPO0lBQ1AsSUFBQyxDQUFBLEdBQUcsQ0FBQyxTQUFMLENBQWUsZ0JBQWYsRUFDSSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7UUFDSSxLQUFDLENBQUEsR0FBRCxDQUFBO01BREo7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBREo7RUFGUzs7dUJBV2IsR0FBQSxHQUFLLFNBQUE7QUFFRCxRQUFBO0lBQUEsUUFBQSxHQUFXOzs7OztJQUdYLGFBQUEsR0FBZ0IsR0FBRyxDQUFDLFFBQUosQ0FBYSxZQUFiLEVBQTJCLHFCQUEzQixDQUFpRCxDQUFDO0lBQ2xFLFFBQUEsR0FBVyxRQUFRLENBQUMsTUFBVCxDQUFnQixhQUFoQixFQUErQjtNQUFDLFFBQUEsRUFBUyxRQUFWO0tBQS9CO0lBRVgsR0FBRyxDQUFDLFFBQUosQ0FBYSxPQUFiLEVBQXNCLGdCQUF0QixDQUF1QyxDQUFDLFNBQXhDLEdBQW9EO0lBRXBELFdBQUEsR0FBYyxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsR0FBQSxHQUFNLEdBQUcsQ0FBQyxRQUFKLENBQWEsWUFBYixFQUEyQixXQUEzQixDQUFoQztBQUVkO1NBQVMsaUdBQVQ7b0JBQ0ksV0FBWSxDQUFBLENBQUEsQ0FBRSxDQUFDLGdCQUFmLENBQWdDLE9BQWhDLEVBQXlDLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQyxLQUFEO2lCQUFTLEtBQUMsQ0FBQSxpQkFBRCxDQUFtQixLQUFuQjtRQUFUO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF6QztBQURKOztFQVpDOzt1QkFtQkwsaUJBQUEsR0FBa0IsU0FBQyxLQUFEO0FBQ2QsUUFBQTtJQUFBLElBQUEsR0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLFlBQWIsQ0FBMEIsV0FBMUI7SUFHUCxLQUFBLENBQU0sK0JBQU4sQ0FBc0MsQ0FBQyxTQUF2QyxDQUFpRCxJQUFqRDtXQUdBLElBQUMsQ0FBQSxHQUFHLENBQUMsU0FBTCxDQUFlLHFCQUFmO0VBUGMiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcblxuR2VuZXJhdGUgdGhlIFJ1bGUgVGh1bWJuYWlscyBmb3IgQ0FHRU4gYW5kIHRoZSBldmVudFxuaGFuZGxlciBmb3Igd2hlbiBhIHJ1bGUgdGh1bWJuYWlsIGlzIGNsaWNrZWQuXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vY2FnZW5cbkBsaWNlbnNlIE1JVFxuXG5Db21wb25lbnQgb2YgQ2VsbHVsYXIgQXV0b21hdGEgR0VOZXJhdG9yIChDQUdFTilcblxuXG5FYWNoIHJ1bGUgaGFzIGEgdGh1bWJuYWlsLiBUaGUgdXNlciBjYW4gY2xpY2sgdGhlIHRodW1ibmFpbFxudG8gZ2VuZXJhdGUgdGhlIEF1dG9tYXRhIGZvciB0aGF0IHJ1bGUuXG5cbiMjI1xuXG5jbGFzcyBUaHVtYm5haWxzXG5cbiAgICAjXG4gICAgIyBTZXR1cCB0aGUgbG9jYWwgdmFyaWFibGVzXG4gICAgIyBcbiAgICBjb25zdHJ1Y3RvcjogKEJVUyktPlxuICAgICAgICBAQlVTID0gQlVTXG4gICAgICAgIEBCVVMuc3Vic2NyaWJlKCd0aHVtYm5haWxzLnJ1bicsXG4gICAgICAgICAgICAoKT0+XG4gICAgICAgICAgICAgICAgQHJ1bigpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIClcblxuICAgICNcbiAgICAjIFNob3cgdGhlIHJ1bGUgdGh1bWJuYWlsc1xuICAgICMgXG4gICAgcnVuOiAoKS0+XG4gICAgICAgICMgU2V0dXAgdGhlIGxpc3Qgb2YgcnVsZXNcbiAgICAgICAgcnVsZUxpc3QgPSBbMC4uMjU1XVxuXG4gICAgICAgICMgQ2xlYXIgdGhlIGN1cnJlbnQgdGh1bWJuYWlscyBhbmQgcG9wdWxhdGUgaXQgdmlhIE11c3RhY2hlIHRlbXBsYXRlXG4gICAgICAgIHRodW1ibmFpbEhUTUwgPSBET00uZWxlbUJ5SWQoJ1RIVU1CTkFJTFMnLCAnVEVNUExBVEVfVEhVTUJOQUlMUycpLmlubmVySFRNTFxuICAgICAgICByZW5kZXJlZCA9IE11c3RhY2hlLnJlbmRlcih0aHVtYm5haWxIVE1MLCB7cnVsZUxpc3Q6cnVsZUxpc3R9KVxuXG4gICAgICAgIERPTS5lbGVtQnlJZCgnQ0FHRU4nLCAnTUFJTl9DT05UQUlORVInKS5pbm5lckhUTUwgPSByZW5kZXJlZFxuXG4gICAgICAgIHRodW1ic0VsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBET00uZ2V0Q2xhc3MoJ1RIVU1CTkFJTFMnLCAnVEhVTUJfQk9YJykpXG4gICAgICAgIFxuICAgICAgICBmb3IgaSBpbiBbMC4udGh1bWJzRWxlbXMubGVuZ3RoIC0gMV1cbiAgICAgICAgICAgIHRodW1ic0VsZW1zW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KT0+QF9ydWxlVGh1bWJDbGlja2VkKGV2ZW50KSlcblxuICAgICNcbiAgICAjIEV2ZW50IGhhbmRsZXIgZm9yIHdoZW4gYSBydWxlIHRodW1ibmFpbCBpcyBjbGlja2VkXG4gICAgIyBTZXRzIHRoZSBydWxlIGFuZCBzd2l0Y2hlcyB0byB0aGUgZ2VuZXJhdG9yXG4gICAgIyBcbiAgICBfcnVsZVRodW1iQ2xpY2tlZDooZXZlbnQpIC0+XG4gICAgICAgIHJ1bGUgPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXJ1bGUnKVxuXG4gICAgICAgICMgQ2hhbmdlIHRoZSBjdXJyZW50IHJ1bGVcbiAgICAgICAgcmFkaW8oJ3NoYXJlZC5zZXQuY3VycmVudHJ1bGVkZWNpbWFsJykuYnJvYWRjYXN0KHJ1bGUpXG5cbiAgICAgICAgIyBMb2FkIHRoZSBnZW5lcmF0b3JcbiAgICAgICAgQEJVUy5icm9hZGNhc3QoJ3RhYnMuc2hvdy5nZW5lcmF0b3InKVxuXG4iXX0=


/*

The tabbed interface handler.

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Component of Cellular Automata GENerator (CAGEN)


Manage the tabs for the various CAGEN features.
 */
var Tabs,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Tabs = (function() {
  function Tabs(BUS) {
    this._runTabModule = bind(this._runTabModule, this);
    this.BUS = BUS;
    this._tabsElems = [];
  }

  Tabs.prototype.start = function() {
    var i, len, ref, results, tab, tabContainerElem, tabsTemplateHTML;
    tabsTemplateHTML = DOM.elemById('TABS', 'TEMPLATE').innerHTML;
    tabContainerElem = DOM.elemById('TABS', 'CONTAINER');
    tabContainerElem.innerHTML = Mustache.render(tabsTemplateHTML, {});
    this._tabsElems = tabContainerElem.querySelectorAll('li');
    ref = this._tabsElems;
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      tab = ref[i];
      results.push((function(_this) {
        return function(tab) {
          var moduleName;
          moduleName = tab.getAttribute("data-tab-module");
          if (tab.className === DOM.getClass('TABS', 'ACTIVE')) {
            _this._runTabModule(moduleName);
          }
          _this.BUS.subscribe('tabs.show.' + moduleName, function() {
            return _this._runTabModule(moduleName);
          });
          return tab.addEventListener('click', function(event) {
            _this.BUS.broadcast('tabs.show.' + moduleName);
          });
        };
      })(this)(tab));
    }
    return results;
  };

  Tabs.prototype._activateTab = function(tabName) {
    var activeClass, i, len, ref, tab;
    activeClass = DOM.getClass('TABS', 'ACTIVE');
    ref = this._tabsElems;
    for (i = 0, len = ref.length; i < len; i++) {
      tab = ref[i];
      tab.classList.remove(activeClass);
    }
    return DOM.elemByPrefix('TABS', 'TAB_PREFIX', tabName).classList.add(activeClass);
  };

  Tabs.prototype._runTabModule = function(tabName) {
    this._activateTab(tabName);
    return this.BUS.broadcast(tabName + '.run');
  };

  return Tabs;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFicy5qcyIsInNvdXJjZXMiOlsiVGFicy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxJQUFBO0VBQUE7O0FBZU07RUFNVyxjQUFDLEdBQUQ7O0lBQ1QsSUFBQyxDQUFBLEdBQUQsR0FBTztJQUNQLElBQUMsQ0FBQSxVQUFELEdBQWM7RUFGTDs7aUJBT2IsS0FBQSxHQUFNLFNBQUE7QUFDRixRQUFBO0lBQUEsZ0JBQUEsR0FBbUIsR0FBRyxDQUFDLFFBQUosQ0FBYSxNQUFiLEVBQXFCLFVBQXJCLENBQWdDLENBQUM7SUFFcEQsZ0JBQUEsR0FBbUIsR0FBRyxDQUFDLFFBQUosQ0FBYSxNQUFiLEVBQW9CLFdBQXBCO0lBQ25CLGdCQUFnQixDQUFDLFNBQWpCLEdBQTZCLFFBQVEsQ0FBQyxNQUFULENBQWdCLGdCQUFoQixFQUFrQyxFQUFsQztJQUM3QixJQUFDLENBQUEsVUFBRCxHQUFjLGdCQUFnQixDQUFDLGdCQUFqQixDQUFrQyxJQUFsQztBQUVkO0FBQUE7U0FBQSxxQ0FBQTs7bUJBQ00sQ0FBQSxTQUFBLEtBQUE7ZUFBQSxTQUFDLEdBQUQ7QUFDRSxjQUFBO1VBQUEsVUFBQSxHQUFhLEdBQUcsQ0FBQyxZQUFKLENBQWlCLGlCQUFqQjtVQUViLElBQUcsR0FBRyxDQUFDLFNBQUosS0FBaUIsR0FBRyxDQUFDLFFBQUosQ0FBYSxNQUFiLEVBQXFCLFFBQXJCLENBQXBCO1lBQ0ksS0FBQyxDQUFBLGFBQUQsQ0FBZSxVQUFmLEVBREo7O1VBR0EsS0FBQyxDQUFBLEdBQUcsQ0FBQyxTQUFMLENBQWUsWUFBQSxHQUFlLFVBQTlCLEVBQ0ksU0FBQTttQkFBSSxLQUFDLENBQUEsYUFBRCxDQUFlLFVBQWY7VUFBSixDQURKO2lCQUlBLEdBQUcsQ0FBQyxnQkFBSixDQUFxQixPQUFyQixFQUNJLFNBQUMsS0FBRDtZQUNJLEtBQUMsQ0FBQSxHQUFHLENBQUMsU0FBTCxDQUFlLFlBQUEsR0FBZSxVQUE5QjtVQURKLENBREo7UUFWRjtNQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBRixDQUFHLEdBQUg7QUFESjs7RUFQRTs7aUJBMEJOLFlBQUEsR0FBYyxTQUFDLE9BQUQ7QUFDVixRQUFBO0lBQUEsV0FBQSxHQUFjLEdBQUcsQ0FBQyxRQUFKLENBQWEsTUFBYixFQUFxQixRQUFyQjtBQUNkO0FBQUEsU0FBQSxxQ0FBQTs7TUFDSSxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQWQsQ0FBcUIsV0FBckI7QUFESjtXQUdBLEdBQUcsQ0FBQyxZQUFKLENBQWlCLE1BQWpCLEVBQXlCLFlBQXpCLEVBQXVDLE9BQXZDLENBQStDLENBQUMsU0FBUyxDQUFDLEdBQTFELENBQThELFdBQTlEO0VBTFU7O2lCQVdkLGFBQUEsR0FBYyxTQUFDLE9BQUQ7SUFFVixJQUFDLENBQUEsWUFBRCxDQUFjLE9BQWQ7V0FHQSxJQUFDLENBQUEsR0FBRyxDQUFDLFNBQUwsQ0FBZSxPQUFBLEdBQVUsTUFBekI7RUFMVSIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuXG5UaGUgdGFiYmVkIGludGVyZmFjZSBoYW5kbGVyLlxuXG5AYXV0aG9yIERlc3RpbiBNb3VsdG9uXG5AZ2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9kZXN0aW5tb3VsdG9uL2NhZ2VuXG5AbGljZW5zZSBNSVRcblxuQ29tcG9uZW50IG9mIENlbGx1bGFyIEF1dG9tYXRhIEdFTmVyYXRvciAoQ0FHRU4pXG5cblxuTWFuYWdlIHRoZSB0YWJzIGZvciB0aGUgdmFyaW91cyBDQUdFTiBmZWF0dXJlcy5cblxuIyMjXG5cbmNsYXNzIFRhYnNcbiAgICBcbiAgICAjXG4gICAgIyBTZXR1cCB0aGUgbG9jYWwgc2hhcmVkIHZhcmlhYmxlc1xuICAgICMgQGNvbnN0cnVjdG9yXG4gICAgIyBcbiAgICBjb25zdHJ1Y3RvcjogKEJVUyktPlxuICAgICAgICBAQlVTID0gQlVTXG4gICAgICAgIEBfdGFic0VsZW1zID0gW11cblxuICAgICNcbiAgICAjIFN0YXJ0IHRoZSB0YWJiZWQgaW50ZXJmYWNlXG4gICAgIyBcbiAgICBzdGFydDooKS0+XG4gICAgICAgIHRhYnNUZW1wbGF0ZUhUTUwgPSBET00uZWxlbUJ5SWQoJ1RBQlMnLCAnVEVNUExBVEUnKS5pbm5lckhUTUxcblxuICAgICAgICB0YWJDb250YWluZXJFbGVtID0gRE9NLmVsZW1CeUlkKCdUQUJTJywnQ09OVEFJTkVSJylcbiAgICAgICAgdGFiQ29udGFpbmVyRWxlbS5pbm5lckhUTUwgPSBNdXN0YWNoZS5yZW5kZXIodGFic1RlbXBsYXRlSFRNTCwge30pXG4gICAgICAgIEBfdGFic0VsZW1zID0gdGFiQ29udGFpbmVyRWxlbS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpXG5cbiAgICAgICAgZm9yIHRhYiBpbiBAX3RhYnNFbGVtc1xuICAgICAgICAgICAgZG8odGFiKSA9PlxuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWUgPSB0YWIuZ2V0QXR0cmlidXRlKFwiZGF0YS10YWItbW9kdWxlXCIpXG5cbiAgICAgICAgICAgICAgICBpZiB0YWIuY2xhc3NOYW1lIGlzIERPTS5nZXRDbGFzcygnVEFCUycsICdBQ1RJVkUnKVxuICAgICAgICAgICAgICAgICAgICBAX3J1blRhYk1vZHVsZShtb2R1bGVOYW1lKVxuXG4gICAgICAgICAgICAgICAgQEJVUy5zdWJzY3JpYmUoJ3RhYnMuc2hvdy4nICsgbW9kdWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgKCk9PkBfcnVuVGFiTW9kdWxlKG1vZHVsZU5hbWUpXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAgICAgKGV2ZW50KT0+XG4gICAgICAgICAgICAgICAgICAgICAgICBAQlVTLmJyb2FkY2FzdCgndGFicy5zaG93LicgKyBtb2R1bGVOYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgKVxuICAgICNcbiAgICAjIEFjdGl2YXRlIGEgdGFiIHZpYSBzdHJpbmcgbmFtZVxuICAgICMgXG4gICAgX2FjdGl2YXRlVGFiOiAodGFiTmFtZSktPlxuICAgICAgICBhY3RpdmVDbGFzcyA9IERPTS5nZXRDbGFzcygnVEFCUycsICdBQ1RJVkUnKVxuICAgICAgICBmb3IgdGFiIGluIEBfdGFic0VsZW1zXG4gICAgICAgICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZShhY3RpdmVDbGFzcylcblxuICAgICAgICBET00uZWxlbUJ5UHJlZml4KCdUQUJTJywgJ1RBQl9QUkVGSVgnLCB0YWJOYW1lKS5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKVxuXG4gICAgI1xuICAgICMgUnVuIHRoZSBUYWJcbiAgICAjICAtIGllIGlmIEdlbmVyYXRvciBpcyBjbGlja2VkLCBydW4gdGhlIEdlbmVyYXRvclxuICAgICNcbiAgICBfcnVuVGFiTW9kdWxlOih0YWJOYW1lKT0+XG4gICAgICAgICMgQWN0aXZhdGUgdGhlIHRhYlxuICAgICAgICBAX2FjdGl2YXRlVGFiKHRhYk5hbWUpXG5cbiAgICAgICAgIyBSdW4gdGhlIHRhYlxuICAgICAgICBAQlVTLmJyb2FkY2FzdCh0YWJOYW1lICsgJy5ydW4nKVxuICAgICJdfQ==


/*

The top/root row editor for CAGEN.

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Component of Cellular Automata GENerator (CAGEN)


The user can edit the top/root row, allowing them to "seed"
the generator to test configurations and create new variations
on the standard NKS version.
 */
var TopRowEditor,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

TopRowEditor = (function() {
  function TopRowEditor(BUS) {
    this._toggleEditorCell = bind(this._toggleEditorCell, this);
    this._moveSlider = bind(this._moveSlider, this);
    this.BUS = BUS;
    this._editorCellsElems = [];
    this._aRowBinary = [];
    this._noColumns = 151;
    this._colWidth = 5;
    this._rowHeight = 5;
    this._sliderLeft = 0;
    this._sliderCols = 26;
    this._sliderPxToMid = (this._sliderCols / 2) * this._colWidth;
    this._editorCellWidth = 29;
    this._totalWidth = this._colWidth * this._noColumns;
    this._generateInitialBinary();
    this.BUS.subscribe('toproweditor.run', (function(_this) {
      return function() {
        _this.run();
      };
    })(this));
  }

  TopRowEditor.prototype.run = function() {
    this._setupContainerTemplate();
    this._sliderElem = DOM.elemById('TOPROWEDITOR', 'SLIDER');
    this._rowContainerElem = DOM.elemById('TOPROWEDITOR', 'ROW_CONTAINER');
    this._jEditorContainer = DOM.elemById('TOPROWEDITOR', 'EDITOR_CONTAINER');
    this._rowContainerElem.style.height = this._rowHeight + "px";
    this._rowContainerElem.style.width = this._totalWidth + "px";
    this._setupSlider();
    this._buildRow();
    this._buildEditorCells();
    this._updateEditorCells(1);
    return this._setupButtonEvents();
  };

  TopRowEditor.prototype._setupContainerTemplate = function() {
    var cagenMainElem, toproweditorHTML;
    toproweditorHTML = DOM.elemById('TOPROWEDITOR', 'TEMPLATE_TOPROWEDITOR').innerHTML;
    cagenMainElem = DOM.elemById('CAGEN', 'MAIN_CONTAINER');
    return cagenMainElem.innerHTML = Mustache.render(toproweditorHTML, {});
  };

  TopRowEditor.prototype._setupSlider = function() {
    var isSliderInDragMode, sliderArrowLeftElem, sliderArrowRightElem, sliderContainerElem;
    sliderContainerElem = DOM.elemById('TOPROWEDITOR', 'SLIDER_CONTAINER');
    sliderContainerElem.style.width = this._totalWidth + "px";
    this._sliderElem.style.width = (this._colWidth * this._sliderCols) + "px";
    sliderArrowLeftElem = DOM.elemById('TOPROWEDITOR', 'SLIDER_ARROW_LEFT');
    sliderArrowRightElem = DOM.elemById('TOPROWEDITOR', 'SLIDER_ARROW_RIGHT');
    isSliderInDragMode = false;
    this._sliderElem.addEventListener('click', (function(_this) {
      return function() {
        if (isSliderInDragMode) {
          isSliderInDragMode = false;
          sliderArrowLeftElem.style.display = "none";
          return sliderArrowRightElem.style.display = "none";
        } else {
          isSliderInDragMode = true;
          sliderArrowLeftElem.style.display = "block";
          return sliderArrowRightElem.style.display = "block";
        }
      };
    })(this));
    this._sliderElem.addEventListener('mousemove', (function(_this) {
      return function(event) {
        if (isSliderInDragMode) {
          return _this._moveSlider(event);
        }
      };
    })(this));
    return this._sliderInitialOffset = this._getOffsetPosition(this._sliderElem);
  };

  TopRowEditor.prototype._setupButtonEvents = function() {
    DOM.elemById('TOPROWEDITOR', 'BUTTON_GENERATE').addEventListener('click', (function(_this) {
      return function() {
        _this.BUS.broadcast('tabs.show.generator');
      };
    })(this));
    return DOM.elemById('TOPROWEDITOR', 'BUTTON_RESET').addEventListener('click', (function(_this) {
      return function(event) {
        return _this._resetRow(event);
      };
    })(this));
  };

  TopRowEditor.prototype._getOffsetPosition = function(elem) {
    var left, top;
    top = elem.getBoundingClientRect().top + window.pageYOffset;
    left = elem.getBoundingClientRect().left + window.pageXOffset;
    return {
      top: top,
      left: left
    };
  };

  TopRowEditor.prototype._resetRow = function(event) {
    this._generateInitialBinary();
    return this.run();
  };

  TopRowEditor.prototype._moveSlider = function(ev) {
    var adjustedLeft, closestEdgePx, fullWidth, leftCellNo, leftPos, rightPos, xMousePos;
    xMousePos = ev.clientX;
    closestEdgePx = xMousePos - (xMousePos % this._colWidth);
    leftPos = closestEdgePx - this._sliderPxToMid;
    rightPos = closestEdgePx + this._sliderPxToMid + this._colWidth;
    fullWidth = this._totalWidth + this._colWidth;
    adjustedLeft = leftPos + this._sliderInitialOffset.left;
    if (adjustedLeft >= this._sliderInitialOffset.left && rightPos <= fullWidth) {
      this._sliderElem.style.left = adjustedLeft + "px";
      leftCellNo = (leftPos / this._colWidth) + 1;
      return this._updateEditorCells(leftCellNo);
    }
  };

  TopRowEditor.prototype._updateEditorCells = function(beginCell) {
    var cell, cellPos, j, ref, results;
    results = [];
    for (cell = j = 1, ref = this._sliderCols; 1 <= ref ? j <= ref : j >= ref; cell = 1 <= ref ? ++j : --j) {
      cellPos = cell + beginCell - 1;
      this._editorCellsElems[cell].innerHTML = cellPos;
      this._editorCellsElems[cell].setAttribute('data-cellIndex', cellPos);
      if (this._aRowBinary[cellPos] === 1) {
        results.push(this._editorCellsElems[cell].classList.add(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL_ACTIVE')));
      } else {
        results.push(this._editorCellsElems[cell].classList.remove(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL_ACTIVE')));
      }
    }
    return results;
  };

  TopRowEditor.prototype._buildEditorCells = function() {
    var cell, cellHtml, cellTemplateHTML, cells, i, j, k, leftPos, ref, ref1, results, tmpId;
    cellTemplateHTML = DOM.elemById('TOPROWEDITOR', 'TEMPLATE_EDITOR_CELL').innerHTML;
    this._jEditorContainer.style.width = (this._sliderCols * this._editorCellWidth) + "px";
    cellHtml = "";
    for (cell = j = 1, ref = this._sliderCols; 1 <= ref ? j <= ref : j >= ref; cell = 1 <= ref ? ++j : --j) {
      tmpId = "editor-cell-" + cell;
      leftPos = (cell - 1) * this._editorCellWidth;
      cellHtml += Mustache.render(cellTemplateHTML, {
        id: tmpId,
        left: leftPos
      });
    }
    this._jEditorContainer.innerHTML = cellHtml;
    cells = document.getElementsByClassName(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL'));
    results = [];
    for (i = k = 0, ref1 = cells.length - 1; 0 <= ref1 ? k <= ref1 : k >= ref1; i = 0 <= ref1 ? ++k : --k) {
      this._editorCellsElems[i + 1] = cells[i];
      results.push(cells[i].addEventListener('click', this._toggleEditorCell));
    }
    return results;
  };

  TopRowEditor.prototype._toggleEditorCell = function(event) {
    var cellNo, editorCellElem, sliderCellElem, sliderColPrefix;
    editorCellElem = event.target;
    cellNo = editorCellElem.getAttribute('data-cellIndex');
    sliderColPrefix = DOM.getPrefix('TOPROWEDITOR', 'SLIDER_COL');
    sliderCellElem = document.getElementById(sliderColPrefix + cellNo);
    if (this._aRowBinary[cellNo] === 1) {
      this._aRowBinary[cellNo] = 0;
      editorCellElem.classList.remove(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL_ACTIVE'));
      sliderCellElem.classList.remove(DOM.getClass('TOPROWEDITOR', 'SLIDER_CELL_ACTIVE'));
    } else {
      this._aRowBinary[cellNo] = 1;
      editorCellElem.classList.add(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL_ACTIVE'));
      sliderCellElem.classList.add(DOM.getClass('TOPROWEDITOR', 'SLIDER_CELL_ACTIVE'));
    }
    return radio('shared.set.toprowbinary').broadcast(this._aRowBinary);
  };

  TopRowEditor.prototype._generateInitialBinary = function() {
    var col, j, ref, seed_col;
    seed_col = Math.ceil(this._noColumns / 2);
    for (col = j = 1, ref = this._noColumns; 1 <= ref ? j <= ref : j >= ref; col = 1 <= ref ? ++j : --j) {
      if (col === seed_col) {
        this._aRowBinary[col] = 1;
      } else {
        this._aRowBinary[col] = 0;
      }
    }
    return radio('shared.set.toprowbinary').broadcast(this._aRowBinary);
  };

  TopRowEditor.prototype._buildRow = function() {
    var activeClass, col, j, leftPos, ref, rowHtml, sliderColPrefix, smallcellTemplateHTML, tmpId;
    smallcellTemplateHTML = DOM.elemById('TOPROWEDITOR', 'TEMPLATE_SLIDER_CELL').innerHTML;
    sliderColPrefix = DOM.getPrefix('TOPROWEDITOR', 'SLIDER_COL');
    rowHtml = "";
    for (col = j = 1, ref = this._noColumns; 1 <= ref ? j <= ref : j >= ref; col = 1 <= ref ? ++j : --j) {
      activeClass = "";
      if (this._aRowBinary[col] === 1) {
        activeClass = DOM.getClass('TOPROWEDITOR', 'SLIDER_CELL_ACTIVE');
      }
      leftPos = (col - 1) * this._colWidth;
      tmpId = sliderColPrefix + col;
      rowHtml += Mustache.render(smallcellTemplateHTML, {
        id: tmpId,
        left: leftPos,
        activeClass: activeClass
      });
    }
    return this._rowContainerElem.innerHTML = rowHtml;
  };

  return TopRowEditor;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9wUm93RWRpdG9yLmpzIiwic291cmNlcyI6WyJUb3BSb3dFZGl0b3IuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxZQUFBO0VBQUE7O0FBaUJNO0VBTVcsc0JBQUMsR0FBRDs7O0lBQ1QsSUFBQyxDQUFBLEdBQUQsR0FBTztJQUVQLElBQUMsQ0FBQSxpQkFBRCxHQUFxQjtJQUVyQixJQUFDLENBQUEsV0FBRCxHQUFlO0lBQ2YsSUFBQyxDQUFBLFVBQUQsR0FBYztJQUNkLElBQUMsQ0FBQSxTQUFELEdBQWE7SUFDYixJQUFDLENBQUEsVUFBRCxHQUFjO0lBQ2QsSUFBQyxDQUFBLFdBQUQsR0FBZTtJQUNmLElBQUMsQ0FBQSxXQUFELEdBQWU7SUFDZixJQUFDLENBQUEsY0FBRCxHQUFrQixDQUFDLElBQUMsQ0FBQSxXQUFELEdBQWUsQ0FBaEIsQ0FBQSxHQUFxQixJQUFDLENBQUE7SUFDeEMsSUFBQyxDQUFBLGdCQUFELEdBQW9CO0lBQ3BCLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBQyxDQUFBLFNBQUQsR0FBVyxJQUFDLENBQUE7SUFFM0IsSUFBQyxDQUFBLHNCQUFELENBQUE7SUFFQSxJQUFDLENBQUEsR0FBRyxDQUFDLFNBQUwsQ0FBZSxrQkFBZixFQUNJLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtRQUNJLEtBQUMsQ0FBQSxHQUFELENBQUE7TUFESjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FESjtFQWpCUzs7eUJBMEJiLEdBQUEsR0FBSyxTQUFBO0lBRUQsSUFBQyxDQUFBLHVCQUFELENBQUE7SUFHQSxJQUFDLENBQUEsV0FBRCxHQUFlLEdBQUcsQ0FBQyxRQUFKLENBQWEsY0FBYixFQUE0QixRQUE1QjtJQUNmLElBQUMsQ0FBQSxpQkFBRCxHQUFxQixHQUFHLENBQUMsUUFBSixDQUFhLGNBQWIsRUFBNkIsZUFBN0I7SUFDckIsSUFBQyxDQUFBLGlCQUFELEdBQXFCLEdBQUcsQ0FB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Q0FBUCxDQUFBLEdBQVksSUFBQyxDQUFBO01BQ3hCLEtBQUEsR0FBUSxlQUFBLEdBQWtCO01BRzFCLE9BQUEsSUFBVyxRQUFRLENBQUMsTUFBVCxDQUFnQixxQkFBaEIsRUFBdUM7UUFBQyxFQUFBLEVBQUcsS0FBSjtRQUFXLElBQUEsRUFBSyxPQUFoQjtRQUF5QixXQUFBLEVBQVksV0FBckM7T0FBdkM7QUFUZjtXQVlBLElBQUMsQ0FBQSxpQkFBaUIsQ0FBQyxTQUFuQixHQUErQjtFQW5CeEIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcblxuVGhlIHRvcC9yb290IHJvdyBlZGl0b3IgZm9yIENBR0VOLlxuXG5AYXV0aG9yIERlc3RpbiBNb3VsdG9uXG5AZ2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9kZXN0aW5tb3VsdG9uL2NhZ2VuXG5AbGljZW5zZSBNSVRcblxuQ29tcG9uZW50IG9mIENlbGx1bGFyIEF1dG9tYXRhIEdFTmVyYXRvciAoQ0FHRU4pXG5cblxuVGhlIHVzZXIgY2FuIGVkaXQgdGhlIHRvcC9yb290IHJvdywgYWxsb3dpbmcgdGhlbSB0byBcInNlZWRcIlxudGhlIGdlbmVyYXRvciB0byB0ZXN0IGNvbmZpZ3VyYXRpb25zIGFuZCBjcmVhdGUgbmV3IHZhcmlhdGlvbnNcbm9uIHRoZSBzdGFuZGFyZCBOS1MgdmVyc2lvbi5cblxuIyMjXG5cbmNsYXNzIFRvcFJvd0VkaXRvclxuXG4gICAgI1xuICAgICMgU2V0dXAgdGhlIGxvY2FsbHkgc2hhcmVkIHZhcmlhYmxlc1xuICAgICMgQGNvbnN0cnVjdG9yXG4gICAgIyBcbiAgICBjb25zdHJ1Y3RvcjogKEJVUyktPlxuICAgICAgICBAQlVTID0gQlVTXG4gICAgICAgIFxuICAgICAgICBAX2VkaXRvckNlbGxzRWxlbXMgPSBbXVxuXG4gICAgICAgIEBfYVJvd0JpbmFyeSA9IFtdXG4gICAgICAgIEBfbm9Db2x1bW5zID0gMTUxXG4gICAgICAgIEBfY29sV2lkdGggPSA1XG4gICAgICAgIEBfcm93SGVpZ2h0ID0gNVxuICAgICAgICBAX3NsaWRlckxlZnQgPSAwXG4gICAgICAgIEBfc2xpZGVyQ29scyA9IDI2XG4gICAgICAgIEBfc2xpZGVyUHhUb01pZCA9IChAX3NsaWRlckNvbHMgLyAyKSAqIEBfY29sV2lkdGhcbiAgICAgICAgQF9lZGl0b3JDZWxsV2lkdGggPSAyOVxuICAgICAgICBAX3RvdGFsV2lkdGggPSBAX2NvbFdpZHRoKkBfbm9Db2x1bW5zXG5cbiAgICAgICAgQF9nZW5lcmF0ZUluaXRpYWxCaW5hcnkoKVxuXG4gICAgICAgIEBCVVMuc3Vic2NyaWJlKCd0b3Byb3dlZGl0b3IucnVuJyxcbiAgICAgICAgICAgICgpPT5cbiAgICAgICAgICAgICAgICBAcnVuKClcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgKVxuXG4gICAgI1xuICAgICMgU3RhcnQgdGhlIHRvcCByb3cgZWRpdG9yXG4gICAgIyBcbiAgICBydW46ICgpLT5cbiAgICAgICAgXG4gICAgICAgIEBfc2V0dXBDb250YWluZXJUZW1wbGF0ZSgpXG5cbiAgICAgICAgIyBTZXQgdGhlIGxvY2FsIGVsZW1lbnRzICh0byBhbGxldmlhdGUgbG9va3VwcykgICAgICAgIFxuICAgICAgICBAX3NsaWRlckVsZW0gPSBET00uZWxlbUJ5SWQoJ1RPUFJPV0VESVRPUicsJ1NMSURFUicpXG4gICAgICAgIEBfcm93Q29udGFpbmVyRWxlbSA9IERPTS5lbGVtQnlJZCgnVE9QUk9XRURJVE9SJywgJ1JPV19DT05UQUlORVInKVxuICAgICAgICBAX2pFZGl0b3JDb250YWluZXIgPSBET00uZWxlbUJ5SWQoJ1RPUFJPV0VESVRPUicsICdFRElUT1JfQ09OVEFJTkVSJylcblxuICAgICAgICAjIFNldCB0aGUgZGltZW5zaW9uc1xuICAgICAgICBAX3Jvd0NvbnRhaW5lckVsZW0uc3R5bGUuaGVpZ2h0ID0gQF9yb3dIZWlnaHQgKyBcInB4XCJcbiAgICAgICAgQF9yb3dDb250YWluZXJFbGVtLnN0eWxlLndpZHRoID0gQF90b3RhbFdpZHRoICsgXCJweFwiXG4gICAgICAgIFxuICAgICAgICBAX3NldHVwU2xpZGVyKCkgICAgICAgIFxuXG4gICAgICAgICMgQnVpbGQgdGhlIHJvdyBhbmQgdGhlIGVkaXRvciBcbiAgICAgICAgQF9idWlsZFJvdygpXG4gICAgICAgIEBfYnVpbGRFZGl0b3JDZWxscygpXG4gICAgICAgIEBfdXBkYXRlRWRpdG9yQ2VsbHMoMSlcbiAgICAgICAgQF9zZXR1cEJ1dHRvbkV2ZW50cygpXG4gICAgICAgIFxuXG4gICAgI1xuICAgICMgUG9wdWxhdGUgdGhlIG1haW4gY29udGFpbmVyIHdpdGggdGhlIHRlbXBsYXRlXG4gICAgI1xuICAgIF9zZXR1cENvbnRhaW5lclRlbXBsYXRlOiAoKS0+XG4gICAgICAgIHRvcHJvd2VkaXRvckhUTUwgPSBET00uZWxlbUJ5SWQoJ1RPUFJPV0VESVRPUicsICdURU1QTEFURV9UT1BST1dFRElUT1InKS5pbm5lckhUTUxcbiAgICAgICAgY2FnZW5NYWluRWxlbSA9IERPTS5lbGVtQnlJZCgnQ0FHRU4nLCAnTUFJTl9DT05UQUlORVInKVxuICAgICAgICBjYWdlbk1haW5FbGVtLmlubmVySFRNTCA9IE11c3RhY2hlLnJlbmRlcih0b3Byb3dlZGl0b3JIVE1MLHt9KVxuXG4gICAgI1xuICAgICMgU2V0dXAgdGhlIHNsaWRlciAoem9vbWVyKVxuICAgICNcbiAgICBfc2V0dXBTbGlkZXI6ICgpLT5cbiAgICAgICAgc2xpZGVyQ29udGFpbmVyRWxlbSA9IERPTS5lbGVtQnlJZCgnVE9QUk9XRURJVE9SJywgJ1NMSURFUl9DT05UQUlORVInKVxuICAgICAgICBzbGlkZXJDb250YWluZXJFbGVtLnN0eWxlLndpZHRoID0gQF90b3RhbFdpZHRoICsgXCJweFwiXG5cbiAgICAgICAgQF9zbGlkZXJFbGVtLnN0eWxlLndpZHRoID0gKEBfY29sV2lkdGggKiBAX3NsaWRlckNvbHMpICsgXCJweFwiIFxuXG4gICAgICAgIHNsaWRlckFycm93TGVmdEVsZW0gPSBET00uZWxlbUJ5SWQoJ1RPUFJPV0VESVRPUicsICdTTElERVJfQVJST1dfTEVGVCcpXG4gICAgICAgIHNsaWRlckFycm93UmlnaHRFbGVtID0gRE9NLmVsZW1CeUlkKCdUT1BST1dFRElUT1InLCAnU0xJREVSX0FSUk9XX1JJR0hUJylcbiAgICAgICAgaXNTbGlkZXJJbkRyYWdNb2RlID0gZmFsc2VcblxuICAgICAgICAjIEV2ZW50IGhhbmRsZXIgZm9yIHdoZW4gYSBjbGljayBvY2N1cnMgd2hpbGUgc2xpZGluZyB0aGUgXCJ6b29tXCJcbiAgICAgICAgQF9zbGlkZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgPT5cbiAgICAgICAgICAgIGlmIGlzU2xpZGVySW5EcmFnTW9kZVxuICAgICAgICAgICAgICAgIGlzU2xpZGVySW5EcmFnTW9kZSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgc2xpZGVyQXJyb3dMZWZ0RWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICAgICAgICAgICAgICBzbGlkZXJBcnJvd1JpZ2h0RWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBpc1NsaWRlckluRHJhZ01vZGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgc2xpZGVyQXJyb3dMZWZ0RWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgICAgICAgICAgICAgc2xpZGVyQXJyb3dSaWdodEVsZW0uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxuICAgICAgICApXG5cbiAgICAgICAgIyBFdmVudCBoYW5kbGVyIGZvciB3aGVuIHRoZSBtb3VzZSBtb3ZlcyBvdmVyIHRoZSBcInpvb21cIiBzbGlkZXJcbiAgICAgICAgQF9zbGlkZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChldmVudCkgPT5cbiAgICAgICAgICAgIGlmIGlzU2xpZGVySW5EcmFnTW9kZSBcbiAgICAgICAgICAgICAgICBAX21vdmVTbGlkZXIoZXZlbnQpXG4gICAgICAgIClcblxuICAgICAgICAjIEdldCB0aGUgaW5pdGlhbCBzbGlkZXIgcG9zaXRpb25cbiAgICAgICAgQF9zbGlkZXJJbml0aWFsT2Zmc2V0ID0gQF9nZXRPZmZzZXRQb3NpdGlvbihAX3NsaWRlckVsZW0pXG4gICAgXG4gICAgI1xuICAgICMgU2V0dXAgdGhlIEJ1dHRvbiBldmVudHNcbiAgICAjXG4gICAgX3NldHVwQnV0dG9uRXZlbnRzOiAoKS0+XG4gICAgICAgICMgVGhlIEdlbmVyYXRlIGNsaWNrIGV2ZW50XG4gICAgICAgIERPTS5lbGVtQnlJZCgnVE9QUk9XRURJVE9SJywgJ0JVVFRPTl9HRU5FUkFURScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcbiAgICAgICAgICAgICgpPT5cbiAgICAgICAgICAgICAgICBAQlVTLmJyb2FkY2FzdCgndGFicy5zaG93LmdlbmVyYXRvcicpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIClcblxuICAgICAgICAjIFJlc2V0IGJ1dHRvbiBjbGljayBldmVudFxuICAgICAgICBET00uZWxlbUJ5SWQoJ1RPUFJPV0VESVRPUicsICdCVVRUT05fUkVTRVQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXG4gICAgICAgICAgICAoZXZlbnQpPT5AX3Jlc2V0Um93KGV2ZW50KVxuICAgICAgICApXG5cbiAgICAjXG4gICAgIyBHZXQgdGhlIG9mZnNldCBwb3NpdGlvbiBmb3IgYW4gZWxlbWVudFxuICAgICNcbiAgICBfZ2V0T2Zmc2V0UG9zaXRpb246IChlbGVtKS0+XG4gICAgICAgIHRvcCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0XG4gICAgICAgIGxlZnQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyB3aW5kb3cucGFnZVhPZmZzZXRcbiAgICAgICAgcmV0dXJuIHsgdG9wLCBsZWZ0IH07XG4gICAgI1xuICAgICMgRXZlbnQgaGFuZGxlciB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgUmVzZXQgYnV0dG9uXG4gICAgIyBcbiAgICBfcmVzZXRSb3c6IChldmVudCktPlxuICAgICAgICBAX2dlbmVyYXRlSW5pdGlhbEJpbmFyeSgpXG4gICAgICAgIEBydW4oKVxuXG5cbiAgICAjXG4gICAgIyBFdmVudCBoYW5kbGVyIHdoZW4gdGhlIG1vdXNlIG1vdmVzIHRoZSBzbGlkZXJcbiAgICAjIFxuICAgIF9tb3ZlU2xpZGVyOiAoZXYpPT5cblxuICAgICAgICAjIEdldCB0aGUgbW91c2UgcG9zaXRpb25cbiAgICAgICAgeE1vdXNlUG9zID0gZXYuY2xpZW50WFxuICAgICAgICBjbG9zZXN0RWRnZVB4ID0geE1vdXNlUG9zIC0gKHhNb3VzZVBvcyAlIEBfY29sV2lkdGgpXG5cbiAgICAgICAgIyBDYWxjdWxhdGUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIG9mIHRoZSBzbGlkZXJcbiAgICAgICAgbGVmdFBvcyA9IGNsb3Nlc3RFZGdlUHggLSBAX3NsaWRlclB4VG9NaWRcbiAgICAgICAgcmlnaHRQb3MgPSBjbG9zZXN0RWRnZVB4ICsgQF9zbGlkZXJQeFRvTWlkK0BfY29sV2lkdGhcbiAgICAgICAgZnVsbFdpZHRoID0gQF90b3RhbFdpZHRoICsgQF9jb2xXaWR0aFxuXG4gICAgICAgICMgQWRqdXN0IHRoZSBjYWxjdWxhdGlvbiBiYXNlZCBvbiBhIGZ1ZGdlZCBpbml0aWFsIG9mZnNldFxuICAgICAgICBhZGp1c3RlZExlZnQgPSBsZWZ0UG9zK0Bfc2xpZGVySW5pdGlhbE9mZnNldC5sZWZ0XG5cbiAgICAgICAgaWYgYWRqdXN0ZWRMZWZ0ID49IEBfc2xpZGVySW5pdGlhbE9mZnNldC5sZWZ0ICYmIHJpZ2h0UG9zIDw9ICBmdWxsV2lkdGhcbiAgICAgICAgICAgIEBfc2xpZGVyRWxlbS5zdHlsZS5sZWZ0ID0gYWRqdXN0ZWRMZWZ0ICsgXCJweFwiXG5cbiAgICAgICAgICAgIGxlZnRDZWxsTm8gPSAobGVmdFBvcyAvIEBfY29sV2lkdGgpICsgMVxuXG4gICAgICAgICAgICBAX3VwZGF0ZUVkaXRvckNlbGxzKGxlZnRDZWxsTm8pXG5cblxuICAgICNcbiAgICAjIENoYW5nZSB0aGUgY2VsbHMgYXZhaWxhYmxlIHRvIGVkaXQuXG4gICAgIyBcbiAgICAjIFdoZW4gdGhlIHVzZXIgbW92ZXMgdGhlIHNsaWRlciB0byBcInpvb21cIiBvbiBhIHNlY3Rpb25cbiAgICAjIHRoaXMgd2lsbCB1cGRhdGUgdGhlIGVkaXRhYmxlIGNlbGxzLlxuICAgICMgXG4gICAgX3VwZGF0ZUVkaXRvckNlbGxzOiAoYmVnaW5DZWxsKS0+XG4gICAgICAgIFxuICAgICAgICBmb3IgY2VsbCBpbiBbMS4uQF9zbGlkZXJDb2xzXVxuICAgICAgICAgICAgY2VsbFBvcyA9IGNlbGwrYmVnaW5DZWxsLTFcblxuICAgICAgICAgICAgQF9lZGl0b3JDZWxsc0VsZW1zW2NlbGxdLmlubmVySFRNTCA9IGNlbGxQb3NcbiAgICAgICAgICAgIEBfZWRpdG9yQ2VsbHNFbGVtc1tjZWxsXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbEluZGV4JywgY2VsbFBvcylcblxuICAgICAgICAgICAgIyBDaGFuZ2UgdGhlIHN0eWxlIHRvIHJlZmxlY3Qgd2hpY2ggY2VsbHMgYXJlIGFjdGl2ZVxuICAgICAgICAgICAgaWYgQF9hUm93QmluYXJ5W2NlbGxQb3NdIGlzIDFcbiAgICAgICAgICAgICAgICBAX2VkaXRvckNlbGxzRWxlbXNbY2VsbF0uY2xhc3NMaXN0LmFkZChET00uZ2V0Q2xhc3MoJ1RPUFJPV0VESVRPUicsICdFRElUT1JfQ0VMTF9BQ1RJVkUnKSlcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBAX2VkaXRvckNlbGxzRWxlbXNbY2VsbF0uY2xhc3NMaXN0LnJlbW92ZShET00uZ2V0Q2xhc3MoJ1RPUFJPV0VESVRPUicsICdFRElUT1JfQ0VMTF9BQ1RJVkUnKSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgI1xuICAgICMgQnVpbGQgdGhlIGVkaXRvciBjZWxsc1xuICAgICMgXG4gICAgX2J1aWxkRWRpdG9yQ2VsbHM6ICgpLT5cblxuICAgICAgICBjZWxsVGVtcGxhdGVIVE1MID0gRE9NLmVsZW1CeUlkKCdUT1BST1dFRElUT1InLCAnVEVNUExBVEVfRURJVE9SX0NFTEwnKS5pbm5lckhUTUxcbiAgICAgICAgXG4gICAgICAgIEBfakVkaXRvckNvbnRhaW5lci5zdHlsZS53aWR0aCA9IChAX3NsaWRlckNvbHMgKiBAX2VkaXRvckNlbGxXaWR0aCkgKyBcInB4XCJcbiAgICAgICAgY2VsbEh0bWwgPSBcIlwiXG4gICAgICAgIGZvciBjZWxsIGluIFsxLi5AX3NsaWRlckNvbHNdXG4gICAgICAgICAgICB0bXBJZCA9IFwiZWRpdG9yLWNlbGwtXCIrY2VsbFxuICAgICAgICAgICAgbGVmdFBvcyA9IChjZWxsLTEpKkBfZWRpdG9yQ2VsbFdpZHRoXG5cbiAgICAgICAgICAgICMgQ3JlYXRlIGFuZCBhcHBlbmQgdGhlIGVkaXRvciBjZWxsIHZpYSBNdXN0YWNoZSB0ZW1wbGF0ZVxuICAgICAgICAgICAgY2VsbEh0bWwgKz0gTXVzdGFjaGUucmVuZGVyKGNlbGxUZW1wbGF0ZUhUTUwsIHtpZDp0bXBJZCwgbGVmdDpsZWZ0UG9zfSlcbiAgICAgICAgICAgICMgU2V0dXAgdGhlIGNsaWNrIGV2ZW50IHdoZW4gYSB1c2VyIHRvZ2dsZXMgYSBjZWxsIGJ5IGNsaWNraW5nIG9uIGl0XG5cbiAgICAgICAgQF9qRWRpdG9yQ29udGFpbmVyLmlubmVySFRNTCA9IGNlbGxIdG1sXG5cbiAgICAgICAgY2VsbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKERPTS5nZXRDbGFzcygnVE9QUk9XRURJVE9SJywgJ0VESVRPUl9DRUxMJykpXG4gICAgICAgIFxuICAgICAgICBmb3IgaSBpbiBbMC4uY2VsbHMubGVuZ3RoIC0gMV1cbiAgICAgICAgICAgIEBfZWRpdG9yQ2VsbHNFbGVtc1tpKzFdID0gY2VsbHNbaV1cbiAgICAgICAgICAgIGNlbGxzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQF90b2dnbGVFZGl0b3JDZWxsKVxuICAgICAgICBcblxuXG4gICAgI1xuICAgICMgRXZlbnQgaGFuZGxlciBmb3Igd2hlbiBhIHVzZXIgY2xpY2tzIG9uIGEgY2VsbCB0aGF0IHRoZXlcbiAgICAjIHdhbnQgdG8gYWN0aXZhdGUgb3IgZGVhY3RpdmF0ZVxuICAgICMgXG4gICAgX3RvZ2dsZUVkaXRvckNlbGw6IChldmVudCk9PlxuXG4gICAgICAgIGVkaXRvckNlbGxFbGVtID0gZXZlbnQudGFyZ2V0XG4gICAgICAgIGNlbGxObyA9IGVkaXRvckNlbGxFbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1jZWxsSW5kZXgnKVxuICAgICAgICBzbGlkZXJDb2xQcmVmaXggPSBET00uZ2V0UHJlZml4KCdUT1BST1dFRElUT1InLCAnU0xJREVSX0NPTCcpXG4gICAgICAgIHNsaWRlckNlbGxFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2xpZGVyQ29sUHJlZml4ICsgY2VsbE5vKVxuICAgICAgICBpZiBAX2FSb3dCaW5hcnlbY2VsbE5vXSBpcyAxXG4gICAgICAgICAgICAjIERlYWN0aXZhdGUgdGhlIGNlbGwgXG4gICAgICAgICAgICBAX2FSb3dCaW5hcnlbY2VsbE5vXSA9IDBcbiAgICAgICAgICAgIGVkaXRvckNlbGxFbGVtLmNsYXNzTGlzdC5yZW1vdmUoRE9NLmdldENsYXNzKCdUT1BST1dFRElUT1InLCAnRURJVE9SX0NFTExfQUNUSVZFJykpXG4gICAgICAgICAgICBzbGlkZXJDZWxsRWxlbS5jbGFzc0xpc3QucmVtb3ZlKERPTS5nZXRDbGFzcygnVE9QUk9XRURJVE9SJywgJ1NMSURFUl9DRUxMX0FDVElWRScpKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICAjIEFjdGl2YXRlIHRoZSBjZWxsXG4gICAgICAgICAgICBAX2FSb3dCaW5hcnlbY2VsbE5vXSA9IDFcbiAgICAgICAgICAgIGVkaXRvckNlbGxFbGVtLmNsYXNzTGlzdC5hZGQoRE9NLmdldENsYXNzKCdUT1BST1dFRElUT1InLCAnRURJVE9SX0NFTExfQUNUSVZFJykpXG4gICAgICAgICAgICBzbGlkZXJDZWxsRWxlbS5jbGFzc0xpc3QuYWRkKERPTS5nZXRDbGFzcygnVE9QUk9XRURJVE9SJywgJ1NMSURFUl9DRUxMX0FDVElWRScpKVxuXG4gICAgICAgICMgU2V0IHRoZSBuZXcgYmluYXJ5IGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBnZW5lcmF0b3JcbiAgICAgICAgcmFkaW8oJ3NoYXJlZC5zZXQudG9wcm93YmluYXJ5JykuYnJvYWRjYXN0KEBfYVJvd0JpbmFyeSlcbiAgICAgICAgXG5cbiAgICAjXG4gICAgIyBTZXR1cCB0aGUgaW5pdGlhbCBiaW5hcnkgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJvd1xuICAgICMgXG4gICAgX2dlbmVyYXRlSW5pdGlhbEJpbmFyeTogKCktPlxuICAgICAgICAjIFRoZSBtaWRkbGUgY2VsbCBpcyB0aGUgb25seSBvbmUgaW5pdGlhbGx5IGFjdGl2ZVxuICAgICAgICBzZWVkX2NvbCA9IE1hdGguY2VpbChAX25vQ29sdW1ucyAvIDIpXG4gICAgICAgIFxuICAgICAgICBmb3IgY29sIGluIFsxLi5AX25vQ29sdW1uc11cbiAgICAgICAgICAgIGlmIGNvbCBpcyBzZWVkX2NvbFxuICAgICAgICAgICAgICAgIEBfYVJvd0JpbmFyeVtjb2xdID0gMVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIEBfYVJvd0JpbmFyeVtjb2xdID0gMFxuICAgICAgICByYWRpbygnc2hhcmVkLnNldC50b3Byb3diaW5hcnknKS5icm9hZGNhc3QoQF9hUm93QmluYXJ5KVxuICAgICAgICBcblxuICAgICNcbiAgICAjIEJ1aWxkIHRoZSByb3cgb2YgY2VsbHNcbiAgICAjIFxuICAgIF9idWlsZFJvdzogKCktPlxuICAgICAgICAjIEdldCB0aGUgTXVzdGFjaGUgdGVtcGxhdGUgaHRtbFxuXG4gICAgICAgIHNtYWxsY2VsbFRlbXBsYXRlSFRNTCA9IERPTS5lbGVtQnlJZCgnVE9QUk9XRURJVE9SJywgJ1RFTVBMQVRFX1NMSURFUl9DRUxMJykuaW5uZXJIVE1MXG4gICAgICAgIHNsaWRlckNvbFByZWZpeCA9IERPTS5nZXRQcmVmaXgoJ1RPUFJPV0VESVRPUicsICdTTElERVJfQ09MJylcbiAgICAgICAgcm93SHRtbCA9IFwiXCJcbiAgICAgICAgIyBBZGQgY2VsbHMgdG8gdGhlIHJvd1xuICAgICAgICBmb3IgY29sIGluIFsxLi5AX25vQ29sdW1uc11cbiAgICAgICAgICAgIGFjdGl2ZUNsYXNzID0gXCJcIlxuICAgICAgICAgICAgaWYgQF9hUm93QmluYXJ5W2NvbF0gaXMgMVxuICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzID0gRE9NLmdldENsYXNzKCdUT1BST1dFRElUT1InLCAnU0xJREVSX0NFTExfQUNUSVZFJylcblxuICAgICAgICAgICAgbGVmdFBvcyA9ICgoY29sIC0gMSkgKiBAX2NvbFdpZHRoKVxuICAgICAgICAgICAgdG1wSWQgPSBzbGlkZXJDb2xQcmVmaXggKyBjb2xcblxuICAgICAgICAgICAgIyBDcmVhdGUgYSByZW5kZXJpbmcgb2YgdGhlIGNlbGwgdmlhIE11c3RhY2hlIHRlbXBsYXRlXG4gICAgICAgICAgICByb3dIdG1sICs9IE11c3RhY2hlLnJlbmRlcihzbWFsbGNlbGxUZW1wbGF0ZUhUTUwsIHtpZDp0bXBJZCwgbGVmdDpsZWZ0UG9zLCBhY3RpdmVDbGFzczphY3RpdmVDbGFzc30pXG5cbiAgICAgICAgIyBBZGQgdGhlIGNlbGxzXG4gICAgICAgIEBfcm93Q29udGFpbmVyRWxlbS5pbm5lckhUTUwgPSByb3dIdG1sXG4iXX0=


/*
Initialize the CAGEN sections and setup the tabs.

@author Destin Moulton
@git https://github.com/destinmoulton/cagen
@license MIT

Component of Cellular Automata Generator (CAGEN)

The jQuery onload function that initializes the various
CAGEN features and starts the tabbed interface.
 */
window.onload = function() {
  var BUS, tabs;
  BUS = new Bus();
  new Shared();
  tabs = new Tabs(BUS);
  new Thumbnails(BUS);
  new TopRowEditor(BUS);
  new Generator(BUS);
  return tabs.start();
};

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFpbi5qcyIsInNvdXJjZXMiOlsiTWFpbi5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7QUFjQSxNQUFNLENBQUMsTUFBUCxHQUFnQixTQUFBO0FBRVosTUFBQTtFQUFBLEdBQUEsR0FBVSxJQUFBLEdBQUEsQ0FBQTtFQUVOLElBQUEsTUFBQSxDQUFBO0VBR0osSUFBQSxHQUFXLElBQUEsSUFBQSxDQUFLLEdBQUw7RUFHUCxJQUFBLFVBQUEsQ0FBVyxHQUFYO0VBR0EsSUFBQSxZQUFBLENBQWEsR0FBYjtFQUdBLElBQUEsU0FBQSxDQUFVLEdBQVY7U0FHSixJQUFJLENBQUMsS0FBTCxDQUFBO0FBbkJZIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG5Jbml0aWFsaXplIHRoZSBDQUdFTiBzZWN0aW9ucyBhbmQgc2V0dXAgdGhlIHRhYnMuXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vY2FnZW5cbkBsaWNlbnNlIE1JVFxuXG5Db21wb25lbnQgb2YgQ2VsbHVsYXIgQXV0b21hdGEgR2VuZXJhdG9yIChDQUdFTilcblxuVGhlIGpRdWVyeSBvbmxvYWQgZnVuY3Rpb24gdGhhdCBpbml0aWFsaXplcyB0aGUgdmFyaW91c1xuQ0FHRU4gZmVhdHVyZXMgYW5kIHN0YXJ0cyB0aGUgdGFiYmVkIGludGVyZmFjZS5cblxuIyMjXG5cbndpbmRvdy5vbmxvYWQgPSAtPlxuICAgICMgUFVCL1NVQiBhbmQgdmFyaWFibGUgc3RvcmUgZm9yIGludGVyLWNsYXNzIGNvbW11bmljYXRpb25cbiAgICBCVVMgPSBuZXcgQnVzKClcbiAgICAgICAgXG4gICAgbmV3IFNoYXJlZCgpXG5cbiAgICAjIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgVGFicyAodmlzdWFsIHNlY3Rpb25hbCBtYW5hZ2VtZW50KVxuICAgIHRhYnMgPSBuZXcgVGFicyhCVVMpXG5cbiAgICAjIENyZWF0ZSBpbnN0YW5jZSBvZiB0aGUgUnVsZSBUaHVtYm5haWxzIHByZXZpZXcvc2VsZWN0b3JcbiAgICBuZXcgVGh1bWJuYWlscyhCVVMpXG5cbiAgICAjIENyZWF0ZSBpbnN0YW5jZSBvZiB0aGUgVG9wIFJvdyBFZGl0b3JcbiAgICBuZXcgVG9wUm93RWRpdG9yKEJVUylcblxuICAgICMgQ3JlYXRlIGluc3RhbmNlIG9mIHRoZSBEYXNoYm9hcmRcbiAgICBuZXcgR2VuZXJhdG9yKEJVUylcblxuICAgICMgU3RhcnQgdGhlIHRhYiBpbnRlcmZhY2VcbiAgICB0YWJzLnN0YXJ0KClcblxuIl19
