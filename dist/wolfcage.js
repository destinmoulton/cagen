
/*

A pub/sub system and shared variable exchange for WolfCage.

@author Destin Moulton
@git https://github.com/destinmoulton/wolfcage
@license MIT

Subscribe and publish to a channel.

Set and get shared variables.
 */
var Bus,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Bus = (function() {
  function Bus() {
    this.subscribe = bind(this.subscribe, this);
    this._channels = {};
    this._vault = {};
  }

  Bus.prototype.subscribe = function(channel, callback) {
    if (!this._channels.hasOwnProperty(channel)) {
      this._channels[channel] = [];
    }
    return this._channels[channel].push(callback);
  };

  Bus.prototype.broadcast = function(channel, payload) {
    var i, len, ref, results, subscriber;
    if (this._channels.hasOwnProperty(channel)) {
      ref = this._channels[channel];
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        subscriber = ref[i];
        results.push(subscriber(payload));
      }
      return results;
    } else {
      return console.log("Bus: Unable to find " + channel + " channel.");
    }
  };

  Bus.prototype.set = function(name, variable) {
    return this._vault[name] = variable;
  };

  Bus.prototype.get = function(name) {
    if (!this._vault.hasOwnProperty(name)) {
      return console.log("Bus: Unable to find " + name + " in variable vault.");
    } else {
      return this._vault[name];
    }
  };

  return Bus;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnVzLmpzIiwic291cmNlcyI6WyJCdXMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxHQUFBO0VBQUE7O0FBY007RUFFVSxhQUFBOztJQUNSLElBQUMsQ0FBQSxTQUFELEdBQWE7SUFDYixJQUFDLENBQUEsTUFBRCxHQUFVO0VBRkY7O2dCQUlaLFNBQUEsR0FBVyxTQUFDLE9BQUQsRUFBVSxRQUFWO0lBQ1AsSUFBRyxDQUFJLElBQUMsQ0FBQSxTQUFTLENBQUMsY0FBWCxDQUEwQixPQUExQixDQUFQO01BQ0ksSUFBQyxDQUFBLFNBQVUsQ0FBQSxPQUFBLENBQVgsR0FBc0IsR0FEMUI7O1dBR0EsSUFBQyxDQUFBLFNBQVUsQ0FBQSxPQUFBLENBQVEsQ0FBQyxJQUFwQixDQUF5QixRQUF6QjtFQUpPOztnQkFNWCxTQUFBLEdBQVcsU0FBQyxPQUFELEVBQVUsT0FBVjtBQUNQLFFBQUE7SUFBQSxJQUFHLElBQUMsQ0FBQSxTQUFTLENBQUMsY0FBWCxDQUEwQixPQUExQixDQUFIO0FBQ0k7QUFBQTtXQUFBLHFDQUFBOztxQkFDSSxVQUFBLENBQVcsT0FBWDtBQURKO3FCQURKO0tBQUEsTUFBQTthQUdLLE9BQU8sQ0FBQyxHQUFSLENBQVksc0JBQUEsR0FBdUIsT0FBdkIsR0FBK0IsV0FBM0MsRUFITDs7RUFETzs7Z0JBTVgsR0FBQSxHQUFLLFNBQUMsSUFBRCxFQUFPLFFBQVA7V0FDRCxJQUFDLENBQUEsTUFBTyxDQUFBLElBQUEsQ0FBUixHQUFnQjtFQURmOztnQkFHTCxHQUFBLEdBQUssU0FBQyxJQUFEO0lBQ0QsSUFBRyxDQUFJLElBQUMsQ0FBQSxNQUFNLENBQUMsY0FBUixDQUF1QixJQUF2QixDQUFQO2FBQ0ksT0FBTyxDQUFDLEdBQVIsQ0FBWSxzQkFBQSxHQUF1QixJQUF2QixHQUE0QixxQkFBeEMsRUFESjtLQUFBLE1BQUE7QUFFSyxhQUFPLElBQUMsQ0FBQSxNQUFPLENBQUEsSUFBQSxFQUZwQjs7RUFEQyIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuXG5BIHB1Yi9zdWIgc3lzdGVtIGFuZCBzaGFyZWQgdmFyaWFibGUgZXhjaGFuZ2UgZm9yIFdvbGZDYWdlLlxuXG5AYXV0aG9yIERlc3RpbiBNb3VsdG9uXG5AZ2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9kZXN0aW5tb3VsdG9uL3dvbGZjYWdlXG5AbGljZW5zZSBNSVRcblxuU3Vic2NyaWJlIGFuZCBwdWJsaXNoIHRvIGEgY2hhbm5lbC5cblxuU2V0IGFuZCBnZXQgc2hhcmVkIHZhcmlhYmxlcy5cblxuIyMjXG5cbmNsYXNzIEJ1c1xuXG4gICAgY29uc3RydWN0b3I6KCktPlxuICAgICAgICBAX2NoYW5uZWxzID0ge31cbiAgICAgICAgQF92YXVsdCA9IHt9XG5cbiAgICBzdWJzY3JpYmU6IChjaGFubmVsLCBjYWxsYmFjayk9PlxuICAgICAgICBpZiBub3QgQF9jaGFubmVscy5oYXNPd25Qcm9wZXJ0eShjaGFubmVsKVxuICAgICAgICAgICAgQF9jaGFubmVsc1tjaGFubmVsXSA9IFtdXG5cbiAgICAgICAgQF9jaGFubmVsc1tjaGFubmVsXS5wdXNoKGNhbGxiYWNrKVxuXG4gICAgYnJvYWRjYXN0OiAoY2hhbm5lbCwgcGF5bG9hZCktPlxuICAgICAgICBpZiBAX2NoYW5uZWxzLmhhc093blByb3BlcnR5KGNoYW5uZWwpXG4gICAgICAgICAgICBmb3Igc3Vic2NyaWJlciBpbiBAX2NoYW5uZWxzW2NoYW5uZWxdXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcihwYXlsb2FkKVxuICAgICAgICBlbHNlIGNvbnNvbGUubG9nKFwiQnVzOiBVbmFibGUgdG8gZmluZCAje2NoYW5uZWx9IGNoYW5uZWwuXCIpXG5cbiAgICBzZXQ6IChuYW1lLCB2YXJpYWJsZSktPlxuICAgICAgICBAX3ZhdWx0W25hbWVdID0gdmFyaWFibGVcblxuICAgIGdldDogKG5hbWUpLT5cbiAgICAgICAgaWYgbm90IEBfdmF1bHQuaGFzT3duUHJvcGVydHkobmFtZSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQnVzOiBVbmFibGUgdG8gZmluZCAje25hbWV9IGluIHZhcmlhYmxlIHZhdWx0LlwiKVxuICAgICAgICBlbHNlIHJldHVybiBAX3ZhdWx0W25hbWVdIl19


/*

The DOM configuration for WolfCage.

@author Destin Moulton
@git https://github.com/destinmoulton/wolfcage
@license MIT

Component of the Wolfram Cellular Automata Generator (WolfCage)

Contains the settings for the DOM objects.

Holds ids and classes of relevant DOM objects.
 */
var DOM;

DOM = (function() {
  function DOM() {}

  DOM.ids = {
    'BOARD': {
      'CONTAINER': 'wolfcage-board',
      'MESSAGE_CONTAINER': 'wolfcage-generatemessage-container'
    },
    'WOLFCAGE': {
      'MAIN_CONTAINER': 'wolfcage-container'
    },
    'GENERATOR': {
      'CONTENT_CONTAINER': 'wolfcage-generator-board',
      'RULE_PREVIEW_CONTAINER': 'wolfcage-rules-preview-container',
      'RULE_DROPDOWN': 'wolfcage-generator-select-input',
      'RULE_GENERATE_BUTTON': 'wolfcage-generator-generate-button',
      'COLORPICKER_BUTTON': 'wolfcage-generator-colorpicker-button',
      'COLORPICKER_CONTAINER': 'wolfcage-colorpicker',
      'COLORPICKER_ACTIVE': 'wolfcage-colorpicker-active',
      'COLORPICKER_BORDER': 'wolfcage-colorpicker-border',
      'COLORPICKER_INACTIVE': 'wolfcage-colorpicker-inactive',
      'TEMPLATE_BOARD': 'tmpl-wolfcage-generator-board',
      'TEMPLATE_COLORPICKER': 'tmpl-wolfcage-generator-colorpicker',
      'TEMPLATE_MAIN_CONTAINER': 'tmpl-wolfcage-generator',
      'TEMPLATE_RULE_PREVIEW_CELL': 'tmpl-wolfcage-generator-preview-cell'
    },
    'TABS': {
      'CONTAINER': 'wolfcage-tab-container',
      'TEMPLATE': 'tmpl-wolfcage-tabs'
    },
    'THUMBNAILS': {
      'TEMPLATE_THUMBNAILS': 'tmpl-wolfcage-thumbnails'
    },
    'TOPROWEDITOR': {
      'BUTTON_GENERATE': 'rowed-button-generate',
      'BUTTON_RESET': 'rowed-button-resetrow',
      'EDITOR_CONTAINER': 'rowed-editor-container',
      'ROW_CONTAINER': 'rowed-slider-row-container',
      'SLIDER_CONTAINER': 'rowed-slider-container',
      'SLIDER': 'rowed-slider',
      'SLIDER_ARROW_LEFT': 'rowed-slider-arrow-left',
      'SLIDER_ARROW_RIGHT': 'rowed-slider-arrow-right',
      'TEMPLATE_TOPROWEDITOR': 'tmpl-wolfcage-toproweditor',
      'TEMPLATE_SLIDER_CELL': 'tmpl-rowed-slider-cell',
      'TEMPLATE_EDITOR_CELL': 'tmpl-rowed-editor-cell'
    }
  };

  DOM.classes = {
    'BOARD': {
      'CELL_ACTIVE_CLASS': 'wolfcage-board-cell-active',
      'CELL_BASE_CLASS': 'wolfcage-board-cell'
    },
    'GENERATOR': {
      'RULE_PREVIEW_CELL_ACTIVE': 'wolfcage-generator-preview-cell-active'
    },
    'TABS': {
      'ACTIVE': 'active'
    },
    'THUMBNAILS': {
      'THUMB_BOX': 'wolfcage-rulethumb-box'
    },
    'TOPROWEDITOR': {
      'EDITOR_CELL': 'rowed-editor-cell',
      'EDITOR_CELL_ACTIVE': 'rowed-editor-cell-active',
      'SLIDER_CELL_ACTIVE': 'wolfcage-board-cell-active'
    }
  };

  DOM.prefixes = {
    'BOARD': {
      'CELL': 'sb_'
    },
    'GENERATOR': {
      'RULE_PREVIEW_CELL': 'wolfcage-generator-preview-',
      'RULE_PREVIEW_DIGIT': 'wolfcage-generator-preview-digit-'
    },
    'TABS': {
      'TAB_PREFIX': 'wolfcage-tab-'
    },
    'TOPROWEDITOR': {
      'SLIDER_COL': 'rowed-slider-col-'
    }
  };

  DOM.elemById = function(section, element) {
    return document.getElementById(this.getID(section, element));
  };

  DOM.elemByPrefix = function(section, prefix, suffix) {
    return document.getElementById(this.getPrefix(section, prefix) + suffix);
  };

  DOM.getClass = function(section, element) {
    return this.classes[section][element];
  };

  DOM.getID = function(section, element) {
    if (!this.ids.hasOwnProperty(section)) {
      console.log("DOM::getID() - Unable to find `" + section + "`");
      return void 0;
    }
    if (!this.ids[section].hasOwnProperty(element)) {
      console.log("DOM::getID() - Unable to find `" + element + "`");
      return void 0;
    }
    return this.ids[section][element];
  };

  DOM.getPrefix = function(section, prefix) {
    return this.prefixes[section][prefix];
  };

  return DOM;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,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LElBQUMsQ0FBQSxPQUFRLENBQUEsT0FBQSxDQUFTLENBQUEsT0FBQTtFQURuQjs7RUFHVixHQUFDLENBQUEsS0FBRCxHQUFPLFNBQUMsT0FBRCxFQUFVLE9BQVY7SUFFSCxJQUFHLENBQUksSUFBQyxDQUFBLEdBQUcsQ0FBQyxjQUFMLENBQW9CLE9BQXBCLENBQVA7TUFDSSxPQUFPLENBQUMsR0FBUixDQUFZLGlDQUFBLEdBQWtDLE9BQWxDLEdBQTBDLEdBQXREO0FBQ0EsYUFBTyxPQUZYOztJQUlBLElBQUcsQ0FBSSxJQUFDLENBQUEsR0FBSSxDQUFBLE9BQUEsQ0FBUSxDQUFDLGNBQWQsQ0FBNkIsT0FBN0IsQ0FBUDtNQUNJLE9BQU8sQ0FBQyxHQUFSLENBQVksaUNBQUEsR0FBa0MsT0FBbEMsR0FBMEMsR0FBdEQ7QUFDQSxhQUFPLE9BRlg7O0FBSUEsV0FBTyxJQUFDLENBQUEsR0FBSSxDQUFBLE9BQUEsQ0FBUyxDQUFBLE9BQUE7RUFWbEI7O0VBWVAsR0FBQyxDQUFBLFNBQUQsR0FBVyxTQUFDLE9BQUQsRUFBVSxNQUFWO0FBQ1AsV0FBTyxJQUFDLENBQUEsUUFBUyxDQUFBLE9BQUEsQ0FBUyxDQUFBLE1BQUE7RUFEbkIiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcblxuVGhlIERPTSBjb25maWd1cmF0aW9uIGZvciBXb2xmQ2FnZS5cblxuQGF1dGhvciBEZXN0aW4gTW91bHRvblxuQGdpdCBodHRwczovL2dpdGh1Yi5jb20vZGVzdGlubW91bHRvbi93b2xmY2FnZVxuQGxpY2Vuc2UgTUlUXG5cbkNvbXBvbmVudCBvZiB0aGUgV29sZnJhbSBDZWxsdWxhciBBdXRvbWF0YSBHZW5lcmF0b3IgKFdvbGZDYWdlKVxuXG5Db250YWlucyB0aGUgc2V0dGluZ3MgZm9yIHRoZSBET00gb2JqZWN0cy5cblxuSG9sZHMgaWRzIGFuZCBjbGFzc2VzIG9mIHJlbGV2YW50IERPTSBvYmplY3RzLlxuIyMjXG5jbGFzcyBET01cbiAgICBAaWRzID0ge1xuICAgICAgICAnQk9BUkQnOntcbiAgICAgICAgICAgICdDT05UQUlORVInOid3b2xmY2FnZS1ib2FyZCcsXG4gICAgICAgICAgICAnTUVTU0FHRV9DT05UQUlORVInOid3b2xmY2FnZS1nZW5lcmF0ZW1lc3NhZ2UtY29udGFpbmVyJ1xuICAgICAgICB9LFxuICAgICAgICAnV09MRkNBR0UnOntcbiAgICAgICAgICAgICdNQUlOX0NPTlRBSU5FUic6J3dvbGZjYWdlLWNvbnRhaW5lcidcbiAgICAgICAgfSxcbiAgICAgICAgJ0dFTkVSQVRPUic6e1xuICAgICAgICAgICAgJ0NPTlRFTlRfQ09OVEFJTkVSJzond29sZmNhZ2UtZ2VuZXJhdG9yLWJvYXJkJyxcbiAgICAgICAgICAgICdSVUxFX1BSRVZJRVdfQ09OVEFJTkVSJzond29sZmNhZ2UtcnVsZXMtcHJldmlldy1jb250YWluZXInLFxuICAgICAgICAgICAgJ1JVTEVfRFJPUERPV04nOid3b2xmY2FnZS1nZW5lcmF0b3Itc2VsZWN0LWlucHV0JyxcbiAgICAgICAgICAgICdSVUxFX0dFTkVSQVRFX0JVVFRPTic6J3dvbGZjYWdlLWdlbmVyYXRvci1nZW5lcmF0ZS1idXR0b24nLFxuICAgICAgICAgICAgJ0NPTE9SUElDS0VSX0JVVFRPTic6J3dvbGZjYWdlLWdlbmVyYXRvci1jb2xvcnBpY2tlci1idXR0b24nLFxuICAgICAgICAgICAgJ0NPTE9SUElDS0VSX0NPTlRBSU5FUic6J3dvbGZjYWdlLWNvbG9ycGlja2VyJyxcbiAgICAgICAgICAgICdDT0xPUlBJQ0tFUl9BQ1RJVkUnOid3b2xmY2FnZS1jb2xvcnBpY2tlci1hY3RpdmUnLFxuICAgICAgICAgICAgJ0NPTE9SUElDS0VSX0JPUkRFUic6J3dvbGZjYWdlLWNvbG9ycGlja2VyLWJvcmRlcicsXG4gICAgICAgICAgICAnQ09MT1JQSUNLRVJfSU5BQ1RJVkUnOid3b2xmY2FnZS1jb2xvcnBpY2tlci1pbmFjdGl2ZScsXG4gICAgICAgICAgICAnVEVNUExBVEVfQk9BUkQnOid0bXBsLXdvbGZjYWdlLWdlbmVyYXRvci1ib2FyZCcsXG4gICAgICAgICAgICAnVEVNUExBVEVfQ09MT1JQSUNLRVInOid0bXBsLXdvbGZjYWdlLWdlbmVyYXRvci1jb2xvcnBpY2tlcicsXG4gICAgICAgICAgICAnVEVNUExBVEVfTUFJTl9DT05UQUlORVInOid0bXBsLXdvbGZjYWdlLWdlbmVyYXRvcicsXG4gICAgICAgICAgICAnVEVNUExBVEVfUlVMRV9QUkVWSUVXX0NFTEwnOid0bXBsLXdvbGZjYWdlLWdlbmVyYXRvci1wcmV2aWV3LWNlbGwnLFxuICAgICAgICB9LFxuICAgICAgICAnVEFCUyc6e1xuICAgICAgICAgICAgJ0NPTlRBSU5FUic6J3dvbGZjYWdlLXRhYi1jb250YWluZXInLFxuICAgICAgICAgICAgJ1RFTVBMQVRFJzondG1wbC13b2xmY2FnZS10YWJzJ1xuICAgICAgICB9LFxuICAgICAgICAnVEhVTUJOQUlMUyc6e1xuICAgICAgICAgICAgJ1RFTVBMQVRFX1RIVU1CTkFJTFMnOid0bXBsLXdvbGZjYWdlLXRodW1ibmFpbHMnLFxuICAgICAgICB9LFxuICAgICAgICAnVE9QUk9XRURJVE9SJzp7XG4gICAgICAgICAgICAnQlVUVE9OX0dFTkVSQVRFJzogJ3Jvd2VkLWJ1dHRvbi1nZW5lcmF0ZScsXG4gICAgICAgICAgICAnQlVUVE9OX1JFU0VUJzogJ3Jvd2VkLWJ1dHRvbi1yZXNldHJvdycsXG4gICAgICAgICAgICAnRURJVE9SX0NPTlRBSU5FUic6ICdyb3dlZC1lZGl0b3ItY29udGFpbmVyJyxcbiAgICAgICAgICAgICdST1dfQ09OVEFJTkVSJzogJ3Jvd2VkLXNsaWRlci1yb3ctY29udGFpbmVyJyxcbiAgICAgICAgICAgICdTTElERVJfQ09OVEFJTkVSJzogJ3Jvd2VkLXNsaWRlci1jb250YWluZXInLFxuICAgICAgICAgICAgJ1NMSURFUic6J3Jvd2VkLXNsaWRlcicsXG4gICAgICAgICAgICAnU0xJREVSX0FSUk9XX0xFRlQnOidyb3dlZC1zbGlkZXItYXJyb3ctbGVmdCcsXG4gICAgICAgICAgICAnU0xJREVSX0FSUk9XX1JJR0hUJzoncm93ZWQtc2xpZGVyLWFycm93LXJpZ2h0JyxcbiAgICAgICAgICAgICdURU1QTEFURV9UT1BST1dFRElUT1InOiAndG1wbC13b2xmY2FnZS10b3Byb3dlZGl0b3InLFxuICAgICAgICAgICAgJ1RFTVBMQVRFX1NMSURFUl9DRUxMJzondG1wbC1yb3dlZC1zbGlkZXItY2VsbCcsXG4gICAgICAgICAgICAnVEVNUExBVEVfRURJVE9SX0NFTEwnOid0bXBsLXJvd2VkLWVkaXRvci1jZWxsJ1xuICAgICAgICB9LFxuICAgIH1cblxuICAgIEBjbGFzc2VzID0ge1xuICAgICAgICAnQk9BUkQnOntcbiAgICAgICAgICAgICdDRUxMX0FDVElWRV9DTEFTUyc6J3dvbGZjYWdlLWJvYXJkLWNlbGwtYWN0aXZlJyxcbiAgICAgICAgICAgICdDRUxMX0JBU0VfQ0xBU1MnOid3b2xmY2FnZS1ib2FyZC1jZWxsJyxcbiAgICAgICAgfSxcbiAgICAgICAgJ0dFTkVSQVRPUic6e1xuICAgICAgICAgICAgJ1JVTEVfUFJFVklFV19DRUxMX0FDVElWRSc6J3dvbGZjYWdlLWdlbmVyYXRvci1wcmV2aWV3LWNlbGwtYWN0aXZlJ1xuICAgICAgICB9LFxuICAgICAgICAnVEFCUyc6e1xuICAgICAgICAgICAgJ0FDVElWRSc6J2FjdGl2ZSdcbiAgICAgICAgfSxcbiAgICAgICAgJ1RIVU1CTkFJTFMnOntcbiAgICAgICAgICAgICdUSFVNQl9CT1gnOid3b2xmY2FnZS1ydWxldGh1bWItYm94JyxcbiAgICAgICAgfSxcbiAgICAgICAgJ1RPUFJPV0VESVRPUic6e1xuICAgICAgICAgICAgJ0VESVRPUl9DRUxMJzoncm93ZWQtZWRpdG9yLWNlbGwnLFxuICAgICAgICAgICAgJ0VESVRPUl9DRUxMX0FDVElWRSc6J3Jvd2VkLWVkaXRvci1jZWxsLWFjdGl2ZScsXG4gICAgICAgICAgICAnU0xJREVSX0NFTExfQUNUSVZFJzond29sZmNhZ2UtYm9hcmQtY2VsbC1hY3RpdmUnXG4gICAgICAgIH0sXG4gICAgfVxuXG4gICAgQHByZWZpeGVzID0ge1xuICAgICAgICAnQk9BUkQnOntcbiAgICAgICAgICAgICdDRUxMJzonc2JfJ1xuICAgICAgICB9LFxuICAgICAgICAnR0VORVJBVE9SJzp7XG4gICAgICAgICAgICAnUlVMRV9QUkVWSUVXX0NFTEwnOid3b2xmY2FnZS1nZW5lcmF0b3ItcHJldmlldy0nLFxuICAgICAgICAgICAgJ1JVTEVfUFJFVklFV19ESUdJVCc6J3dvbGZjYWdlLWdlbmVyYXRvci1wcmV2aWV3LWRpZ2l0LSdcbiAgICAgICAgfSxcbiAgICAgICAgJ1RBQlMnOntcbiAgICAgICAgICAgICdUQUJfUFJFRklYJzond29sZmNhZ2UtdGFiLSdcbiAgICAgICAgfSxcbiAgICAgICAgJ1RPUFJPV0VESVRPUic6e1xuICAgICAgICAgICAgJ1NMSURFUl9DT0wnOidyb3dlZC1zbGlkZXItY29sLSdcbiAgICAgICAgfSxcbiAgICB9XG5cbiAgICAjXG4gICAgIyBHZXQgYW4gZWxlbWVudCBieSBpZFxuICAgICNcbiAgICBAZWxlbUJ5SWQ6KHNlY3Rpb24sIGVsZW1lbnQpIC0+XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChAZ2V0SUQoc2VjdGlvbiwgZWxlbWVudCkpXG5cbiAgICBAZWxlbUJ5UHJlZml4OihzZWN0aW9uLCBwcmVmaXgsIHN1ZmZpeCkgLT5cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEBnZXRQcmVmaXgoc2VjdGlvbiwgcHJlZml4KSArIHN1ZmZpeClcblxuICAgIEBnZXRDbGFzczooc2VjdGlvbiwgZWxlbWVudCkgLT5cbiAgICAgICAgcmV0dXJuIEBjbGFzc2VzW3NlY3Rpb25dW2VsZW1lbnRdXG5cbiAgICBAZ2V0SUQ6KHNlY3Rpb24sIGVsZW1lbnQpIC0+XG5cbiAgICAgICAgaWYgbm90IEBpZHMuaGFzT3duUHJvcGVydHkoc2VjdGlvbilcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRE9NOjpnZXRJRCgpIC0gVW5hYmxlIHRvIGZpbmQgYFwiK3NlY3Rpb24rXCJgXCIpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG5cbiAgICAgICAgaWYgbm90IEBpZHNbc2VjdGlvbl0uaGFzT3duUHJvcGVydHkoZWxlbWVudClcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRE9NOjpnZXRJRCgpIC0gVW5hYmxlIHRvIGZpbmQgYFwiK2VsZW1lbnQrXCJgXCIpXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICAgICAgICBcbiAgICAgICAgcmV0dXJuIEBpZHNbc2VjdGlvbl1bZWxlbWVudF1cbiAgICBcbiAgICBAZ2V0UHJlZml4OihzZWN0aW9uLCBwcmVmaXgpLT5cbiAgICAgICAgcmV0dXJuIEBwcmVmaXhlc1tzZWN0aW9uXVtwcmVmaXhdIl19


/*

The Cellular Board for WolfCage.

@author Destin Moulton
@git https://github.com/destinmoulton/wolfcage
@license MIT

Generate a cellular automata board based on a passed rule.
 */
var Board;

Board = (function() {
  function Board(BUS) {
    this.BUS = BUS;
    this._boardNoCellsWide = 0;
    this._boardNoCellsHigh = 0;
    this._boardCellWidthPx = 5;
    this._boardCellHeightPx = 5;
    this._currentRow = 1;
    this._rootRowBinary = [];
    this._currentCells = [];
    this._RuleMatcher = new RuleMatcher(BUS);
    this._setupColorChangeEvents();
  }

  Board.prototype.buildBoard = function(rootRowBinary, noCellsWide, noSectionsHigh) {
    this._boardElem = document.getElementById(DOM.getID('BOARD', 'CONTAINER'));
    this._messageElem = document.getElementById(DOM.getID('BOARD', 'MESSAGE_CONTAINER'));
    this._rootRowBinary = rootRowBinary;
    this._RuleMatcher.setCurrentRule(this.BUS.get('currentruledecimal'));
    this._boardNoCellsWide = noCellsWide;
    this._boardNoCellsHigh = noSectionsHigh;
    this._boardElem.innerWidth = noCellsWide * this._boardCellWidthPx;
    this._boardElem.innerHeight = noSectionsHigh * this._boardCellHeightPx;
    this._boardElem.innerHtml = "";
    this._boardElem.style.display = "none";
    this._currentRow = 1;
    this._messageElem.style.display = "block";
    return setTimeout((function(_this) {
      return function() {
        _this._generateRows();
        _this._messageElem.style.display = "none";
        return _this._boardElem.style.display = "block";
      };
    })(this), 500);
  };

  Board.prototype._setupColorChangeEvents = function() {
    this.BUS.subscribe('change.cell.style.activebackground', (function(_this) {
      return function(hexColor) {
        _this._changeCellActiveBackroundColor(hexColor);
      };
    })(this));
    this.BUS.subscribe('change.cell.style.bordercolor', (function(_this) {
      return function(hexColor) {
        return _this._changeCellBorderColor(hexColor);
      };
    })(this));
    return this.BUS.subscribe('change.cell.style.inactivebackground', (function(_this) {
      return function(hexColor) {
        return _this._changeCellInactiveBackgroundColor(hexColor);
      };
    })(this));
  };

  Board.prototype._generateRows = function() {
    var i, ref, results, row;
    this._buildTopRow();
    results = [];
    for (row = i = 2, ref = this._boardNoCellsHigh; 2 <= ref ? i <= ref : i >= ref; row = 2 <= ref ? ++i : --i) {
      this._currentRow = row;
      results.push(this._buildRow(row));
    }
    return results;
  };

  Board.prototype._buildRow = function(row) {
    var col, i, oneIndex, ref, twoIndex, zeroIndex;
    for (col = i = 1, ref = this._boardNoCellsWide; 1 <= ref ? i <= ref : i >= ref; col = 1 <= ref ? ++i : --i) {
      zeroIndex = this._currentCells[row - 1][col - 1];
      if (zeroIndex === void 0) {
        zeroIndex = this._currentCells[row - 1][this._boardNoCellsWide];
      }
      oneIndex = this._currentCells[row - 1][col];
      twoIndex = this._currentCells[row - 1][col + 1];
      if (twoIndex === void 0) {
        twoIndex = this._currentCells[row - 1][1];
      }
      if (this._RuleMatcher.match(zeroIndex, oneIndex, twoIndex) === 0) {
        this._getCellHtml(row, col, false);
      } else {
        this._getCellHtml(row, col, true);
      }
    }
    return this._currentRow++;
  };

  Board.prototype._buildTopRow = function() {
    var cell, col, i, ref;
    for (col = i = 1, ref = this._boardNoCellsWide; 1 <= ref ? i <= ref : i >= ref; col = 1 <= ref ? ++i : --i) {
      cell = this._rootRowBinary[col];
      if (cell === 1) {
        this._getCellHtml(this._currentRow, col, true);
      } else {
        this._getCellHtml(this._currentRow, col, false);
      }
    }
    return this._currentRow++;
  };

  Board.prototype._getCellHtml = function(row, col, active) {
    var tmpCell, tmpClass, tmpID, tmpLeftPx, tmpTopPx;
    if (!this._currentCells[row]) {
      this._currentCells[row] = [];
    }
    this._currentCells[row][col] = active ? 1 : 0;
    tmpID = DOM.getPrefix('BOARD', 'CELL') + this._currentRow + "_" + col;
    tmpLeftPx = (col - 1) * this._boardCellWidthPx;
    tmpTopPx = (row - 1) * this._boardCellHeightPx;
    tmpCell = document.createElement('div');
    tmpCell.setAttribute('id', tmpID);
    tmpCell.style.top = tmpTopPx + "px";
    tmpCell.style.left = tmpLeftPx + "px";
    tmpClass = DOM.getClass('BOARD', 'CELL_BASE_CLASS');
    if (active) {
      tmpCell.style.backgroundColor = this.BUS.get('board.cell.style.activeBackgroundColor');
      tmpClass += " " + (DOM.getClass('BOARD', 'CELL_ACTIVE_CLASS'));
    } else {
      tmpCell.style.backgroundColor = this.BUS.get('board.cell.style.inactiveBackgroundColor');
    }
    tmpCell.setAttribute('class', "" + tmpClass);
    tmpCell.style.borderColor = this.BUS.get('board.cell.style.borderColor');
    return this._boardElem.appendChild(tmpCell);
  };

  Board.prototype._changeCellActiveBackroundColor = function(hexColor) {
    var cell, cellsElems, i, len, results;
    this.BUS.set('board.cell.style.activeBackgroundColor', hexColor);
    cellsElems = document.querySelectorAll('.' + DOM.getClass('BOARD', 'CELL_ACTIVE_CLASS'));
    results = [];
    for (i = 0, len = cellsElems.length; i < len; i++) {
      cell = cellsElems[i];
      results.push(cell.style.backgroundColor = hexColor);
    }
    return results;
  };

  Board.prototype._changeCellBorderColor = function(hexColor) {
    var cell, cellsElems, i, len, results;
    this.BUS.set('board.cell.style.borderColor', hexColor);
    cellsElems = document.querySelectorAll('.' + DOM.getClass('BOARD', 'CELL_BASE_CLASS'));
    results = [];
    for (i = 0, len = cellsElems.length; i < len; i++) {
      cell = cellsElems[i];
      results.push(cell.style.borderColor = hexColor);
    }
    return results;
  };

  Board.prototype._changeCellInactiveBackgroundColor = function(hexColor) {
    var cell, cellsElems, i, len, results;
    this.BUS.set('board.cell.style.inactiveBackgroundColor', hexColor);
    cellsElems = document.querySelectorAll('.' + DOM.getClass('BOARD', 'CELL_BASE_CLASS'));
    results = [];
    for (i = 0, len = cellsElems.length; i < len; i++) {
      cell = cellsElems[i];
      if (!cell.classList.contains(DOM.getClass('BOARD', 'CELL_ACTIVE_CLASS'))) {
        results.push(cell.style.backgroundColor = hexColor);
      } else {
        results.push(void 0);
      }
    }
    return results;
  };

  return Board;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQm9hcmQuanMiLCJzb3VyY2VzIjpbIkJvYXJkLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7QUFBQSxJQUFBOztBQWFNO0VBTVcsZUFBQyxHQUFEO0lBQ1QsSUFBQyxDQUFBLEdBQUQsR0FBTztJQUVQLElBQUMsQ0FBQSxpQkFBRCxHQUFxQjtJQUNyQixJQUFDLENBQUEsaUJBQUQsR0FBcUI7SUFDckIsSUFBQyxDQUFBLGlCQUFELEdBQXFCO0lBQ3JCLElBQUMsQ0FBQSxrQkFBRCxHQUFzQjtJQUV0QixJQUFDLENBQUEsV0FBRCxHQUFlO0lBRWYsSUFBQyxDQUFBLGNBQUQsR0FBa0I7SUFDbEIsSUFBQyxDQUFBLGFBQUQsR0FBaUI7SUFDakIsSUFBQyxDQUFBLFlBQUQsR0FBb0IsSUFBQSxXQUFBLENBQVksR0FBWjtJQUVwQixJQUFDLENBQUEsdUJBQUQsQ0FBQTtFQWRTOztrQkFxQmIsVUFBQSxHQUFZLFNBQUMsYUFBRCxFQUFnQixXQUFoQixFQUE2QixjQUE3QjtJQUVSLElBQUMsQ0FBQSxVQUFELEdBQWMsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsR0FBRyxDQUFDLEtBQUosQ0FBVSxPQUFWLEVBQW1CLFdBQW5CLENBQXhCO0lBQ2QsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsR0FBRyxDQUFDLEtBQUosQ0FBVSxPQUFWLEVBQW1CLG1CQUFuQixDQUF4QjtJQUVoQixJQUFDLENBQUEsY0FBRCxHQUFrQjtJQUVsQixJQUFDLENBQUEsWUFBWSxDQUFDLGNBQWQsQ0FBNkIsSUFBQyxDQUFBLEdBQUcsQ0FBQyxHQUFMLENBQVMsb0JBQVQsQ0FBN0I7SUFFQSxJQUFDLENBQUEsaUJBQUQsR0FBcUI7SUFDckIsSUFBQyxDQUFBLGlCQUFELEdBQXFCO0lBQ3JCLElBQUMsQ0FBQSxVQUFVLENBQUMsVUFBWixHQUF5QixXQUFBLEdBQWMsSUFBQyxDQUFBO0lBQ3hDLElBQUMsQ0FBQSxVQUFVLENBQUMsV0FB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S0FBSyxDQUFDLFdBQVgsR0FBeUI7QUFEN0I7O0VBSm9COztrQkFVeEIsa0NBQUEsR0FBb0MsU0FBQyxRQUFEO0FBQ2hDLFFBQUE7SUFBQSxJQUFDLENBQUEsR0FBRyxDQUFDLEdBQUwsQ0FBUywwQ0FBVCxFQUFxRCxRQUFyRDtJQUNBLFVBQUEsR0FBYSxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsR0FBQSxHQUFNLEdBQUcsQ0FBQyxRQUFKLENBQWEsT0FBYixFQUFzQixpQkFBdEIsQ0FBaEM7QUFFYjtTQUFBLDRDQUFBOztNQUNJLElBQUcsQ0FBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQWYsQ0FBd0IsR0FBRyxDQUFDLFFBQUosQ0FBYSxPQUFiLEVBQXNCLG1CQUF0QixDQUF4QixDQUFQO3FCQUNJLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBWCxHQUE2QixVQURqQztPQUFBLE1BQUE7NkJBQUE7O0FBREo7O0VBSmdDIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG5cblRoZSBDZWxsdWxhciBCb2FyZCBmb3IgV29sZkNhZ2UuXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vd29sZmNhZ2VcbkBsaWNlbnNlIE1JVFxuXG5HZW5lcmF0ZSBhIGNlbGx1bGFyIGF1dG9tYXRhIGJvYXJkIGJhc2VkIG9uIGEgcGFzc2VkIHJ1bGUuXG5cbiMjI1xuXG5cbmNsYXNzIEJvYXJkXG5cbiAgICAjXG4gICAgIyBDb25zdHJ1Y3RvciBmb3IgdGhlIEJvYXJkIGNsYXNzLlxuICAgICMgSW5pdGlhbGl6ZSB0aGUgc2hhcmVkIHZhcmlhYmxlcyBmb3IgdGhlIGJvYXJkLlxuICAgICMgXG4gICAgY29uc3RydWN0b3I6IChCVVMpLT5cbiAgICAgICAgQEJVUyA9IEJVU1xuXG4gICAgICAgIEBfYm9hcmROb0NlbGxzV2lkZSA9IDBcbiAgICAgICAgQF9ib2FyZE5vQ2VsbHNIaWdoID0gMFxuICAgICAgICBAX2JvYXJkQ2VsbFdpZHRoUHggPSA1XG4gICAgICAgIEBfYm9hcmRDZWxsSGVpZ2h0UHggPSA1XG5cbiAgICAgICAgQF9jdXJyZW50Um93ID0gMVxuICAgICAgICBcbiAgICAgICAgQF9yb290Um93QmluYXJ5ID0gW11cbiAgICAgICAgQF9jdXJyZW50Q2VsbHMgPSBbXVxuICAgICAgICBAX1J1bGVNYXRjaGVyID0gbmV3IFJ1bGVNYXRjaGVyKEJVUylcblxuICAgICAgICBAX3NldHVwQ29sb3JDaGFuZ2VFdmVudHMoKVxuICAgICAgICBcbiAgICAjXG4gICAgIyBCdWlsZCB0aGUgYm9hcmQuXG4gICAgIyBUYWtlIGEgYmluYXJ5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByb290L3RvcCByb3cgYW5kXG4gICAgIyB0aGVuIGdlbmVyYXRlIHRoZSBjZWxscy5cbiAgICAjIFxuICAgIGJ1aWxkQm9hcmQ6IChyb290Um93QmluYXJ5LCBub0NlbGxzV2lkZSwgbm9TZWN0aW9uc0hpZ2gpIC0+XG4gICAgICAgICMgU2VsZWN0IGxvY2FsIGpRdWVyeSBET00gb2JqZWN0c1xuICAgICAgICBAX2JvYXJkRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKERPTS5nZXRJRCgnQk9BUkQnLCAnQ09OVEFJTkVSJykpO1xuICAgICAgICBAX21lc3NhZ2VFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRE9NLmdldElEKCdCT0FSRCcsICdNRVNTQUdFX0NPTlRBSU5FUicpKTtcbiAgICAgICAgXG4gICAgICAgIEBfcm9vdFJvd0JpbmFyeSA9IHJvb3RSb3dCaW5hcnlcbiAgICAgICAgXG4gICAgICAgIEBfUnVsZU1hdGNoZXIuc2V0Q3VycmVudFJ1bGUoQEJVUy5nZXQoJ2N1cnJlbnRydWxlZGVjaW1hbCcpKSBcblxuICAgICAgICBAX2JvYXJkTm9DZWxsc1dpZGUgPSBub0NlbGxzV2lkZVxuICAgICAgICBAX2JvYXJkTm9DZWxsc0hpZ2ggPSBub1NlY3Rpb25zSGlnaFxuICAgICAgICBAX2JvYXJkRWxlbS5pbm5lcldpZHRoID0gbm9DZWxsc1dpZGUgKiBAX2JvYXJkQ2VsbFdpZHRoUHhcbiAgICAgICAgQF9ib2FyZEVsZW0uaW5uZXJIZWlnaHQgPSBub1NlY3Rpb25zSGlnaCAqIEBfYm9hcmRDZWxsSGVpZ2h0UHhcblxuICAgICAgICAjIENsZWFyIHRoZSBib2FyZFxuICAgICAgICBAX2JvYXJkRWxlbS5pbm5lckh0bWwgPSBcIlwiXG5cbiAgICAgICAgQF9ib2FyZEVsZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXG4gICAgICAgIEBfY3VycmVudFJvdyA9IDFcblxuICAgICAgICAjIFNob3cgdGhlIGdlbmVyYXRpbmcgbWVzc2FnZVxuICAgICAgICBAX21lc3NhZ2VFbGVtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICAgICAgc2V0VGltZW91dCg9PlxuICAgICAgICAgICAgIyBHZW5lcmF0ZSB0aGUgcm93c1xuICAgICAgICAgICAgQF9nZW5lcmF0ZVJvd3MoKVxuICAgICAgICAgICAgQF9tZXNzYWdlRWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcbiAgICAgICAgICAgIEBfYm9hcmRFbGVtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICAgICAgLDUwMClcblxuXG4gICAgI1xuICAgICMgU2V0IHRoZSBjaGFuZ2UgYmFja2dyb3VuZC9ib3JkZXIgY29sb3IgZXZlbnRzXG4gICAgI1xuICAgIF9zZXR1cENvbG9yQ2hhbmdlRXZlbnRzOigpLT5cbiAgICAgICAgQEJVUy5zdWJzY3JpYmUoJ2NoYW5nZS5jZWxsLnN0eWxlLmFjdGl2ZWJhY2tncm91bmQnLFxuICAgICAgICAgICAgKGhleENvbG9yKT0+XG4gICAgICAgICAgICAgICAgQF9jaGFuZ2VDZWxsQWN0aXZlQmFja3JvdW5kQ29sb3IoaGV4Q29sb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIClcblxuICAgICAgICBAQlVTLnN1YnNjcmliZSgnY2hhbmdlLmNlbGwuc3R5bGUuYm9yZGVyY29sb3InLFxuICAgICAgICAgICAgKGhleENvbG9yKT0+XG4gICAgICAgICAgICAgICAgQF9jaGFuZ2VDZWxsQm9yZGVyQ29sb3IoaGV4Q29sb3IpXG4gICAgICAgIClcblxuICAgICAgICBAQlVTLnN1YnNjcmliZSgnY2hhbmdlLmNlbGwuc3R5bGUuaW5hY3RpdmViYWNrZ3JvdW5kJyxcbiAgICAgICAgICAgIChoZXhDb2xvcik9PlxuICAgICAgICAgICAgICAgIEBfY2hhbmdlQ2VsbEluYWN0aXZlQmFja2dyb3VuZENvbG9yKGhleENvbG9yKVxuICAgICAgICApXG5cbiAgICAjXG4gICAgIyBHZW5lcmF0ZSB0aGUgcm93cyBpbiB0aGUgYm9hcmRcbiAgICAjIFxuICAgIF9nZW5lcmF0ZVJvd3M6KCktPlxuICAgICAgICBAX2J1aWxkVG9wUm93KClcblxuICAgICAgICAjIFN0YXJ0IGF0IHRoZSAybmQgcm93ICh0aGUgZmlyc3Qvcm9vdCByb3cgaXMgYWxyZWFkeSBzZXQpXG4gICAgICAgIGZvciByb3cgaW4gWzIuLkBfYm9hcmROb0NlbGxzSGlnaF1cbiAgICAgICAgICAgIEBfY3VycmVudFJvdyA9IHJvd1xuICAgICAgICAgICAgQF9idWlsZFJvdyhyb3cpXG4gICAgICAgIFxuXG4gICAgI1xuICAgICMgQWRkIHRoZSBibG9ja3MgdG8gYSByb3dcbiAgICAjIFxuICAgIF9idWlsZFJvdzogKHJvdykgLT5cblxuICAgICAgICAjIExvb3Agb3ZlciBlYWNoIGNvbHVtbiBpbiB0aGUgY3VycmVudCByb3dcbiAgICAgICAgZm9yIGNvbCBpbiBbMS4uQF9ib2FyZE5vQ2VsbHNXaWRlXVxuICAgICAgICAgICAgemVyb0luZGV4ID0gQF9jdXJyZW50Q2VsbHNbcm93LTFdW2NvbC0xXVxuICAgICAgICAgICAgaWYgemVyb0luZGV4IGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICMgV3JhcCB0byB0aGUgZW5kIG9mIHRoZSByb3dcbiAgICAgICAgICAgICAgICAjIHdoZW4gYXQgdGhlIGJlZ2lubmluZ1xuICAgICAgICAgICAgICAgIHplcm9JbmRleCA9IEBfY3VycmVudENlbGxzW3Jvdy0xXVtAX2JvYXJkTm9DZWxsc1dpZGVdXG4gICAgICAgICAgICBvbmVJbmRleCA9IEBfY3VycmVudENlbGxzW3Jvdy0xXVtjb2xdXG4gICAgICAgICAgICB0d29JbmRleCA9IEBfY3VycmVudENlbGxzW3Jvdy0xXVtjb2wrMV1cbiAgICAgICAgICAgIGlmIHR3b0luZGV4IGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICMgV3JhcCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSByb3dcbiAgICAgICAgICAgICAgICAjIHdoZW4gdGhlIGVuZCBpcyByZWFjaGVkXG4gICAgICAgICAgICAgICAgdHdvSW5kZXggPSBAX2N1cnJlbnRDZWxsc1tyb3ctMV1bMV1cblxuICAgICAgICAgICAgIyBEZXRlcm1pbmUgd2hldGhlciB0aGUgYmxvY2sgc2hvdWxkIGJlIHNldCBvciBub3RcbiAgICAgICAgICAgIGlmIEBfUnVsZU1hdGNoZXIubWF0Y2goemVyb0luZGV4LCBvbmVJbmRleCwgdHdvSW5kZXgpIGlzIDBcbiAgICAgICAgICAgICAgICBAX2dldENlbGxIdG1sKHJvdywgY29sLCBmYWxzZSlcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBAX2dldENlbGxIdG1sKHJvdywgY29sLCB0cnVlKVxuXG4gICAgICAgIEBfY3VycmVudFJvdysrXG4gICAgICAgIFxuXG4gICAgI1xuICAgICMgQWRkIGNlbGxzIHRvIHRoZSByb290L3RvcCByb3dcbiAgICAjIFxuICAgIF9idWlsZFRvcFJvdzogLT5cblxuICAgICAgICAjIEJ1aWxkIHRoZSB0b3Agcm93IGZyb20gdGhlIHJvb3Qgcm93IGJpbmFyeVxuICAgICAgICAjICAgdGhpcyBpcyBkZWZpbmVkIGJ5IHRoZSByb290IHJvdyBlZGl0b3JcbiAgICAgICAgZm9yIGNvbCBpbiBbMS4uQF9ib2FyZE5vQ2VsbHNXaWRlXVxuICAgICAgICAgICAgY2VsbCA9IEBfcm9vdFJvd0JpbmFyeVtjb2xdXG4gICAgICAgICAgICBpZiBjZWxsIGlzIDFcbiAgICAgICAgICAgICAgICBAX2dldENlbGxIdG1sKEBfY3VycmVudFJvdywgY29sLCB0cnVlKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIEBfZ2V0Q2VsbEh0bWwoQF9jdXJyZW50Um93LCBjb2wsIGZhbHNlKVxuICAgICAgICBAX2N1cnJlbnRSb3crK1xuXG4gICAgI1xuICAgICMgR2V0IHRoZSBjZWxsIGh0bWxcbiAgICAjIFxuICAgIF9nZXRDZWxsSHRtbDogKHJvdywgY29sLCBhY3RpdmUpLT5cbiAgICAgICAgIyBBZGQgdGhlIGNlbGwgc3RhdGUgdG8gdGhlIGN1cnJlbnQgYXJyYXlcbiAgICAgICAgaWYgIUBfY3VycmVudENlbGxzW3Jvd11cbiAgICAgICAgICAgIEBfY3VycmVudENlbGxzW3Jvd10gPSBbXVxuICAgICAgICBAX2N1cnJlbnRDZWxsc1tyb3ddW2NvbF0gPSBpZiBhY3RpdmUgdGhlbiAxIGVsc2UgMFxuXG4gICAgICAgIHRtcElEID0gRE9NLmdldFByZWZpeCgnQk9BUkQnLCdDRUxMJykgKyBAX2N1cnJlbnRSb3cgKyBcIl9cIiArIGNvbFxuICAgICAgICB0bXBMZWZ0UHggPSAoY29sLTEpKkBfYm9hcmRDZWxsV2lkdGhQeFxuICAgICAgICB0bXBUb3BQeCA9IChyb3ctMSkqQF9ib2FyZENlbGxIZWlnaHRQeFxuXG4gICAgICAgIHRtcENlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgICB0bXBDZWxsLnNldEF0dHJpYnV0ZSgnaWQnLCB0bXBJRClcbiAgICAgICAgdG1wQ2VsbC5zdHlsZS50b3AgPSB0bXBUb3BQeCArIFwicHhcIlxuICAgICAgICB0bXBDZWxsLnN0eWxlLmxlZnQgPSB0bXBMZWZ0UHggKyBcInB4XCJcbiAgICAgICAgIyBJbmxpbmUgQ1NTIGZvciB0aGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGNlbGxcblxuICAgICAgICB0bXBDbGFzcyA9IERPTS5nZXRDbGFzcygnQk9BUkQnLCAnQ0VMTF9CQVNFX0NMQVNTJylcbiAgICAgICAgaWYgYWN0aXZlXG4gICAgICAgICAgICB0bXBDZWxsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IEBCVVMuZ2V0KCdib2FyZC5jZWxsLnN0eWxlLmFjdGl2ZUJhY2tncm91bmRDb2xvcicpXG4gICAgICAgICAgICB0bXBDbGFzcyArPSBcIiAjeyBET00uZ2V0Q2xhc3MoJ0JPQVJEJywgJ0NFTExfQUNUSVZFX0NMQVNTJykgfVwiXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRtcENlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gQEJVUy5nZXQoJ2JvYXJkLmNlbGwuc3R5bGUuaW5hY3RpdmVCYWNrZ3JvdW5kQ29sb3InKVxuXG4gICAgICAgIHRtcENlbGwuc2V0QXR0cmlidXRlKCdjbGFzcycsIFwiI3t0bXBDbGFzc31cIilcbiAgICAgICAgXG4gICAgICAgIHRtcENlbGwuc3R5bGUuYm9yZGVyQ29sb3IgPSBAQlVTLmdldCgnYm9hcmQuY2VsbC5zdHlsZS5ib3JkZXJDb2xvcicpXG4gICAgICAgIEBfYm9hcmRFbGVtLmFwcGVuZENoaWxkKHRtcENlbGwpO1xuICAgIFxuICAgICNcbiAgICAjIENoYW5nZSB0aGUgY29sb3Igb2YgdGhlIGNlbGxzXG4gICAgI1xuICAgIF9jaGFuZ2VDZWxsQWN0aXZlQmFja3JvdW5kQ29sb3I6IChoZXhDb2xvciktPlxuICAgICAgICBAQlVTLnNldCgnYm9hcmQuY2VsbC5zdHlsZS5hY3RpdmVCYWNrZ3JvdW5kQ29sb3InLCBoZXhDb2xvcilcbiAgICAgICAgY2VsbHNFbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgRE9NLmdldENsYXNzKCdCT0FSRCcsICdDRUxMX0FDVElWRV9DTEFTUycpKVxuICAgICAgICBcbiAgICAgICAgZm9yIGNlbGwgaW4gY2VsbHNFbGVtc1xuICAgICAgICAgICAgY2VsbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBoZXhDb2xvclxuXG4gICAgI1xuICAgICMgQ2hhbmdlIHRoZSBib3JkZXIgY29sb3Igb2YgdGhlIGNlbGxzXG4gICAgI1xuICAgIF9jaGFuZ2VDZWxsQm9yZGVyQ29sb3I6IChoZXhDb2xvciktPlxuICAgICAgICBAQlVTLnNldCgnYm9hcmQuY2VsbC5zdHlsZS5ib3JkZXJDb2xvcicsIGhleENvbG9yKVxuICAgICAgICBjZWxsc0VsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicgKyBET00uZ2V0Q2xhc3MoJ0JPQVJEJywgJ0NFTExfQkFTRV9DTEFTUycpKVxuXG4gICAgICAgIGZvciBjZWxsIGluIGNlbGxzRWxlbXNcbiAgICAgICAgICAgIGNlbGwuc3R5bGUuYm9yZGVyQ29sb3IgPSBoZXhDb2xvclxuXG4gICAgI1xuICAgICMgQ2hhbmdlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBpbmFjdGl2ZSBjZWxsc1xuICAgICNcbiAgICBfY2hhbmdlQ2VsbEluYWN0aXZlQmFja2dyb3VuZENvbG9yOiAoaGV4Q29sb3IpLT5cbiAgICAgICAgQEJVUy5zZXQoJ2JvYXJkLmNlbGwuc3R5bGUuaW5hY3RpdmVCYWNrZ3JvdW5kQ29sb3InLCBoZXhDb2xvcilcbiAgICAgICAgY2VsbHNFbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgRE9NLmdldENsYXNzKCdCT0FSRCcsICdDRUxMX0JBU0VfQ0xBU1MnKSlcblxuICAgICAgICBmb3IgY2VsbCBpbiBjZWxsc0VsZW1zXG4gICAgICAgICAgICBpZiBub3QgY2VsbC5jbGFzc0xpc3QuY29udGFpbnMoRE9NLmdldENsYXNzKCdCT0FSRCcsICdDRUxMX0FDVElWRV9DTEFTUycpKVxuICAgICAgICAgICAgICAgIGNlbGwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaGV4Q29sb3IiXX0=


/*

The Cellular Automata Generator for WolfCage.

@author Destin Moulton
@git https://github.com/destinmoulton/wolfcage
@license MIT

Component of the Wolfram Cellular Automata Generator (WolfCage)

Functionality for building the generator for
controlling the cellular automata generation.

- Display a preview of the rules.
- Display the generated board.
 */
var Generator;

Generator = (function() {
  function Generator(BUS) {
    this.BUS = BUS;
    this._currentRule = 0;
    this._previewBoxWidth = 40;
    this._noBoardColumns = 151;
    this._noBoardRows = 75;
    this._ruleList = [];
    this.BUS.set('currentruledecimal', this._currentRule);
    this.BUS.subscribe('generator.run', (function(_this) {
      return function() {
        _this.run();
      };
    })(this));
  }

  Generator.prototype.run = function() {
    var generatorTemplateHTML, wolfcageMainElem;
    generatorTemplateHTML = DOM.elemById('GENERATOR', 'TEMPLATE_MAIN_CONTAINER').innerHTML;
    wolfcageMainElem = DOM.elemById('WOLFCAGE', 'MAIN_CONTAINER');
    wolfcageMainElem.innerHTML = Mustache.render(generatorTemplateHTML, {});
    this._Board = new Board(this.BUS);
    this._setupRuleDropdown();
    this._isColorPickerEnabled = false;
    DOM.elemById('GENERATOR', 'COLORPICKER_BUTTON').addEventListener('click', (function(_this) {
      return function() {
        if (_this._isColorPickerEnabled) {
          return _this._disableColorPicker();
        } else {
          return _this._enableColorPicker();
        }
      };
    })(this));
    this._buildBoard();
    return true;
  };

  Generator.prototype._enableColorPicker = function() {
    var colorPickerElem, colorpickerTemplateHTML, cpActive, cpBorder, cpInActive;
    colorpickerTemplateHTML = DOM.elemById('GENERATOR', 'TEMPLATE_COLORPICKER').innerHTML;
    colorPickerElem = DOM.elemById('GENERATOR', 'COLORPICKER_CONTAINER');
    colorPickerElem.innerHTML = Mustache.render(colorpickerTemplateHTML, {});
    colorPickerElem.style.display = "block";
    this._isColorPickerEnabled = true;
    cpActive = ColorPicker(DOM.elemById('GENERATOR', 'COLORPICKER_ACTIVE'), (function(_this) {
      return function(hex) {
        return _this.BUS.broadcast('change.cell.style.activebackground', hex);
      };
    })(this));
    cpActive.setHex(this.BUS.get('board.cell.style.activeBackgroundColor'));
    cpBorder = ColorPicker(DOM.elemById('GENERATOR', 'COLORPICKER_BORDER'), (function(_this) {
      return function(hex) {
        return _this.BUS.broadcast('change.cell.style.bordercolor', hex);
      };
    })(this));
    cpBorder.setHex(this.BUS.get('board.cell.style.borderColor'));
    cpInActive = ColorPicker(DOM.elemById('GENERATOR', 'COLORPICKER_INACTIVE'), (function(_this) {
      return function(hex) {
        return _this.BUS.broadcast('change.cell.style.inactivebackground', hex);
      };
    })(this));
    return cpInActive.setHex(this.BUS.get('board.cell.style.inactiveBackgroundColor'));
  };

  Generator.prototype._disableColorPicker = function() {
    var containerElem;
    this._isColorPickerEnabled = false;
    containerElem = DOM.elemById('GENERATOR', 'COLORPICKER_CONTAINER');
    containerElem.innerHTML = "";
    return containerElem.style.display = "none";
  };

  Generator.prototype._setupRuleDropdown = function() {
    var dropdownElem, i, optionsHTML, rule;
    dropdownElem = DOM.elemById('GENERATOR', 'RULE_DROPDOWN');
    optionsHTML = "";
    for (rule = i = 0; i <= 255; rule = ++i) {
      optionsHTML += "<option value='" + rule + "'>" + rule + "</option>";
    }
    dropdownElem.innerHTML = optionsHTML;
    dropdownElem.value = this.BUS.get('currentruledecimal');
    dropdownElem.addEventListener('change', (function(_this) {
      return function(event) {
        return _this.BUS.set('currentruledecimal', event.target.value);
      };
    })(this));
    return DOM.elemById('GENERATOR', 'RULE_GENERATE_BUTTON').addEventListener('click', (function(_this) {
      return function() {
        return _this._buildBoard();
      };
    })(this));
  };

  Generator.prototype._buildBoard = function() {
    var binary, cellBoardHtml;
    cellBoardHtml = DOM.elemById('GENERATOR', 'TEMPLATE_BOARD').innerHTML;
    DOM.elemById('GENERATOR', 'CONTENT_CONTAINER').innerHTML = Mustache.render(cellBoardHtml, {});
    this._rulesContainerElem = DOM.elemById('GENERATOR', 'RULE_PREVIEW_CONTAINER');
    binary = this.BUS.get('toprowbinary');
    this._Board.buildBoard(binary, this._noBoardColumns, this._noBoardRows);
    this._buildRulePreview();
    return true;
  };

  Generator.prototype._buildRulePreview = function() {
    var activeClass, binary, currentRule, i, index, jTmpCell, jTmpDigit, left, leftBit, middleBit, previewCellHtml, rendered, results, rightBit, tmplOptions;
    currentRule = this.BUS.get('rulebinarysting');
    previewCellHtml = DOM.elemById('GENERATOR', 'TEMPLATE_RULE_PREVIEW_CELL').innerHTML;
    activeClass = this._rulesContainerElem.innerHTML = "";
    results = [];
    for (index = i = 7; i >= 0; index = --i) {
      binary = index.toString(2);
      if (binary.length === 2) {
        binary = "0" + binary;
      } else if (binary.length === 1) {
        binary = "00" + binary;
      }
      leftBit = false;
      middleBit = false;
      rightBit = false;
      if (binary.charAt(0) === "1") {
        leftBit = true;
      }
      if (binary.charAt(1) === "1") {
        middleBit = true;
      }
      if (binary.charAt(2) === "1") {
        rightBit = true;
      }
      left = (7 - index) * this._previewBoxWidth;
      tmplOptions = {
        left: left,
        previewIndex: index,
        leftBitActive: leftBit,
        middleBitActive: middleBit,
        rightBitActive: rightBit
      };
      rendered = Mustache.render(previewCellHtml, tmplOptions);
      this._rulesContainerElem.innerHTML += rendered;
      jTmpCell = DOM.elemByPrefix('GENERATOR', 'RULE_PREVIEW_CELL', index);
      jTmpDigit = DOM.elemByPrefix('GENERATOR', 'RULE_PREVIEW_DIGIT', index);
      jTmpCell.classList.remove(DOM.getClass('GENERATOR', 'RULE_PREVIEW_CELL_ACTIVE'));
      jTmpDigit.innerHTML = "0";
      if (currentRule.substr(7 - index, 1) === "1") {
        jTmpCell.classList.add(DOM.getClass('GENERATOR', 'RULE_PREVIEW_CELL_ACTIVE'));
        results.push(jTmpDigit.innerHTML = "1");
      } else {
        results.push(void 0);
      }
    }
    return results;
  };

  return Generator;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2VuZXJhdG9yLmpzIiwic291cmNlcyI6WyJHZW5lcmF0b3IuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUE7O0FBaUJNO0VBT1UsbUJBQUMsR0FBRDtJQUNSLElBQUMsQ0FBQSxHQUFELEdBQU87SUFFUCxJQUFDLENBQUEsWUFBRCxHQUFnQjtJQUNoQixJQUFDLENBQUEsZ0JBQUQsR0FBb0I7SUFDcEIsSUFBQyxDQUFBLGVBQUQsR0FBbUI7SUFDbkIsSUFBQyxDQUFBLFlBQUQsR0FBZ0I7SUFFaEIsSUFBQyxDQUFBLFNBQUQsR0FBYTtJQUViLElBQUMsQ0FBQSxHQUFHLENBQUMsR0FBTCxDQUFTLG9CQUFULEVBQStCLElBQUMsQ0FBQSxZQUFoQztJQUVBLElBQUMsQ0FBQSxHQUFHLENBQUMsU0FBTCxDQUFlLGVBQWYsRUFDSSxDQUFBLFNBQUEsS0FBQTthQUFBLFNBQUE7UUFDSSxLQUFDLENBQUEsR0FBRCxDQUFBO01BREo7SUFBQSxDQUFBLENBQUEsQ0FBQSxJQUFBLENBREo7RUFaUTs7c0JBcUJaLEdBQUEsR0FBSSxTQUFBO0FBQ0EsUUFBQTtJQUFBLHFCQUFBLEdBQXdCLEdBQUcsQ0FBQyxRQUFKLENBQWEsV0FBYixFQUEwQix5QkFBMUIsQ0FBb0QsQ0FBQztJQUM3RSxnQkFBQSxHQUFtQixHQUFHLENBQUMsUUFBSixDQUFhLFVBQWIsRUFBeUIsZ0JBQXpCO0lBQ25CLGdCQUFnQixDQUFDLFNBQWpCLEdBQTZCLFFBQVEsQ0FBQyxNQUFULENBQWdCLHFCQUFoQixFQUFzQyxFQUF0QztJQUc3QixJQUFDLENBQUEsTUFBRCxHQUFjLElBQUEsS0FBQSxDQUFNLElBQUMsQ0FBQSxHQUFQO0lBRWQsSUFBQyxDQUFBLGtCQUFELENBQUE7SUFFQSxJQUFDLENBQUEscUJBQUQsR0FBeUI7SUFDekIsR0FBRyxDQUFDLFFBQUosQ0FBYSxXQUFiLEVBQXlCLG9CQUF6QixDQUE4QyxDQUFDLGdCQUEvQyxDQUFn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QixFQUFtRCxLQUFuRDtNQUVaLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBbkIsQ0FBMEIsR0FBRyxDQUFDLFFBQUosQ0FBYSxXQUFiLEVBQTBCLDBCQUExQixDQUExQjtNQUNBLFNBQVMsQ0FBQyxTQUFWLEdBQXNCO01BQ3RCLElBQUcsV0FBVyxDQUFDLE1BQVosQ0FBbUIsQ0FBQSxHQUFFLEtBQXJCLEVBQTJCLENBQTNCLENBQUEsS0FBaUMsR0FBcEM7UUFDSSxRQUFRLENBQUMsU0FBUyxDQUFDLEdBQW5CLENBQXVCLEdBQUcsQ0FBQyxRQUFKLENBQWEsV0FBYixFQUEwQiwwQkFBMUIsQ0FBdkI7cUJBQ0EsU0FBUyxDQUFDLFNBQVYsR0FBc0IsS0FGMUI7T0FBQSxNQUFBOzZCQUFBOztBQTNDSjs7RUFSZSIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuXG5UaGUgQ2VsbHVsYXIgQXV0b21hdGEgR2VuZXJhdG9yIGZvciBXb2xmQ2FnZS5cblxuQGF1dGhvciBEZXN0aW4gTW91bHRvblxuQGdpdCBodHRwczovL2dpdGh1Yi5jb20vZGVzdGlubW91bHRvbi93b2xmY2FnZVxuQGxpY2Vuc2UgTUlUXG5cbkNvbXBvbmVudCBvZiB0aGUgV29sZnJhbSBDZWxsdWxhciBBdXRvbWF0YSBHZW5lcmF0b3IgKFdvbGZDYWdlKVxuXG5GdW5jdGlvbmFsaXR5IGZvciBidWlsZGluZyB0aGUgZ2VuZXJhdG9yIGZvclxuY29udHJvbGxpbmcgdGhlIGNlbGx1bGFyIGF1dG9tYXRhIGdlbmVyYXRpb24uXG5cbi0gRGlzcGxheSBhIHByZXZpZXcgb2YgdGhlIHJ1bGVzLlxuLSBEaXNwbGF5IHRoZSBnZW5lcmF0ZWQgYm9hcmQuXG5cbiMjI1xuY2xhc3MgR2VuZXJhdG9yXG5cbiAgICAjXG4gICAgIyBHZW5lcmF0b3IgQ29uc3RydWN0b3JcbiAgICAjIEluaXRpYWxpemUgdGhlIElEcywgbG9jYWwgalF1ZXJ5IG9iamVjdHMsIGFuZCBzaXplc1xuICAgICMgZm9yIHRoZSBHZW5lcmF0b3IuXG4gICAgIyBcbiAgICBjb25zdHJ1Y3RvcjooQlVTKSAtPlxuICAgICAgICBAQlVTID0gQlVTXG5cbiAgICAgICAgQF9jdXJyZW50UnVsZSA9IDBcbiAgICAgICAgQF9wcmV2aWV3Qm94V2lkdGggPSA0MFxuICAgICAgICBAX25vQm9hcmRDb2x1bW5zID0gMTUxXG4gICAgICAgIEBfbm9Cb2FyZFJvd3MgPSA3NVxuXG4gICAgICAgIEBfcnVsZUxpc3QgPSBbXVxuXG4gICAgICAgIEBCVVMuc2V0KCdjdXJyZW50cnVsZWRlY2ltYWwnLCBAX2N1cnJlbnRSdWxlKVxuXG4gICAgICAgIEBCVVMuc3Vic2NyaWJlKCdnZW5lcmF0b3IucnVuJyxcbiAgICAgICAgICAgICgpPT5cbiAgICAgICAgICAgICAgICBAcnVuKClcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgKVxuXG4gICAgI1xuICAgICMgU2hvdyB0aGUgR2VuZXJhdG9yXG4gICAgIyBcbiAgICBydW46KCkgLT5cbiAgICAgICAgZ2VuZXJhdG9yVGVtcGxhdGVIVE1MID0gRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCAnVEVNUExBVEVfTUFJTl9DT05UQUlORVInKS5pbm5lckhUTUxcbiAgICAgICAgd29sZmNhZ2VNYWluRWxlbSA9IERPTS5lbGVtQnlJZCgnV09MRkNBR0UnLCAnTUFJTl9DT05UQUlORVInKVxuICAgICAgICB3b2xmY2FnZU1haW5FbGVtLmlubmVySFRNTCA9IE11c3RhY2hlLnJlbmRlcihnZW5lcmF0b3JUZW1wbGF0ZUhUTUwse30pXG5cbiAgICAgICAgIyBCdWlsZCBhIG5ldyBCb2FyZFxuICAgICAgICBAX0JvYXJkID0gbmV3IEJvYXJkKEBCVVMpXG4gICAgICAgIFxuICAgICAgICBAX3NldHVwUnVsZURyb3Bkb3duKClcblxuICAgICAgICBAX2lzQ29sb3JQaWNrZXJFbmFibGVkID0gZmFsc2VcbiAgICAgICAgRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCdDT0xPUlBJQ0tFUl9CVVRUT04nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXG4gICAgICAgICAgICAoKT0+XG4gICAgICAgICAgICAgICAgaWYgQF9pc0NvbG9yUGlja2VyRW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICBAX2Rpc2FibGVDb2xvclBpY2tlcigpXG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBAX2VuYWJsZUNvbG9yUGlja2VyKClcbiAgICAgICAgKVxuXG4gICAgICAgICMgRmluYWwgc3RlcCBpcyB0byBidWlsZCB0aGUgYm9hcmRcbiAgICAgICAgQF9idWlsZEJvYXJkKClcblxuICAgICAgICByZXR1cm4gdHJ1ZVxuXG5cbiAgICAjXG4gICAgIyBFbmFibGUgdGhlIGNvbG9yIHBpY2tlclxuICAgICMgXG4gICAgX2VuYWJsZUNvbG9yUGlja2VyOigpIC0+XG4gICAgICAgIGNvbG9ycGlja2VyVGVtcGxhdGVIVE1MID0gRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCAnVEVNUExBVEVfQ09MT1JQSUNLRVInKS5pbm5lckhUTUxcbiAgICAgICAgY29sb3JQaWNrZXJFbGVtID0gRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCAnQ09MT1JQSUNLRVJfQ09OVEFJTkVSJylcbiAgICAgICAgY29sb3JQaWNrZXJFbGVtLmlubmVySFRNTCA9IE11c3RhY2hlLnJlbmRlcihjb2xvcnBpY2tlclRlbXBsYXRlSFRNTCx7fSlcbiAgICAgICAgY29sb3JQaWNrZXJFbGVtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcblxuICAgICAgICBAX2lzQ29sb3JQaWNrZXJFbmFibGVkID0gdHJ1ZVxuICAgICAgICBjcEFjdGl2ZSA9IENvbG9yUGlja2VyKERPTS5lbGVtQnlJZCgnR0VORVJBVE9SJywnQ09MT1JQSUNLRVJfQUNUSVZFJyksIFxuICAgICAgICAgICAgKGhleCk9PlxuICAgICAgICAgICAgICAgIEBCVVMuYnJvYWRjYXN0KCdjaGFuZ2UuY2VsbC5zdHlsZS5hY3RpdmViYWNrZ3JvdW5kJywgaGV4KVxuICAgICAgICApXG4gICAgICAgIGNwQWN0aXZlLnNldEhleChAQlVTLmdldCgnYm9hcmQuY2VsbC5zdHlsZS5hY3RpdmVCYWNrZ3JvdW5kQ29sb3InKSlcblxuICAgICAgICBjcEJvcmRlciA9IENvbG9yUGlja2VyKERPTS5lbGVtQnlJZCgnR0VORVJBVE9SJywnQ09MT1JQSUNLRVJfQk9SREVSJyksIFxuICAgICAgICAgICAgKGhleCk9PlxuICAgICAgICAgICAgICAgIEBCVVMuYnJvYWRjYXN0KCdjaGFuZ2UuY2VsbC5zdHlsZS5ib3JkZXJjb2xvcicsIGhleClcbiAgICAgICAgKVxuICAgICAgICBjcEJvcmRlci5zZXRIZXgoQEJVUy5nZXQoJ2JvYXJkLmNlbGwuc3R5bGUuYm9yZGVyQ29sb3InKSlcblxuICAgICAgICBjcEluQWN0aXZlID0gQ29sb3JQaWNrZXIoRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCdDT0xPUlBJQ0tFUl9JTkFDVElWRScpLCBcbiAgICAgICAgICAgIChoZXgpPT5cbiAgICAgICAgICAgICAgICBAQlVTLmJyb2FkY2FzdCgnY2hhbmdlLmNlbGwuc3R5bGUuaW5hY3RpdmViYWNrZ3JvdW5kJywgaGV4KVxuICAgICAgICApXG4gICAgICAgIGNwSW5BY3RpdmUuc2V0SGV4KEBCVVMuZ2V0KCdib2FyZC5jZWxsLnN0eWxlLmluYWN0aXZlQmFja2dyb3VuZENvbG9yJykpXG5cblxuICAgICNcbiAgICAjIERpc2FibGUgdGhlIGNvbG9yIHBpY2tlclxuICAgICNcbiAgICBfZGlzYWJsZUNvbG9yUGlja2VyOigpIC0+XG4gICAgICAgIEBfaXNDb2xvclBpY2tlckVuYWJsZWQgPSBmYWxzZVxuICAgICAgICBjb250YWluZXJFbGVtID0gRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCdDT0xPUlBJQ0tFUl9DT05UQUlORVInKVxuICAgICAgICBjb250YWluZXJFbGVtLmlubmVySFRNTCA9IFwiXCJcbiAgICAgICAgY29udGFpbmVyRWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcblxuICAgICNcbiAgICAjIFNldHVwIHRoZSBydWxlIHNlbGVjdG9yIGRyb3Bkb3duXG4gICAgI1xuICAgIF9zZXR1cFJ1bGVEcm9wZG93bjooKSAtPlxuICAgICAgICBkcm9wZG93bkVsZW0gPSBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsJ1JVTEVfRFJPUERPV04nKVxuICAgICAgICBcbiAgICAgICAgIyBHZW5lcmF0ZSB0aGUgcnVsZSBkcm9wZG93biBvcHRpb25zXG4gICAgICAgIG9wdGlvbnNIVE1MID0gXCJcIlxuICAgICAgICBmb3IgcnVsZSBpbiBbMC4uMjU1XVxuICAgICAgICAgICAgb3B0aW9uc0hUTUwgKz0gXCI8b3B0aW9uIHZhbHVlPScje3J1bGV9Jz4je3J1bGV9PC9vcHRpb24+XCJcbiAgICAgICAgICAgIFxuICAgICAgICBkcm9wZG93bkVsZW0uaW5uZXJIVE1MID0gb3B0aW9uc0hUTUxcblxuICAgICAgICAjIENoYW5nZSB0aGUgY3VycmVudCBydWxlIGZyb20gdGhlIGRyb3Bkb3duXG4gICAgICAgIGRyb3Bkb3duRWxlbS52YWx1ZSA9IEBCVVMuZ2V0KCdjdXJyZW50cnVsZWRlY2ltYWwnKVxuXG4gICAgICAgICMgU2V0dXAgdGhlIGNoYW5nZSBydWxlIGV2ZW50XG4gICAgICAgIGRyb3Bkb3duRWxlbS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBcbiAgICAgICAgICAgIChldmVudCk9PlxuICAgICAgICAgICAgICAgIEBCVVMuc2V0KCdjdXJyZW50cnVsZWRlY2ltYWwnLCBldmVudC50YXJnZXQudmFsdWUpXG4gICAgICAgIClcblxuICAgICAgICAjIFNldHVwIHRoZSBHZW5lcmF0ZSBidXR0b24gY2xpY2sgZXZlbnRcbiAgICAgICAgRE9NLmVsZW1CeUlkKCdHRU5FUkFUT1InLCAnUlVMRV9HRU5FUkFURV9CVVRUT04nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXG4gICAgICAgICAgICAoKT0+QF9idWlsZEJvYXJkKClcbiAgICAgICAgKVxuXG4gICAgI1xuICAgICMgQnVpbGQgdGhlIHByZXZpZXcgYm9hcmQgZnJvbSB0aGUgdGVtcGxhdGVcbiAgICAjIFxuICAgIF9idWlsZEJvYXJkOigpIC0+XG4gICAgICAgIGNlbGxCb2FyZEh0bWwgPSBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsJ1RFTVBMQVRFX0JPQVJEJykuaW5uZXJIVE1MXG4gICAgICAgIFxuICAgICAgICBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsJ0NPTlRFTlRfQ09OVEFJTkVSJykuaW5uZXJIVE1MID0gTXVzdGFjaGUucmVuZGVyKGNlbGxCb2FyZEh0bWwse30pXG5cbiAgICAgICAgQF9ydWxlc0NvbnRhaW5lckVsZW0gPSBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsJ1JVTEVfUFJFVklFV19DT05UQUlORVInKVxuICAgICAgICBcbiAgICAgICAgYmluYXJ5ID0gQEJVUy5nZXQoJ3RvcHJvd2JpbmFyeScpXG5cbiAgICAgICAgQF9Cb2FyZC5idWlsZEJvYXJkKGJpbmFyeSwgQF9ub0JvYXJkQ29sdW1ucywgQF9ub0JvYXJkUm93cylcbiAgICAgICAgQF9idWlsZFJ1bGVQcmV2aWV3KClcbiAgICAgICAgcmV0dXJuIHRydWVcblxuICAgICNcbiAgICAjIEJ1aWxkIHRoZSBSdWxlIFByZXZpZXdcbiAgICAjIFxuICAgIF9idWlsZFJ1bGVQcmV2aWV3OiAtPlxuICAgICAgICBjdXJyZW50UnVsZSA9IEBCVVMuZ2V0KCdydWxlYmluYXJ5c3RpbmcnKVxuXG4gICAgICAgICMgVXNlIHRoZSB0ZW1wbGF0ZSB0byBnZW5lcmF0ZSB0aGUgcHJldmlld1xuICAgICAgICBwcmV2aWV3Q2VsbEh0bWwgPSBET00uZWxlbUJ5SWQoJ0dFTkVSQVRPUicsJ1RFTVBMQVRFX1JVTEVfUFJFVklFV19DRUxMJykuaW5uZXJIVE1MXG5cbiAgICAgICAgYWN0aXZlQ2xhc3MgPSBcbiAgICAgICAgQF9ydWxlc0NvbnRhaW5lckVsZW0uaW5uZXJIVE1MID0gXCJcIlxuICAgICAgICBmb3IgaW5kZXggaW4gWzcuLjBdXG4gICAgICAgICAgICAjIEdldCB0aGUgYmluYXJ5IHJlcHJlc2VudGF0aW9uIG9mIHRoZSBpbmRleFxuICAgICAgICAgICAgYmluYXJ5ID0gaW5kZXgudG9TdHJpbmcoMilcblxuICAgICAgICAgICAgIyBQYWQgdGhlIGJpbmFyeSB0byAzIGJpdHNcbiAgICAgICAgICAgIGlmIGJpbmFyeS5sZW5ndGggaXMgMlxuICAgICAgICAgICAgICAgIGJpbmFyeSA9IFwiMCN7YmluYXJ5fVwiXG4gICAgICAgICAgICBlbHNlIGlmIGJpbmFyeS5sZW5ndGggaXMgMVxuICAgICAgICAgICAgICAgIGJpbmFyeSA9IFwiMDAje2JpbmFyeX1cIlxuXG4gICAgICAgICAgICAjIENvbnZlcnQgdGhlIGJpbmFyeSB0byB1c2FibGUgYm9vbGVhbiB2YWx1ZXMgZm9yIHRlbXBsYXRlXG4gICAgICAgICAgICBsZWZ0Qml0ID0gZmFsc2VcbiAgICAgICAgICAgIG1pZGRsZUJpdCA9IGZhbHNlXG4gICAgICAgICAgICByaWdodEJpdCA9IGZhbHNlXG5cbiAgICAgICAgICAgIGlmIGJpbmFyeS5jaGFyQXQoMCkgaXMgXCIxXCJcbiAgICAgICAgICAgICAgICBsZWZ0Qml0ID0gdHJ1ZVxuXG4gICAgICAgICAgICBpZiBiaW5hcnkuY2hhckF0KDEpIGlzIFwiMVwiXG4gICAgICAgICAgICAgICAgbWlkZGxlQml0ID0gdHJ1ZVxuXG4gICAgICAgICAgICBpZiBiaW5hcnkuY2hhckF0KDIpIGlzIFwiMVwiXG4gICAgICAgICAgICAgICAgcmlnaHRCaXQgPSB0cnVlXG5cbiAgICAgICAgICAgIGxlZnQgPSAoNy1pbmRleCkqQF9wcmV2aWV3Qm94V2lkdGhcblxuICAgICAgICAgICAgIyBUaGUgdGVtcGxhdGUgb3B0aW9ucyBmb3IgTXVzdGFjaGUgdG8gcmVuZGVyXG4gICAgICAgICAgICB0bXBsT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBsZWZ0OmxlZnQsXG4gICAgICAgICAgICAgICAgcHJldmlld0luZGV4OmluZGV4LFxuICAgICAgICAgICAgICAgIGxlZnRCaXRBY3RpdmU6bGVmdEJpdCxcbiAgICAgICAgICAgICAgICBtaWRkbGVCaXRBY3RpdmU6bWlkZGxlQml0LFxuICAgICAgICAgICAgICAgIHJpZ2h0Qml0QWN0aXZlOnJpZ2h0Qml0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlbmRlcmVkID0gTXVzdGFjaGUucmVuZGVyKHByZXZpZXdDZWxsSHRtbCwgdG1wbE9wdGlvbnMpXG4gICAgICAgICAgICBAX3J1bGVzQ29udGFpbmVyRWxlbS5pbm5lckhUTUwgKz0gcmVuZGVyZWRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgalRtcENlbGwgPSBET00uZWxlbUJ5UHJlZml4KCdHRU5FUkFUT1InLCAnUlVMRV9QUkVWSUVXX0NFTEwnLGluZGV4KVxuICAgICAgICAgICAgalRtcERpZ2l0ID0gRE9NLmVsZW1CeVByZWZpeCgnR0VORVJBVE9SJywgJ1JVTEVfUFJFVklFV19ESUdJVCcsaW5kZXgpXG5cbiAgICAgICAgICAgIGpUbXBDZWxsLmNsYXNzTGlzdC5yZW1vdmUoRE9NLmdldENsYXNzKCdHRU5FUkFUT1InLCAnUlVMRV9QUkVWSUVXX0NFTExfQUNUSVZFJykpXG4gICAgICAgICAgICBqVG1wRGlnaXQuaW5uZXJIVE1MID0gXCIwXCJcbiAgICAgICAgICAgIGlmIGN1cnJlbnRSdWxlLnN1YnN0cig3LWluZGV4LDEpIGlzIFwiMVwiXG4gICAgICAgICAgICAgICAgalRtcENlbGwuY2xhc3NMaXN0LmFkZChET00uZ2V0Q2xhc3MoJ0dFTkVSQVRPUicsICdSVUxFX1BSRVZJRVdfQ0VMTF9BQ1RJVkUnKSlcbiAgICAgICAgICAgICAgICBqVG1wRGlnaXQuaW5uZXJIVE1MID0gXCIxXCJcbiJdfQ==


/*

Rule Matcher for WolfCage.

@author Destin Moulton
@git https://github.com/destinmoulton/wolfcage
@license MIT

Component of the Wolfram Cellular Automata Generator (WolfCage).

The rule is a binary string. Each 1 in the binary string
represents a rule to-be-followed in the next row of
generated blocks.

There are 255 rules of 8 block positions.

Rule 0 Example:
111 110 101 100 011 010 001 000
 0   0   0   0   0   0   0   0

Rule 20 Example:
111 110 101 100 011 010 001 000
 0   0   1   0   1   0   0   0

Rule 255 Example:
111 110 101 100 011 010 001 000
 1   1   1   1   1   1   1   1

The position of filled cells on the top row determines
the composition of the next row and so on.
 */
var RuleMatcher;

RuleMatcher = (function() {
  function RuleMatcher(BUS) {
    this.BUS = BUS;
    this._binaryRule = "";
    this._patterns = ['111', '110', '101', '100', '011', '010', '001', '000'];
    this.BUS.set('rulebinarysting', this._binaryRule);
  }

  RuleMatcher.prototype.setCurrentRule = function(decimalRule) {
    return this._binaryRule = this._decToBinary(decimalRule);
  };

  RuleMatcher.prototype.match = function(zeroIndex, oneIndex, twoIndex) {
    var foundPatternIndex, patternToFind;
    patternToFind = "" + zeroIndex + oneIndex + twoIndex;
    foundPatternIndex = this._patterns.indexOf(patternToFind);
    return parseInt(this._binaryRule.substr(foundPatternIndex, 1));
  };

  RuleMatcher.prototype._decToBinary = function(decValue) {
    var binary, i, length, num, ref;
    binary = (parseInt(decValue)).toString(2);
    length = binary.length;
    if (length < 8) {
      for (num = i = ref = length; ref <= 7 ? i <= 7 : i >= 7; num = ref <= 7 ? ++i : --i) {
        binary = "0" + binary;
      }
    }
    return binary;
  };

  return RuleMatcher;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUnVsZU1hdGNoZXIuanMiLCJzb3VyY2VzIjpbIlJ1bGVNYXRjaGVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBOztBQWlDTTtFQU1XLHFCQUFDLEdBQUQ7SUFDVCxJQUFDLENBQUEsR0FBRCxHQUFPO0lBQ1AsSUFBQyxDQUFBLFdBQUQsR0FBZTtJQUNmLElBQUMsQ0FBQSxTQUFELEdBQWEsQ0FDVCxLQURTLEVBRVQsS0FGUyxFQUdULEtBSFMsRUFJVCxLQUpTLEVBS1QsS0FMUyxFQU1ULEtBTlMsRUFPVCxLQVBTLEVBUVQsS0FSUztJQVdiLElBQUMsQ0FBQSxHQUFHLENBQUMsR0FBTCxDQUFTLGlCQUFULEVBQTRCLElBQUMsQ0FBQSxXQUE3QjtFQWRTOzt3QkFtQmIsY0FBQSxHQUFnQixTQUFDLFdBQUQ7V0FJWixJQUFDLENBQUEsV0FBRCxHQUFlLElBQUMsQ0FBQSxZQUFELENBQWMsV0FBZDtFQUpIOzt3QkFTaEIsS0FBQSxHQUFPLFNBQUMsU0FBRCxFQUFZLFFBQVosRUFBc0IsUUFBdEI7QUFFSCxRQUFBO0lBQUEsYUFBQSxHQUFnQixFQUFBLEdBQUcsU0FBSCxHQUFlLFFBQWYsR0FBMEI7SUFFMUMsaUJBQUEsR0FBb0IsSUFBQyxDQUFBLFNBQVMsQ0FBQyxPQUFYLENBQW1CLGFBQW5CO0FBR3BCLFdBQU8sUUFBQSxDQUFTLElBQUMsQ0FBQSxXQUFXLENBQUMsTUFBYixDQUFvQixpQkFBcEIsRUFBc0MsQ0FBdEMsQ0FBVDtFQVBKOzt3QkFjUCxZQUFBLEdBQWMsU0FBQyxRQUFEO0FBRVYsUUFBQTtJQUFBLE1BQUEsR0FBUyxDQUFDLFFBQUEsQ0FBUyxRQUFULENBQUQsQ0FBb0IsQ0FBQyxRQUFyQixDQUE4QixDQUE5QjtJQUNULE1BQUEsR0FBUyxNQUFNLENBQUM7SUFFaEIsSUFBRyxNQUFBLEdBQVMsQ0FBWjtBQUVJLFdBQVcsOEVBQVg7UUFDSSxNQUFBLEdBQVMsR0FBQSxHQUFJO0FBRGpCLE9BRko7O0FBS0EsV0FBTztFQVZHIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG5cblJ1bGUgTWF0Y2hlciBmb3IgV29sZkNhZ2UuXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vd29sZmNhZ2VcbkBsaWNlbnNlIE1JVFxuXG5Db21wb25lbnQgb2YgdGhlIFdvbGZyYW0gQ2VsbHVsYXIgQXV0b21hdGEgR2VuZXJhdG9yIChXb2xmQ2FnZSkuXG5cblRoZSBydWxlIGlzIGEgYmluYXJ5IHN0cmluZy4gRWFjaCAxIGluIHRoZSBiaW5hcnkgc3RyaW5nXG5yZXByZXNlbnRzIGEgcnVsZSB0by1iZS1mb2xsb3dlZCBpbiB0aGUgbmV4dCByb3cgb2ZcbmdlbmVyYXRlZCBibG9ja3MuXG5cblRoZXJlIGFyZSAyNTUgcnVsZXMgb2YgOCBibG9jayBwb3NpdGlvbnMuXG5cblJ1bGUgMCBFeGFtcGxlOlxuMTExIDExMCAxMDEgMTAwIDAxMSAwMTAgMDAxIDAwMFxuIDAgICAwICAgMCAgIDAgICAwICAgMCAgIDAgICAwXG5cblJ1bGUgMjAgRXhhbXBsZTpcbjExMSAxMTAgMTAxIDEwMCAwMTEgMDEwIDAwMSAwMDBcbiAwICAgMCAgIDEgICAwICAgMSAgIDAgICAwICAgMFxuXG5SdWxlIDI1NSBFeGFtcGxlOlxuMTExIDExMCAxMDEgMTAwIDAxMSAwMTAgMDAxIDAwMFxuIDEgICAxICAgMSAgIDEgICAxICAgMSAgIDEgICAxXG5cblRoZSBwb3NpdGlvbiBvZiBmaWxsZWQgY2VsbHMgb24gdGhlIHRvcCByb3cgZGV0ZXJtaW5lc1xudGhlIGNvbXBvc2l0aW9uIG9mIHRoZSBuZXh0IHJvdyBhbmQgc28gb24uXG5cbiMjI1xuXG5jbGFzcyBSdWxlTWF0Y2hlclxuICAgIFxuICAgICNcbiAgICAjIFNldHVwIHRoZSBsb2NhbCB2YXJpYWJsZXNcbiAgICAjIEBjb25zdHJ1Y3RvclxuICAgICMgXG4gICAgY29uc3RydWN0b3I6IChCVVMpLT5cbiAgICAgICAgQEJVUyA9IEJVU1xuICAgICAgICBAX2JpbmFyeVJ1bGUgPSBcIlwiXG4gICAgICAgIEBfcGF0dGVybnMgPSBbXG4gICAgICAgICAgICAnMTExJyxcbiAgICAgICAgICAgICcxMTAnLFxuICAgICAgICAgICAgJzEwMScsXG4gICAgICAgICAgICAnMTAwJyxcbiAgICAgICAgICAgICcwMTEnLFxuICAgICAgICAgICAgJzAxMCcsXG4gICAgICAgICAgICAnMDAxJyxcbiAgICAgICAgICAgICcwMDAnXG4gICAgICAgIF1cblxuICAgICAgICBAQlVTLnNldCgncnVsZWJpbmFyeXN0aW5nJywgQF9iaW5hcnlSdWxlKVxuXG4gICAgI1xuICAgICMgU2V0IHRoZSBjdXJyZW50IHJ1bGUgZnJvbSBhIGRlY2ltYWwgdmFsdWVcbiAgICAjIFxuICAgIHNldEN1cnJlbnRSdWxlOiAoZGVjaW1hbFJ1bGUpLT5cbiAgICAgICAgIyBUaGUgYmluYXJ5IHJ1bGUgY29udGFpbnMgdGhlIHNlcXVlbmNlIG9mXG4gICAgICAgICMgMCdzIChubyBibG9jaykgYW5kIDEncyAoYmxvY2spIGZvciB0aGVcbiAgICAgICAgIyBuZXh0IHJvdy5cbiAgICAgICAgQF9iaW5hcnlSdWxlID0gQF9kZWNUb0JpbmFyeShkZWNpbWFsUnVsZSlcblxuICAgICNcbiAgICAjIE1hdGNoIGEgcGF0dGVybiBmb3IgdGhlIHRocmVlIGJpdCBwb3NpdGlvbnNcbiAgICAjIFxuICAgIG1hdGNoOiAoemVyb0luZGV4LCBvbmVJbmRleCwgdHdvSW5kZXgpLT5cbiAgICAgICAgIyBNYXRjaCB0aHJlZSBjZWxscyB3aXRoaW5cbiAgICAgICAgcGF0dGVyblRvRmluZCA9IFwiI3t6ZXJvSW5kZXh9I3tvbmVJbmRleH0je3R3b0luZGV4fVwiXG5cbiAgICAgICAgZm91bmRQYXR0ZXJuSW5kZXggPSBAX3BhdHRlcm5zLmluZGV4T2YocGF0dGVyblRvRmluZClcblxuICAgICAgICAjIFJldHVybiB0aGUgYmluYXJ5IHJ1bGUncyAwIG9yIDEgbWFwcGluZ1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoQF9iaW5hcnlSdWxlLnN1YnN0cihmb3VuZFBhdHRlcm5JbmRleCwxKSlcblxuICAgICNcbiAgICAjIENvbnZlcnQgYSBkZWNpbWFsIHZhbHVlIHRvIGl0cyBiaW5hcnkgcmVwcmVzZW50YXRpb25cbiAgICAjXG4gICAgIyBAcmV0dXJuIHN0cmluZyBCaW5hcnkgcnVsZVxuICAgICMgXG4gICAgX2RlY1RvQmluYXJ5OiAoZGVjVmFsdWUpLT5cbiAgICAgICAgIyBHZW5lcmF0ZSB0aGUgYmluYXJ5IHN0cmluZyBmcm9tIHRoZSBkZWNpbWFsXG4gICAgICAgIGJpbmFyeSA9IChwYXJzZUludChkZWNWYWx1ZSkpLnRvU3RyaW5nKDIpXG4gICAgICAgIGxlbmd0aCA9IGJpbmFyeS5sZW5ndGhcblxuICAgICAgICBpZiBsZW5ndGggPCA4XG4gICAgICAgICAgICAjIFBhZCB0aGUgYmluYXJ5IHJlcHJlc2VuYXRpb24gd2l0aCBsZWFkaW5nIDAnc1xuICAgICAgICAgICAgZm9yIG51bSBpbiBbbGVuZ3RoLi43XVxuICAgICAgICAgICAgICAgIGJpbmFyeSA9IFwiMCN7YmluYXJ5fVwiXG4gICAgICAgICAgICAgICAgXG4gICAgICAgIHJldHVybiBiaW5hcnlcbiJdfQ==


/*

Generate the Rule Thumbnail List for WolfCage.

@author Destin Moulton
@git https://github.com/destinmoulton/wolfcage
@license MIT

Component of the Wolfram Cellular Automata Generator (WolfCage)

The thumbnail for each rule is presented. 
Event handlers are added to each thumbnail for generating
the automata cells for that rule.
 */
var Thumbnails;

Thumbnails = (function() {
  function Thumbnails(BUS) {
    this.BUS = BUS;
    this.BUS.subscribe('thumbnails.run', (function(_this) {
      return function() {
        _this.run();
      };
    })(this));
  }

  Thumbnails.prototype.run = function() {
    var i, j, k, ref, rendered, results, results1, ruleList, template_options, thumbnailHTML, thumbsElems;
    ruleList = (function() {
      results = [];
      for (j = 0; j <= 255; j++){ results.push(j); }
      return results;
    }).apply(this);
    template_options = {
      ruleList: ruleList,
      path: this.BUS.get('thumbnails.path')
    };
    thumbnailHTML = DOM.elemById('THUMBNAILS', 'TEMPLATE_THUMBNAILS').innerHTML;
    rendered = Mustache.render(thumbnailHTML, template_options);
    DOM.elemById('WOLFCAGE', 'MAIN_CONTAINER').innerHTML = rendered;
    thumbsElems = document.querySelectorAll('.' + DOM.getClass('THUMBNAILS', 'THUMB_BOX'));
    results1 = [];
    for (i = k = 0, ref = thumbsElems.length - 1; 0 <= ref ? k <= ref : k >= ref; i = 0 <= ref ? ++k : --k) {
      results1.push(thumbsElems[i].addEventListener('click', (function(_this) {
        return function(event) {
          return _this._ruleThumbClicked(event);
        };
      })(this)));
    }
    return results1;
  };

  Thumbnails.prototype._ruleThumbClicked = function(event) {
    var rule;
    rule = event.target.getAttribute('data-rule');
    this.BUS.set('currentruledecimal', rule);
    return this.BUS.broadcast('tabs.show.generator');
  };

  return Thumbnails;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGh1bWJuYWlscy5qcyIsInNvdXJjZXMiOlsiVGh1bWJuYWlscy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7OztBQUFBLElBQUE7O0FBZ0JNO0VBS1csb0JBQUMsR0FBRDtJQUNULElBQUMsQ0FBQSxHQUFELEdBQU87SUFDUCxJQUFDLENBQUEsR0FBRyxDQUFDLFNBQUwsQ0FBZSxnQkFBZixFQUNJLENBQUEsU0FBQSxLQUFBO2FBQUEsU0FBQTtRQUNJLEtBQUMsQ0FBQSxHQUFELENBQUE7TUFESjtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FESjtFQUZTOzt1QkFXYixHQUFBLEdBQUssU0FBQTtBQUVELFFBQUE7SUFBQSxRQUFBLEdBQVc7Ozs7O0lBRVgsZ0JBQUEsR0FBbUI7TUFDZixRQUFBLEVBQVMsUUFETTtNQUVmLElBQUEsRUFBSyxJQUFDLENBQUEsR0FBRyxDQUFDLEdBQUwsQ0FBUyxpQkFBVCxDQUZVOztJQU1uQixhQUFBLEdBQWdCLEdBQUcsQ0FBQyxRQUFKLENBQWEsWUFBYixFQUEyQixxQkFBM0IsQ0FBaUQsQ0FBQztJQUNsRSxRQUFBLEdBQVcsUUFBUSxDQUFDLE1BQVQsQ0FBZ0IsYUFBaEIsRUFBK0IsZ0JBQS9CO0lBRVgsR0FBRyxDQUFDLFFBQUosQ0FBYSxVQUFiLEVBQXlCLGdCQUF6QixDQUEwQyxDQUFDLFNBQTNDLEdBQXVEO0lBRXZELFdBQUEsR0FBYyxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsR0FBQSxHQUFNLEdBQUcsQ0FBQyxRQUFKLENBQWEsWUFBYixFQUEyQixXQUEzQixDQUFoQztBQUVkO1NBQVMsaUdBQVQ7b0JBQ0ksV0FBWSxDQUFBLENBQUEsQ0FBRSxDQUFDLGdCQUFmLENBQWdDLE9BQWhDLEVBQXlDLENBQUEsU0FBQSxLQUFBO2VBQUEsU0FBQyxLQUFEO2lCQUFTLEtBQUMsQ0FBQSxpQkFBRCxDQUFtQixLQUFuQjtRQUFUO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUF6QztBQURKOztFQWpCQzs7dUJBd0JMLGlCQUFBLEdBQWtCLFNBQUMsS0FBRDtBQUNkLFFBQUE7SUFBQSxJQUFBLEdBQU8sS0FBSyxDQUFDLE1BQU0sQ0FBQyxZQUFiLENBQTBCLFdBQTFCO0lBR1AsSUFBQyxDQUFBLEdBQUcsQ0FBQyxHQUFMLENBQVMsb0JBQVQsRUFBK0IsSUFBL0I7V0FHQSxJQUFDLENBQUEsR0FBRyxDQUFDLFNBQUwsQ0FBZSxxQkFBZjtFQVBjIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG5cbkdlbmVyYXRlIHRoZSBSdWxlIFRodW1ibmFpbCBMaXN0IGZvciBXb2xmQ2FnZS5cblxuQGF1dGhvciBEZXN0aW4gTW91bHRvblxuQGdpdCBodHRwczovL2dpdGh1Yi5jb20vZGVzdGlubW91bHRvbi93b2xmY2FnZVxuQGxpY2Vuc2UgTUlUXG5cbkNvbXBvbmVudCBvZiB0aGUgV29sZnJhbSBDZWxsdWxhciBBdXRvbWF0YSBHZW5lcmF0b3IgKFdvbGZDYWdlKVxuXG5UaGUgdGh1bWJuYWlsIGZvciBlYWNoIHJ1bGUgaXMgcHJlc2VudGVkLiBcbkV2ZW50IGhhbmRsZXJzIGFyZSBhZGRlZCB0byBlYWNoIHRodW1ibmFpbCBmb3IgZ2VuZXJhdGluZ1xudGhlIGF1dG9tYXRhIGNlbGxzIGZvciB0aGF0IHJ1bGUuXG5cbiMjI1xuXG5jbGFzcyBUaHVtYm5haWxzXG5cbiAgICAjXG4gICAgIyBTZXR1cCB0aGUgbG9jYWwgdmFyaWFibGVzXG4gICAgIyBcbiAgICBjb25zdHJ1Y3RvcjogKEJVUyktPlxuICAgICAgICBAQlVTID0gQlVTXG4gICAgICAgIEBCVVMuc3Vic2NyaWJlKCd0aHVtYm5haWxzLnJ1bicsXG4gICAgICAgICAgICAoKT0+XG4gICAgICAgICAgICAgICAgQHJ1bigpXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIClcblxuICAgICNcbiAgICAjIFNob3cgdGhlIHJ1bGUgdGh1bWJuYWlsc1xuICAgICMgXG4gICAgcnVuOiAoKS0+XG4gICAgICAgICMgU2V0dXAgdGhlIGxpc3Qgb2YgcnVsZXNcbiAgICAgICAgcnVsZUxpc3QgPSBbMC4uMjU1XVxuXG4gICAgICAgIHRlbXBsYXRlX29wdGlvbnMgPSB7XG4gICAgICAgICAgICBydWxlTGlzdDpydWxlTGlzdCxcbiAgICAgICAgICAgIHBhdGg6QEJVUy5nZXQoJ3RodW1ibmFpbHMucGF0aCcpXG4gICAgICAgIH1cblxuICAgICAgICAjIENsZWFyIHRoZSBjdXJyZW50IHRodW1ibmFpbHMgYW5kIHBvcHVsYXRlIGl0IHZpYSBNdXN0YWNoZSB0ZW1wbGF0ZVxuICAgICAgICB0aHVtYm5haWxIVE1MID0gRE9NLmVsZW1CeUlkKCdUSFVNQk5BSUxTJywgJ1RFTVBMQVRFX1RIVU1CTkFJTFMnKS5pbm5lckhUTUxcbiAgICAgICAgcmVuZGVyZWQgPSBNdXN0YWNoZS5yZW5kZXIodGh1bWJuYWlsSFRNTCwgdGVtcGxhdGVfb3B0aW9ucylcblxuICAgICAgICBET00uZWxlbUJ5SWQoJ1dPTEZDQUdFJywgJ01BSU5fQ09OVEFJTkVSJykuaW5uZXJIVE1MID0gcmVuZGVyZWRcblxuICAgICAgICB0aHVtYnNFbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nICsgRE9NLmdldENsYXNzKCdUSFVNQk5BSUxTJywgJ1RIVU1CX0JPWCcpKVxuICAgICAgICBcbiAgICAgICAgZm9yIGkgaW4gWzAuLnRodW1ic0VsZW1zLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICB0aHVtYnNFbGVtc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCk9PkBfcnVsZVRodW1iQ2xpY2tlZChldmVudCkpXG5cbiAgICAjXG4gICAgIyBFdmVudCBoYW5kbGVyIGZvciB3aGVuIGEgcnVsZSB0aHVtYm5haWwgaXMgY2xpY2tlZFxuICAgICMgU2V0cyB0aGUgcnVsZSBhbmQgc3dpdGNoZXMgdG8gdGhlIGdlbmVyYXRvclxuICAgICMgXG4gICAgX3J1bGVUaHVtYkNsaWNrZWQ6KGV2ZW50KSAtPlxuICAgICAgICBydWxlID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1ydWxlJylcblxuICAgICAgICAjIENoYW5nZSB0aGUgY3VycmVudCBydWxlXG4gICAgICAgIEBCVVMuc2V0KCdjdXJyZW50cnVsZWRlY2ltYWwnLCBydWxlKVxuXG4gICAgICAgICMgTG9hZCB0aGUgZ2VuZXJhdG9yXG4gICAgICAgIEBCVVMuYnJvYWRjYXN0KCd0YWJzLnNob3cuZ2VuZXJhdG9yJylcblxuIl19


/*

The tabbed interface handler.

@author Destin Moulton
@git https://github.com/destinmoulton/wolfcage
@license MIT

Component of the Wolfram Cellular Automata Generator (WolfCage)

Manage the tabs for the various WolfCage feature panels.
 */
var Tabs,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Tabs = (function() {
  function Tabs(BUS) {
    this._runTabModule = bind(this._runTabModule, this);
    this.BUS = BUS;
    this._tabsElems = [];
  }

  Tabs.prototype.start = function() {
    var i, len, ref, results, tab, tabContainerElem, tabsTemplateHTML;
    tabsTemplateHTML = DOM.elemById('TABS', 'TEMPLATE').innerHTML;
    tabContainerElem = DOM.elemById('TABS', 'CONTAINER');
    tabContainerElem.innerHTML = Mustache.render(tabsTemplateHTML, {});
    this._tabsElems = tabContainerElem.querySelectorAll('li');
    ref = this._tabsElems;
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      tab = ref[i];
      results.push((function(_this) {
        return function(tab) {
          var moduleName;
          moduleName = tab.getAttribute("data-tab-module");
          if (tab.className === DOM.getClass('TABS', 'ACTIVE')) {
            _this._runTabModule(moduleName);
          }
          _this.BUS.subscribe('tabs.show.' + moduleName, function() {
            return _this._runTabModule(moduleName);
          });
          return tab.addEventListener('click', function(event) {
            _this.BUS.broadcast('tabs.show.' + moduleName);
          });
        };
      })(this)(tab));
    }
    return results;
  };

  Tabs.prototype._activateTab = function(tabName) {
    var activeClass, i, len, ref, tab;
    activeClass = DOM.getClass('TABS', 'ACTIVE');
    ref = this._tabsElems;
    for (i = 0, len = ref.length; i < len; i++) {
      tab = ref[i];
      tab.classList.remove(activeClass);
    }
    return DOM.elemByPrefix('TABS', 'TAB_PREFIX', tabName).classList.add(activeClass);
  };

  Tabs.prototype._runTabModule = function(tabName) {
    this._activateTab(tabName);
    return this.BUS.broadcast(tabName + '.run');
  };

  return Tabs;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFicy5qcyIsInNvdXJjZXMiOlsiVGFicy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLElBQUE7RUFBQTs7QUFjTTtFQU1XLGNBQUMsR0FBRDs7SUFDVCxJQUFDLENBQUEsR0FBRCxHQUFPO0lBQ1AsSUFBQyxDQUFBLFVBQUQsR0FBYztFQUZMOztpQkFPYixLQUFBLEdBQU0sU0FBQTtBQUNGLFFBQUE7SUFBQSxnQkFBQSxHQUFtQixHQUFHLENBQUMsUUFBSixDQUFhLE1BQWIsRUFBcUIsVUFBckIsQ0FBZ0MsQ0FBQztJQUVwRCxnQkFBQSxHQUFtQixHQUFHLENBQUMsUUFBSixDQUFhLE1BQWIsRUFBb0IsV0FBcEI7SUFDbkIsZ0JBQWdCLENBQUMsU0FBakIsR0FBNkIsUUFBUSxDQUFDLE1BQVQsQ0FBZ0IsZ0JBQWhCLEVBQWtDLEVBQWxDO0lBQzdCLElBQUMsQ0FBQSxVQUFELEdBQWMsZ0JBQWdCLENBQUMsZ0JBQWpCLENBQWtDLElBQWxDO0FBRWQ7QUFBQTtTQUFBLHFDQUFBOzttQkFDTSxDQUFBLFNBQUEsS0FBQTtlQUFBLFNBQUMsR0FBRDtBQUNFLGNBQUE7VUFBQSxVQUFBLEdBQWEsR0FBRyxDQUFDLFlBQUosQ0FBaUIsaUJBQWpCO1VBRWIsSUFBRyxHQUFHLENBQUMsU0FBSixLQUFpQixHQUFHLENBQUMsUUFBSixDQUFhLE1BQWIsRUFBcUIsUUFBckIsQ0FBcEI7WUFDSSxLQUFDLENBQUEsYUFBRCxDQUFlLFVBQWYsRUFESjs7VUFHQSxLQUFDLENBQUEsR0FBRyxDQUFDLFNBQUwsQ0FBZSxZQUFBLEdBQWUsVUFBOUIsRUFDSSxTQUFBO21CQUFJLEtBQUMsQ0FBQSxhQUFELENBQWUsVUFBZjtVQUFKLENBREo7aUJBSUEsR0FBRyxDQUFDLGdCQUFKLENBQXFCLE9BQXJCLEVBQ0ksU0FBQyxLQUFEO1lBQ0ksS0FBQyxDQUFBLEdBQUcsQ0FBQyxTQUFMLENBQWUsWUFBQSxHQUFlLFVBQTlCO1VBREosQ0FESjtRQVZGO01BQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFGLENBQUcsR0FBSDtBQURKOztFQVBFOztpQkEwQk4sWUFBQSxHQUFjLFNBQUMsT0FBRDtBQUNWLFFBQUE7SUFBQSxXQUFBLEdBQWMsR0FBRyxDQUFDLFFBQUosQ0FBYSxNQUFiLEVBQXFCLFFBQXJCO0FBQ2Q7QUFBQSxTQUFBLHFDQUFBOztNQUNJLEdBQUcsQ0FBQyxTQUFTLENBQUMsTUFBZCxDQUFxQixXQUFyQjtBQURKO1dBR0EsR0FBRyxDQUFDLFlBQUosQ0FBaUIsTUFBakIsRUFBeUIsWUFBekIsRUFBdUMsT0FBdkMsQ0FBK0MsQ0FBQyxTQUFTLENBQUMsR0FBMUQsQ0FBOEQsV0FBOUQ7RUFMVTs7aUJBV2QsYUFBQSxHQUFjLFNBQUMsT0FBRDtJQUVWLElBQUMsQ0FBQSxZQUFELENBQWMsT0FBZDtXQUdBLElBQUMsQ0FBQSxHQUFHLENBQUMsU0FBTCxDQUFlLE9BQUEsR0FBVSxNQUF6QjtFQUxVIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG5cblRoZSB0YWJiZWQgaW50ZXJmYWNlIGhhbmRsZXIuXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vd29sZmNhZ2VcbkBsaWNlbnNlIE1JVFxuXG5Db21wb25lbnQgb2YgdGhlIFdvbGZyYW0gQ2VsbHVsYXIgQXV0b21hdGEgR2VuZXJhdG9yIChXb2xmQ2FnZSlcblxuTWFuYWdlIHRoZSB0YWJzIGZvciB0aGUgdmFyaW91cyBXb2xmQ2FnZSBmZWF0dXJlIHBhbmVscy5cblxuIyMjXG5cbmNsYXNzIFRhYnNcbiAgICBcbiAgICAjXG4gICAgIyBTZXR1cCB0aGUgbG9jYWwgc2hhcmVkIHZhcmlhYmxlc1xuICAgICMgQGNvbnN0cnVjdG9yXG4gICAgIyBcbiAgICBjb25zdHJ1Y3RvcjogKEJVUyktPlxuICAgICAgICBAQlVTID0gQlVTXG4gICAgICAgIEBfdGFic0VsZW1zID0gW11cblxuICAgICNcbiAgICAjIFN0YXJ0IHRoZSB0YWJiZWQgaW50ZXJmYWNlXG4gICAgIyBcbiAgICBzdGFydDooKS0+XG4gICAgICAgIHRhYnNUZW1wbGF0ZUhUTUwgPSBET00uZWxlbUJ5SWQoJ1RBQlMnLCAnVEVNUExBVEUnKS5pbm5lckhUTUxcblxuICAgICAgICB0YWJDb250YWluZXJFbGVtID0gRE9NLmVsZW1CeUlkKCdUQUJTJywnQ09OVEFJTkVSJylcbiAgICAgICAgdGFiQ29udGFpbmVyRWxlbS5pbm5lckhUTUwgPSBNdXN0YWNoZS5yZW5kZXIodGFic1RlbXBsYXRlSFRNTCwge30pXG4gICAgICAgIEBfdGFic0VsZW1zID0gdGFiQ29udGFpbmVyRWxlbS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpXG5cbiAgICAgICAgZm9yIHRhYiBpbiBAX3RhYnNFbGVtc1xuICAgICAgICAgICAgZG8odGFiKSA9PlxuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWUgPSB0YWIuZ2V0QXR0cmlidXRlKFwiZGF0YS10YWItbW9kdWxlXCIpXG5cbiAgICAgICAgICAgICAgICBpZiB0YWIuY2xhc3NOYW1lIGlzIERPTS5nZXRDbGFzcygnVEFCUycsICdBQ1RJVkUnKVxuICAgICAgICAgICAgICAgICAgICBAX3J1blRhYk1vZHVsZShtb2R1bGVOYW1lKVxuXG4gICAgICAgICAgICAgICAgQEJVUy5zdWJzY3JpYmUoJ3RhYnMuc2hvdy4nICsgbW9kdWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgKCk9PkBfcnVuVGFiTW9kdWxlKG1vZHVsZU5hbWUpXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAgICAgKGV2ZW50KT0+XG4gICAgICAgICAgICAgICAgICAgICAgICBAQlVTLmJyb2FkY2FzdCgndGFicy5zaG93LicgKyBtb2R1bGVOYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICAgICAgKVxuICAgICNcbiAgICAjIEFjdGl2YXRlIGEgdGFiIHZpYSBzdHJpbmcgbmFtZVxuICAgICMgXG4gICAgX2FjdGl2YXRlVGFiOiAodGFiTmFtZSktPlxuICAgICAgICBhY3RpdmVDbGFzcyA9IERPTS5nZXRDbGFzcygnVEFCUycsICdBQ1RJVkUnKVxuICAgICAgICBmb3IgdGFiIGluIEBfdGFic0VsZW1zXG4gICAgICAgICAgICB0YWIuY2xhc3NMaXN0LnJlbW92ZShhY3RpdmVDbGFzcylcblxuICAgICAgICBET00uZWxlbUJ5UHJlZml4KCdUQUJTJywgJ1RBQl9QUkVGSVgnLCB0YWJOYW1lKS5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKVxuXG4gICAgI1xuICAgICMgUnVuIHRoZSBUYWJcbiAgICAjICAtIGllIGlmIEdlbmVyYXRvciBpcyBjbGlja2VkLCBydW4gdGhlIEdlbmVyYXRvclxuICAgICNcbiAgICBfcnVuVGFiTW9kdWxlOih0YWJOYW1lKT0+XG4gICAgICAgICMgQWN0aXZhdGUgdGhlIHRhYlxuICAgICAgICBAX2FjdGl2YXRlVGFiKHRhYk5hbWUpXG5cbiAgICAgICAgIyBSdW4gdGhlIHRhYlxuICAgICAgICBAQlVTLmJyb2FkY2FzdCh0YWJOYW1lICsgJy5ydW4nKVxuICAgICJdfQ==


/*

The top row editor for WolfCage.

@author Destin Moulton
@git https://github.com/destinmoulton/wolfcage
@license MIT

Component of the Wolfram Cellular Automata Generator (WolfCage)

The user can edit the top/root row, allowing them to "seed"
the generator to test configurations and create new variations
on the standard rules presented in A New Kind of Science.
 */
var TopRowEditor,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

TopRowEditor = (function() {
  function TopRowEditor(BUS) {
    this._toggleEditorCell = bind(this._toggleEditorCell, this);
    this._moveSlider = bind(this._moveSlider, this);
    this.BUS = BUS;
    this._editorCellsElems = [];
    this._aRowBinary = [];
    this._noColumns = 151;
    this._colWidth = 5;
    this._rowHeight = 5;
    this._sliderLeft = 0;
    this._sliderCols = 26;
    this._sliderPxToMid = (this._sliderCols / 2) * this._colWidth;
    this._editorCellWidth = 29;
    this._totalWidth = this._colWidth * this._noColumns;
    this._generateInitialBinary();
    this.BUS.subscribe('toproweditor.run', (function(_this) {
      return function() {
        _this.run();
      };
    })(this));
  }

  TopRowEditor.prototype.run = function() {
    this._setupContainerTemplate();
    this._sliderElem = DOM.elemById('TOPROWEDITOR', 'SLIDER');
    this._rowContainerElem = DOM.elemById('TOPROWEDITOR', 'ROW_CONTAINER');
    this._jEditorContainer = DOM.elemById('TOPROWEDITOR', 'EDITOR_CONTAINER');
    this._rowContainerElem.style.height = this._rowHeight + "px";
    this._rowContainerElem.style.width = this._totalWidth + "px";
    this._setupSlider();
    this._buildRow();
    this._buildEditorCells();
    this._updateEditorCells(1);
    return this._setupButtonEvents();
  };

  TopRowEditor.prototype._setupContainerTemplate = function() {
    var toproweditorHTML, wolfcageMainElem;
    toproweditorHTML = DOM.elemById('TOPROWEDITOR', 'TEMPLATE_TOPROWEDITOR').innerHTML;
    wolfcageMainElem = DOM.elemById('WOLFCAGE', 'MAIN_CONTAINER');
    return wolfcageMainElem.innerHTML = Mustache.render(toproweditorHTML, {});
  };

  TopRowEditor.prototype._setupSlider = function() {
    var isSliderInDragMode, sliderArrowLeftElem, sliderArrowRightElem, sliderContainerElem;
    sliderContainerElem = DOM.elemById('TOPROWEDITOR', 'SLIDER_CONTAINER');
    sliderContainerElem.style.width = this._totalWidth + "px";
    this._sliderElem.style.width = (this._colWidth * this._sliderCols) + "px";
    sliderArrowLeftElem = DOM.elemById('TOPROWEDITOR', 'SLIDER_ARROW_LEFT');
    sliderArrowRightElem = DOM.elemById('TOPROWEDITOR', 'SLIDER_ARROW_RIGHT');
    isSliderInDragMode = false;
    this._sliderElem.addEventListener('click', (function(_this) {
      return function() {
        if (isSliderInDragMode) {
          isSliderInDragMode = false;
          sliderArrowLeftElem.style.display = "none";
          return sliderArrowRightElem.style.display = "none";
        } else {
          isSliderInDragMode = true;
          sliderArrowLeftElem.style.display = "block";
          return sliderArrowRightElem.style.display = "block";
        }
      };
    })(this));
    this._sliderElem.addEventListener('mousemove', (function(_this) {
      return function(event) {
        if (isSliderInDragMode) {
          return _this._moveSlider(event);
        }
      };
    })(this));
    return this._sliderInitialOffset = this._getOffsetPosition(this._sliderElem);
  };

  TopRowEditor.prototype._setupButtonEvents = function() {
    DOM.elemById('TOPROWEDITOR', 'BUTTON_GENERATE').addEventListener('click', (function(_this) {
      return function() {
        _this.BUS.broadcast('tabs.show.generator');
      };
    })(this));
    return DOM.elemById('TOPROWEDITOR', 'BUTTON_RESET').addEventListener('click', (function(_this) {
      return function(event) {
        return _this._resetRow(event);
      };
    })(this));
  };

  TopRowEditor.prototype._getOffsetPosition = function(elem) {
    var left, top;
    top = elem.getBoundingClientRect().top + window.pageYOffset;
    left = elem.getBoundingClientRect().left + window.pageXOffset;
    return {
      top: top,
      left: left
    };
  };

  TopRowEditor.prototype._resetRow = function(event) {
    this._generateInitialBinary();
    return this.run();
  };

  TopRowEditor.prototype._moveSlider = function(ev) {
    var closestEdgePx, leftCellNo, leftEdgeSlider, rightEdgeSlider, widthOfContainer, xMousePos;
    xMousePos = ev.pageX - this._sliderInitialOffset.left;
    closestEdgePx = xMousePos - (xMousePos % this._colWidth);
    leftEdgeSlider = closestEdgePx - this._sliderPxToMid;
    if (leftEdgeSlider < 0) {
      leftEdgeSlider = 0;
    }
    rightEdgeSlider = closestEdgePx + this._sliderPxToMid + this._colWidth;
    widthOfContainer = this._totalWidth + this._colWidth;
    if (leftEdgeSlider >= 0 && rightEdgeSlider <= widthOfContainer) {
      this._sliderElem.style.left = leftEdgeSlider + "px";
      leftCellNo = (leftEdgeSlider / this._colWidth) + 1;
      return this._updateEditorCells(leftCellNo);
    }
  };

  TopRowEditor.prototype._updateEditorCells = function(beginCell) {
    var cell, cellPos, j, ref, results;
    results = [];
    for (cell = j = 1, ref = this._sliderCols; 1 <= ref ? j <= ref : j >= ref; cell = 1 <= ref ? ++j : --j) {
      cellPos = cell + beginCell - 1;
      this._editorCellsElems[cell].innerHTML = cellPos;
      this._editorCellsElems[cell].setAttribute('data-cellIndex', cellPos);
      if (this._aRowBinary[cellPos] === 1) {
        results.push(this._editorCellsElems[cell].classList.add(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL_ACTIVE')));
      } else {
        results.push(this._editorCellsElems[cell].classList.remove(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL_ACTIVE')));
      }
    }
    return results;
  };

  TopRowEditor.prototype._buildEditorCells = function() {
    var cell, cellHtml, cellTemplateHTML, cells, i, j, k, leftEdgeSlider, ref, ref1, results, tmpId;
    cellTemplateHTML = DOM.elemById('TOPROWEDITOR', 'TEMPLATE_EDITOR_CELL').innerHTML;
    this._jEditorContainer.style.width = (this._sliderCols * this._editorCellWidth) + "px";
    cellHtml = "";
    for (cell = j = 1, ref = this._sliderCols; 1 <= ref ? j <= ref : j >= ref; cell = 1 <= ref ? ++j : --j) {
      tmpId = "editor-cell-" + cell;
      leftEdgeSlider = (cell - 1) * this._editorCellWidth;
      cellHtml += Mustache.render(cellTemplateHTML, {
        id: tmpId,
        left: leftEdgeSlider
      });
    }
    this._jEditorContainer.innerHTML = cellHtml;
    cells = document.getElementsByClassName(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL'));
    results = [];
    for (i = k = 0, ref1 = cells.length - 1; 0 <= ref1 ? k <= ref1 : k >= ref1; i = 0 <= ref1 ? ++k : --k) {
      this._editorCellsElems[i + 1] = cells[i];
      results.push(cells[i].addEventListener('click', this._toggleEditorCell));
    }
    return results;
  };

  TopRowEditor.prototype._toggleEditorCell = function(event) {
    var cellNo, editorCellElem, sliderCellElem, sliderColPrefix;
    editorCellElem = event.target;
    cellNo = editorCellElem.getAttribute('data-cellIndex');
    sliderColPrefix = DOM.getPrefix('TOPROWEDITOR', 'SLIDER_COL');
    sliderCellElem = document.getElementById(sliderColPrefix + cellNo);
    if (this._aRowBinary[cellNo] === 1) {
      this._aRowBinary[cellNo] = 0;
      editorCellElem.classList.remove(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL_ACTIVE'));
      sliderCellElem.classList.remove(DOM.getClass('TOPROWEDITOR', 'SLIDER_CELL_ACTIVE'));
    } else {
      this._aRowBinary[cellNo] = 1;
      editorCellElem.classList.add(DOM.getClass('TOPROWEDITOR', 'EDITOR_CELL_ACTIVE'));
      sliderCellElem.classList.add(DOM.getClass('TOPROWEDITOR', 'SLIDER_CELL_ACTIVE'));
    }
    return this.BUS.set('toprowbinary', this._aRowBinary);
  };

  TopRowEditor.prototype._generateInitialBinary = function() {
    var col, j, ref, seed_col;
    seed_col = Math.ceil(this._noColumns / 2);
    for (col = j = 1, ref = this._noColumns; 1 <= ref ? j <= ref : j >= ref; col = 1 <= ref ? ++j : --j) {
      if (col === seed_col) {
        this._aRowBinary[col] = 1;
      } else {
        this._aRowBinary[col] = 0;
      }
    }
    return this.BUS.set('toprowbinary', this._aRowBinary);
  };

  TopRowEditor.prototype._buildRow = function() {
    var activeClass, col, j, leftEdgeSlider, ref, rowHtml, sliderColPrefix, smallcellTemplateHTML, tmpId;
    smallcellTemplateHTML = DOM.elemById('TOPROWEDITOR', 'TEMPLATE_SLIDER_CELL').innerHTML;
    sliderColPrefix = DOM.getPrefix('TOPROWEDITOR', 'SLIDER_COL');
    rowHtml = "";
    for (col = j = 1, ref = this._noColumns; 1 <= ref ? j <= ref : j >= ref; col = 1 <= ref ? ++j : --j) {
      activeClass = "";
      if (this._aRowBinary[col] === 1) {
        activeClass = DOM.getClass('TOPROWEDITOR', 'SLIDER_CELL_ACTIVE');
      }
      leftEdgeSlider = (col - 1) * this._colWidth;
      tmpId = sliderColPrefix + col;
      rowHtml += Mustache.render(smallcellTemplateHTML, {
        id: tmpId,
        left: leftEdgeSlider,
        activeClass: activeClass
      });
    }
    return this._rowContainerElem.innerHTML = rowHtml;
  };

  return TopRowEditor;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9wUm93RWRpdG9yLmpzIiwic291cmNlcyI6WyJUb3BSb3dFZGl0b3IuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLFlBQUE7RUFBQTs7QUFnQk07RUFNVyxzQkFBQyxHQUFEOzs7SUFDVCxJQUFDLENBQUEsR0FBRCxHQUFPO0lBRVAsSUFBQyxDQUFBLGlCQUFELEdBQXFCO0lBRXJCLElBQUMsQ0FBQSxXQUFELEdBQWU7SUFDZixJQUFDLENBQUEsVUFBRCxHQUFjO0lBQ2QsSUFBQyxDQUFBLFNBQUQsR0FBYTtJQUNiLElBQUMsQ0FBQSxVQUFELEdBQWM7SUFDZCxJQUFDLENBQUEsV0FBRCxHQUFlO0lBQ2YsSUFBQyxDQUFBLFdBQUQsR0FBZTtJQUNmLElBQUMsQ0FBQSxjQUFELEdBQWtCLENBQUMsSUFBQyxDQUFBLFdBQUQsR0FBZSxDQUFoQixDQUFBLEdBQXFCLElBQUMsQ0FBQTtJQUN4QyxJQUFDLENBQUEsZ0JBQUQsR0FBb0I7SUFDcEIsSUFBQyxDQUFBLFdBQUQsR0FBZSxJQUFDLENBQUEsU0FBRCxHQUFXLElBQUMsQ0FBQTtJQUUzQixJQUFDLENBQUEsc0JBQUQsQ0FBQTtJQUVBLElBQUMsQ0FBQSxHQUFHLENBQUMsU0FBTCxDQUFlLGtCQUFmLEVBQ0ksQ0FBQSxTQUFBLEtBQUE7YUFBQSxTQUFBO1FBQ0ksS0FBQyxDQUFBLEdBQUQsQ0FBQTtNQURKO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQURKO0VBakJTOzt5QkEwQmIsR0FBQSxHQUFLLFNBQUE7SUFFRCxJQUFDLENBQUEsdUJBQUQsQ0FBQTtJQUdBLElBQUMsQ0FBQSxXQUFELEdBQWUsR0FBRyxDQUFDLFFBQUosQ0FBYSxjQUFiLEVBQTRCLFFBQTVCO0lBQ2YsSUFBQyxDQUFBLGlCQUFELEdBQXFCLEdBQUcsQ0FBQyxRQUFKLENBQWEsY0FBYixFQUE2QixlQUE3QjtJQUNyQixJQUFDLENBQUEsaUJBQUQsR0FBcUIsR0FBRyxDQUFD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TUFHQSxjQUFBLEdBQWtCLENBQUMsR0FBQSxHQUFNLENBQVAsQ0FBQSxHQUFZLElBQUMsQ0FBQTtNQUMvQixLQUFBLEdBQVEsZUFBQSxHQUFrQjtNQUcxQixPQUFBLElBQVcsUUFBUSxDQUFDLE1BQVQsQ0FBZ0IscUJBQWhCLEVBQXVDO1FBQUMsRUFBQSxFQUFHLEtBQUo7UUFBVyxJQUFBLEVBQUssY0FBaEI7UUFBZ0MsV0FBQSxFQUFZLFdBQTVDO09BQXZDO0FBVGY7V0FZQSxJQUFDLENBQUEsaUJBQWlCLENBQUMsU0FBbkIsR0FBK0I7RUFuQnhCIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG5cblRoZSB0b3Agcm93IGVkaXRvciBmb3IgV29sZkNhZ2UuXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vd29sZmNhZ2VcbkBsaWNlbnNlIE1JVFxuXG5Db21wb25lbnQgb2YgdGhlIFdvbGZyYW0gQ2VsbHVsYXIgQXV0b21hdGEgR2VuZXJhdG9yIChXb2xmQ2FnZSlcblxuVGhlIHVzZXIgY2FuIGVkaXQgdGhlIHRvcC9yb290IHJvdywgYWxsb3dpbmcgdGhlbSB0byBcInNlZWRcIlxudGhlIGdlbmVyYXRvciB0byB0ZXN0IGNvbmZpZ3VyYXRpb25zIGFuZCBjcmVhdGUgbmV3IHZhcmlhdGlvbnNcbm9uIHRoZSBzdGFuZGFyZCBydWxlcyBwcmVzZW50ZWQgaW4gQSBOZXcgS2luZCBvZiBTY2llbmNlLlxuXG4jIyNcblxuY2xhc3MgVG9wUm93RWRpdG9yXG5cbiAgICAjXG4gICAgIyBTZXR1cCB0aGUgbG9jYWxseSBzaGFyZWQgdmFyaWFibGVzXG4gICAgIyBAY29uc3RydWN0b3JcbiAgICAjIFxuICAgIGNvbnN0cnVjdG9yOiAoQlVTKS0+XG4gICAgICAgIEBCVVMgPSBCVVNcbiAgICAgICAgXG4gICAgICAgIEBfZWRpdG9yQ2VsbHNFbGVtcyA9IFtdXG5cbiAgICAgICAgQF9hUm93QmluYXJ5ID0gW11cbiAgICAgICAgQF9ub0NvbHVtbnMgPSAxNTFcbiAgICAgICAgQF9jb2xXaWR0aCA9IDVcbiAgICAgICAgQF9yb3dIZWlnaHQgPSA1XG4gICAgICAgIEBfc2xpZGVyTGVmdCA9IDBcbiAgICAgICAgQF9zbGlkZXJDb2xzID0gMjZcbiAgICAgICAgQF9zbGlkZXJQeFRvTWlkID0gKEBfc2xpZGVyQ29scyAvIDIpICogQF9jb2xXaWR0aFxuICAgICAgICBAX2VkaXRvckNlbGxXaWR0aCA9IDI5XG4gICAgICAgIEBfdG90YWxXaWR0aCA9IEBfY29sV2lkdGgqQF9ub0NvbHVtbnNcblxuICAgICAgICBAX2dlbmVyYXRlSW5pdGlhbEJpbmFyeSgpXG5cbiAgICAgICAgQEJVUy5zdWJzY3JpYmUoJ3RvcHJvd2VkaXRvci5ydW4nLFxuICAgICAgICAgICAgKCk9PlxuICAgICAgICAgICAgICAgIEBydW4oKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICApXG5cbiAgICAjXG4gICAgIyBTdGFydCB0aGUgdG9wIHJvdyBlZGl0b3JcbiAgICAjIFxuICAgIHJ1bjogKCktPlxuICAgICAgICBcbiAgICAgICAgQF9zZXR1cENvbnRhaW5lclRlbXBsYXRlKClcblxuICAgICAgICAjIFNldCB0aGUgbG9jYWwgZWxlbWVudHMgKHRvIGFsbGV2aWF0ZSBsb29rdXBzKSAgICAgICAgXG4gICAgICAgIEBfc2xpZGVyRWxlbSA9IERPTS5lbGVtQnlJZCgnVE9QUk9XRURJVE9SJywnU0xJREVSJylcbiAgICAgICAgQF9yb3dDb250YWluZXJFbGVtID0gRE9NLmVsZW1CeUlkKCdUT1BST1dFRElUT1InLCAnUk9XX0NPTlRBSU5FUicpXG4gICAgICAgIEBfakVkaXRvckNvbnRhaW5lciA9IERPTS5lbGVtQnlJZCgnVE9QUk9XRURJVE9SJywgJ0VESVRPUl9DT05UQUlORVInKVxuXG4gICAgICAgICMgU2V0IHRoZSBkaW1lbnNpb25zXG4gICAgICAgIEBfcm93Q29udGFpbmVyRWxlbS5zdHlsZS5oZWlnaHQgPSBAX3Jvd0hlaWdodCArIFwicHhcIlxuICAgICAgICBAX3Jvd0NvbnRhaW5lckVsZW0uc3R5bGUud2lkdGggPSBAX3RvdGFsV2lkdGggKyBcInB4XCJcbiAgICAgICAgXG4gICAgICAgIEBfc2V0dXBTbGlkZXIoKSAgICAgICAgXG5cbiAgICAgICAgIyBCdWlsZCB0aGUgcm93IGFuZCB0aGUgZWRpdG9yIFxuICAgICAgICBAX2J1aWxkUm93KClcbiAgICAgICAgQF9idWlsZEVkaXRvckNlbGxzKClcbiAgICAgICAgQF91cGRhdGVFZGl0b3JDZWxscygxKVxuICAgICAgICBAX3NldHVwQnV0dG9uRXZlbnRzKClcbiAgICAgICAgXG5cbiAgICAjXG4gICAgIyBQb3B1bGF0ZSB0aGUgbWFpbiBjb250YWluZXIgd2l0aCB0aGUgdGVtcGxhdGVcbiAgICAjXG4gICAgX3NldHVwQ29udGFpbmVyVGVtcGxhdGU6ICgpLT5cbiAgICAgICAgdG9wcm93ZWRpdG9ySFRNTCA9IERPTS5lbGVtQnlJZCgnVE9QUk9XRURJVE9SJywgJ1RFTVBMQVRFX1RPUFJPV0VESVRPUicpLmlubmVySFRNTFxuICAgICAgICB3b2xmY2FnZU1haW5FbGVtID0gRE9NLmVsZW1CeUlkKCdXT0xGQ0FHRScsICdNQUlOX0NPTlRBSU5FUicpXG4gICAgICAgIHdvbGZjYWdlTWFpbkVsZW0uaW5uZXJIVE1MID0gTXVzdGFjaGUucmVuZGVyKHRvcHJvd2VkaXRvckhUTUwse30pXG5cbiAgICAjXG4gICAgIyBTZXR1cCB0aGUgc2xpZGVyICh6b29tZXIpXG4gICAgI1xuICAgIF9zZXR1cFNsaWRlcjogKCktPlxuICAgICAgICBzbGlkZXJDb250YWluZXJFbGVtID0gRE9NLmVsZW1CeUlkKCdUT1BST1dFRElUT1InLCAnU0xJREVSX0NPTlRBSU5FUicpXG4gICAgICAgIHNsaWRlckNvbnRhaW5lckVsZW0uc3R5bGUud2lkdGggPSBAX3RvdGFsV2lkdGggKyBcInB4XCJcblxuICAgICAgICBAX3NsaWRlckVsZW0uc3R5bGUud2lkdGggPSAoQF9jb2xXaWR0aCAqIEBfc2xpZGVyQ29scykgKyBcInB4XCIgXG5cbiAgICAgICAgc2xpZGVyQXJyb3dMZWZ0RWxlbSA9IERPTS5lbGVtQnlJZCgnVE9QUk9XRURJVE9SJywgJ1NMSURFUl9BUlJPV19MRUZUJylcbiAgICAgICAgc2xpZGVyQXJyb3dSaWdodEVsZW0gPSBET00uZWxlbUJ5SWQoJ1RPUFJPV0VESVRPUicsICdTTElERVJfQVJST1dfUklHSFQnKVxuICAgICAgICBpc1NsaWRlckluRHJhZ01vZGUgPSBmYWxzZVxuXG4gICAgICAgICMgRXZlbnQgaGFuZGxlciBmb3Igd2hlbiBhIGNsaWNrIG9jY3VycyB3aGlsZSBzbGlkaW5nIHRoZSBcInpvb21cIlxuICAgICAgICBAX3NsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCA9PlxuICAgICAgICAgICAgaWYgaXNTbGlkZXJJbkRyYWdNb2RlXG4gICAgICAgICAgICAgICAgaXNTbGlkZXJJbkRyYWdNb2RlID0gZmFsc2VcbiAgICAgICAgICAgICAgICBzbGlkZXJBcnJvd0xlZnRFbGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIHNsaWRlckFycm93UmlnaHRFbGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGlzU2xpZGVySW5EcmFnTW9kZSA9IHRydWVcbiAgICAgICAgICAgICAgICBzbGlkZXJBcnJvd0xlZnRFbGVtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICAgICAgICAgICAgICBzbGlkZXJBcnJvd1JpZ2h0RWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXG4gICAgICAgIClcblxuICAgICAgICAjIEV2ZW50IGhhbmRsZXIgZm9yIHdoZW4gdGhlIG1vdXNlIG1vdmVzIG92ZXIgdGhlIFwiem9vbVwiIHNsaWRlclxuICAgICAgICBAX3NsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGV2ZW50KSA9PlxuICAgICAgICAgICAgaWYgaXNTbGlkZXJJbkRyYWdNb2RlIFxuICAgICAgICAgICAgICAgIEBfbW92ZVNsaWRlcihldmVudClcbiAgICAgICAgKVxuXG4gICAgICAgICMgR2V0IHRoZSBpbml0aWFsIHNsaWRlciBwb3NpdGlvblxuICAgICAgICBAX3NsaWRlckluaXRpYWxPZmZzZXQgPSBAX2dldE9mZnNldFBvc2l0aW9uKEBfc2xpZGVyRWxlbSlcblxuICAgIFxuICAgICNcbiAgICAjIFNldHVwIHRoZSBCdXR0b24gZXZlbnRzXG4gICAgI1xuICAgIF9zZXR1cEJ1dHRvbkV2ZW50czogKCktPlxuICAgICAgICAjIFRoZSBHZW5lcmF0ZSBjbGljayBldmVudFxuICAgICAgICBET00uZWxlbUJ5SWQoJ1RPUFJPV0VESVRPUicsICdCVVRUT05fR0VORVJBVEUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsXG4gICAgICAgICAgICAoKT0+XG4gICAgICAgICAgICAgICAgQEJVUy5icm9hZGNhc3QoJ3RhYnMuc2hvdy5nZW5lcmF0b3InKVxuICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICApXG5cbiAgICAgICAgIyBSZXNldCBidXR0b24gY2xpY2sgZXZlbnRcbiAgICAgICAgRE9NLmVsZW1CeUlkKCdUT1BST1dFRElUT1InLCAnQlVUVE9OX1JFU0VUJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLFxuICAgICAgICAgICAgKGV2ZW50KT0+QF9yZXNldFJvdyhldmVudClcbiAgICAgICAgKVxuXG4gICAgI1xuICAgICMgR2V0IHRoZSBvZmZzZXQgcG9zaXRpb24gZm9yIGFuIGVsZW1lbnRcbiAgICAjXG4gICAgX2dldE9mZnNldFBvc2l0aW9uOiAoZWxlbSktPlxuICAgICAgICB0b3AgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldFxuICAgICAgICBsZWZ0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0XG4gICAgICAgIHJldHVybiB7IHRvcCwgbGVmdCB9O1xuICAgICNcbiAgICAjIEV2ZW50IGhhbmRsZXIgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIFJlc2V0IGJ1dHRvblxuICAgICMgXG4gICAgX3Jlc2V0Um93OiAoZXZlbnQpLT5cbiAgICAgICAgQF9nZW5lcmF0ZUluaXRpYWxCaW5hcnkoKVxuICAgICAgICBAcnVuKClcblxuXG4gICAgI1xuICAgICMgRXZlbnQgaGFuZGxlciB3aGVuIHRoZSBtb3VzZSBtb3ZlcyB0aGUgc2xpZGVyXG4gICAgIyBcbiAgICBfbW92ZVNsaWRlcjogKGV2KT0+XG5cbiAgICAgICAgIyBHZXQgdGhlIG1vdXNlIHBvc2l0aW9uXG4gICAgICAgICN4TW91c2VQb3MgPSBldi5jbGllbnRYXG4gICAgICAgIHhNb3VzZVBvcyA9IGV2LnBhZ2VYIC0gQF9zbGlkZXJJbml0aWFsT2Zmc2V0LmxlZnRcbiAgICAgICAgY2xvc2VzdEVkZ2VQeCA9IHhNb3VzZVBvcyAtICh4TW91c2VQb3MgJSBAX2NvbFdpZHRoKVxuXG4gICAgICAgICMgQ2FsY3VsYXRlIHRoZSByZWxhdGl2ZSBwb3NpdGlvbiBvZiB0aGUgc2xpZGVyXG4gICAgICAgIGxlZnRFZGdlU2xpZGVyID0gY2xvc2VzdEVkZ2VQeCAtIEBfc2xpZGVyUHhUb01pZFxuICAgICAgICBpZiBsZWZ0RWRnZVNsaWRlciA8IDBcbiAgICAgICAgICAgIGxlZnRFZGdlU2xpZGVyID0gMFxuICAgICAgICBcbiAgICAgICAgcmlnaHRFZGdlU2xpZGVyID0gY2xvc2VzdEVkZ2VQeCArIEBfc2xpZGVyUHhUb01pZCtAX2NvbFdpZHRoXG4gICAgICAgIHdpZHRoT2ZDb250YWluZXIgPSBAX3RvdGFsV2lkdGggKyBAX2NvbFdpZHRoXG4gICAgICAgIFxuICAgICAgICBpZiBsZWZ0RWRnZVNsaWRlciA+PSAwICYmIHJpZ2h0RWRnZVNsaWRlciA8PSAgd2lkdGhPZkNvbnRhaW5lclxuICAgICAgICAgICAgQF9zbGlkZXJFbGVtLnN0eWxlLmxlZnQgPSBsZWZ0RWRnZVNsaWRlciArIFwicHhcIlxuXG4gICAgICAgICAgICBsZWZ0Q2VsbE5vID0gKGxlZnRFZGdlU2xpZGVyIC8gQF9jb2xXaWR0aCkgKyAxXG5cbiAgICAgICAgICAgIEBfdXBkYXRlRWRpdG9yQ2VsbHMobGVmdENlbGxObylcblxuXG4gICAgI1xuICAgICMgQ2hhbmdlIHRoZSBjZWxscyBhdmFpbGFibGUgdG8gZWRpdC5cbiAgICAjIFxuICAgICMgV2hlbiB0aGUgdXNlciBtb3ZlcyB0aGUgc2xpZGVyIHRvIFwiem9vbVwiIG9uIGEgc2VjdGlvblxuICAgICMgdGhpcyB3aWxsIHVwZGF0ZSB0aGUgZWRpdGFibGUgY2VsbHMuXG4gICAgIyBcbiAgICBfdXBkYXRlRWRpdG9yQ2VsbHM6IChiZWdpbkNlbGwpLT5cbiAgICAgICAgXG4gICAgICAgIGZvciBjZWxsIGluIFsxLi5AX3NsaWRlckNvbHNdXG4gICAgICAgICAgICBjZWxsUG9zID0gY2VsbCtiZWdpbkNlbGwtMVxuXG4gICAgICAgICAgICBAX2VkaXRvckNlbGxzRWxlbXNbY2VsbF0uaW5uZXJIVE1MID0gY2VsbFBvc1xuICAgICAgICAgICAgQF9lZGl0b3JDZWxsc0VsZW1zW2NlbGxdLnNldEF0dHJpYnV0ZSgnZGF0YS1jZWxsSW5kZXgnLCBjZWxsUG9zKVxuXG4gICAgICAgICAgICAjIENoYW5nZSB0aGUgc3R5bGUgdG8gcmVmbGVjdCB3aGljaCBjZWxscyBhcmUgYWN0aXZlXG4gICAgICAgICAgICBpZiBAX2FSb3dCaW5hcnlbY2VsbFBvc10gaXMgMVxuICAgICAgICAgICAgICAgIEBfZWRpdG9yQ2VsbHNFbGVtc1tjZWxsXS5jbGFzc0xpc3QuYWRkKERPTS5nZXRDbGFzcygnVE9QUk9XRURJVE9SJywgJ0VESVRPUl9DRUxMX0FDVElWRScpKVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIEBfZWRpdG9yQ2VsbHNFbGVtc1tjZWxsXS5jbGFzc0xpc3QucmVtb3ZlKERPTS5nZXRDbGFzcygnVE9QUk9XRURJVE9SJywgJ0VESVRPUl9DRUxMX0FDVElWRScpKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAjXG4gICAgIyBCdWlsZCB0aGUgZWRpdG9yIGNlbGxzXG4gICAgIyBcbiAgICBfYnVpbGRFZGl0b3JDZWxsczogKCktPlxuXG4gICAgICAgIGNlbGxUZW1wbGF0ZUhUTUwgPSBET00uZWxlbUJ5SWQoJ1RPUFJPV0VESVRPUicsICdURU1QTEFURV9FRElUT1JfQ0VMTCcpLmlubmVySFRNTFxuICAgICAgICBcbiAgICAgICAgQF9qRWRpdG9yQ29udGFpbmVyLnN0eWxlLndpZHRoID0gKEBfc2xpZGVyQ29scyAqIEBfZWRpdG9yQ2VsbFdpZHRoKSArIFwicHhcIlxuICAgICAgICBjZWxsSHRtbCA9IFwiXCJcbiAgICAgICAgZm9yIGNlbGwgaW4gWzEuLkBfc2xpZGVyQ29sc11cbiAgICAgICAgICAgIHRtcElkID0gXCJlZGl0b3ItY2VsbC1cIitjZWxsXG4gICAgICAgICAgICBsZWZ0RWRnZVNsaWRlciA9IChjZWxsLTEpKkBfZWRpdG9yQ2VsbFdpZHRoXG5cbiAgICAgICAgICAgICMgQ3JlYXRlIGFuZCBhcHBlbmQgdGhlIGVkaXRvciBjZWxsIHZpYSBNdXN0YWNoZSB0ZW1wbGF0ZVxuICAgICAgICAgICAgY2VsbEh0bWwgKz0gTXVzdGFjaGUucmVuZGVyKGNlbGxUZW1wbGF0ZUhUTUwsIHtpZDp0bXBJZCwgbGVmdDpsZWZ0RWRnZVNsaWRlcn0pXG4gICAgICAgICAgICAjIFNldHVwIHRoZSBjbGljayBldmVudCB3aGVuIGEgdXNlciB0b2dnbGVzIGEgY2VsbCBieSBjbGlja2luZyBvbiBpdFxuXG4gICAgICAgIEBfakVkaXRvckNvbnRhaW5lci5pbm5lckhUTUwgPSBjZWxsSHRtbFxuXG4gICAgICAgIGNlbGxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShET00uZ2V0Q2xhc3MoJ1RPUFJPV0VESVRPUicsICdFRElUT1JfQ0VMTCcpKVxuICAgICAgICBcbiAgICAgICAgZm9yIGkgaW4gWzAuLmNlbGxzLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICBAX2VkaXRvckNlbGxzRWxlbXNbaSsxXSA9IGNlbGxzW2ldXG4gICAgICAgICAgICBjZWxsc1tpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIEBfdG9nZ2xlRWRpdG9yQ2VsbClcbiAgICAgICAgXG5cblxuICAgICNcbiAgICAjIEV2ZW50IGhhbmRsZXIgZm9yIHdoZW4gYSB1c2VyIGNsaWNrcyBvbiBhIGNlbGwgdGhhdCB0aGV5XG4gICAgIyB3YW50IHRvIGFjdGl2YXRlIG9yIGRlYWN0aXZhdGVcbiAgICAjIFxuICAgIF90b2dnbGVFZGl0b3JDZWxsOiAoZXZlbnQpPT5cblxuICAgICAgICBlZGl0b3JDZWxsRWxlbSA9IGV2ZW50LnRhcmdldFxuICAgICAgICBjZWxsTm8gPSBlZGl0b3JDZWxsRWxlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2VsbEluZGV4JylcbiAgICAgICAgc2xpZGVyQ29sUHJlZml4ID0gRE9NLmdldFByZWZpeCgnVE9QUk9XRURJVE9SJywgJ1NMSURFUl9DT0wnKVxuICAgICAgICBzbGlkZXJDZWxsRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNsaWRlckNvbFByZWZpeCArIGNlbGxObylcbiAgICAgICAgaWYgQF9hUm93QmluYXJ5W2NlbGxOb10gaXMgMVxuICAgICAgICAgICAgIyBEZWFjdGl2YXRlIHRoZSBjZWxsIFxuICAgICAgICAgICAgQF9hUm93QmluYXJ5W2NlbGxOb10gPSAwXG4gICAgICAgICAgICBlZGl0b3JDZWxsRWxlbS5jbGFzc0xpc3QucmVtb3ZlKERPTS5nZXRDbGFzcygnVE9QUk9XRURJVE9SJywgJ0VESVRPUl9DRUxMX0FDVElWRScpKVxuICAgICAgICAgICAgc2xpZGVyQ2VsbEVsZW0uY2xhc3NMaXN0LnJlbW92ZShET00uZ2V0Q2xhc3MoJ1RPUFJPV0VESVRPUicsICdTTElERVJfQ0VMTF9BQ1RJVkUnKSlcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgIyBBY3RpdmF0ZSB0aGUgY2VsbFxuICAgICAgICAgICAgQF9hUm93QmluYXJ5W2NlbGxOb10gPSAxXG4gICAgICAgICAgICBlZGl0b3JDZWxsRWxlbS5jbGFzc0xpc3QuYWRkKERPTS5nZXRDbGFzcygnVE9QUk9XRURJVE9SJywgJ0VESVRPUl9DRUxMX0FDVElWRScpKVxuICAgICAgICAgICAgc2xpZGVyQ2VsbEVsZW0uY2xhc3NMaXN0LmFkZChET00uZ2V0Q2xhc3MoJ1RPUFJPV0VESVRPUicsICdTTElERVJfQ0VMTF9BQ1RJVkUnKSlcblxuICAgICAgICAjIFNldCB0aGUgbmV3IGJpbmFyeSBjb25maWd1cmF0aW9uIGZvciB0aGUgZ2VuZXJhdG9yXG4gICAgICAgIEBCVVMuc2V0KCd0b3Byb3diaW5hcnknLCBAX2FSb3dCaW5hcnkpXG5cblxuICAgICNcbiAgICAjIFNldHVwIHRoZSBpbml0aWFsIGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgcm93XG4gICAgIyBcbiAgICBfZ2VuZXJhdGVJbml0aWFsQmluYXJ5OiAoKS0+XG4gICAgICAgICMgVGhlIG1pZGRsZSBjZWxsIGlzIHRoZSBvbmx5IG9uZSBpbml0aWFsbHkgYWN0aXZlXG4gICAgICAgIHNlZWRfY29sID0gTWF0aC5jZWlsKEBfbm9Db2x1bW5zIC8gMilcbiAgICAgICAgXG4gICAgICAgIGZvciBjb2wgaW4gWzEuLkBfbm9Db2x1bW5zXVxuICAgICAgICAgICAgaWYgY29sIGlzIHNlZWRfY29sXG4gICAgICAgICAgICAgICAgQF9hUm93QmluYXJ5W2NvbF0gPSAxXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgQF9hUm93QmluYXJ5W2NvbF0gPSAwXG4gICAgICAgIEBCVVMuc2V0KCd0b3Byb3diaW5hcnknLCBAX2FSb3dCaW5hcnkpXG4gICAgICAgIFxuXG4gICAgI1xuICAgICMgQnVpbGQgdGhlIHJvdyBvZiBjZWxsc1xuICAgICMgXG4gICAgX2J1aWxkUm93OiAoKS0+XG4gICAgICAgICMgR2V0IHRoZSBNdXN0YWNoZSB0ZW1wbGF0ZSBodG1sXG5cbiAgICAgICAgc21hbGxjZWxsVGVtcGxhdGVIVE1MID0gRE9NLmVsZW1CeUlkKCdUT1BST1dFRElUT1InLCAnVEVNUExBVEVfU0xJREVSX0NFTEwnKS5pbm5lckhUTUxcbiAgICAgICAgc2xpZGVyQ29sUHJlZml4ID0gRE9NLmdldFByZWZpeCgnVE9QUk9XRURJVE9SJywgJ1NMSURFUl9DT0wnKVxuICAgICAgICByb3dIdG1sID0gXCJcIlxuICAgICAgICAjIEFkZCBjZWxscyB0byB0aGUgcm93XG4gICAgICAgIGZvciBjb2wgaW4gWzEuLkBfbm9Db2x1bW5zXVxuICAgICAgICAgICAgYWN0aXZlQ2xhc3MgPSBcIlwiXG4gICAgICAgICAgICBpZiBAX2FSb3dCaW5hcnlbY29sXSBpcyAxXG4gICAgICAgICAgICAgICAgYWN0aXZlQ2xhc3MgPSBET00uZ2V0Q2xhc3MoJ1RPUFJPV0VESVRPUicsICdTTElERVJfQ0VMTF9BQ1RJVkUnKVxuXG4gICAgICAgICAgICBsZWZ0RWRnZVNsaWRlciA9ICgoY29sIC0gMSkgKiBAX2NvbFdpZHRoKVxuICAgICAgICAgICAgdG1wSWQgPSBzbGlkZXJDb2xQcmVmaXggKyBjb2xcblxuICAgICAgICAgICAgIyBDcmVhdGUgYSByZW5kZXJpbmcgb2YgdGhlIGNlbGwgdmlhIE11c3RhY2hlIHRlbXBsYXRlXG4gICAgICAgICAgICByb3dIdG1sICs9IE11c3RhY2hlLnJlbmRlcihzbWFsbGNlbGxUZW1wbGF0ZUhUTUwsIHtpZDp0bXBJZCwgbGVmdDpsZWZ0RWRnZVNsaWRlciwgYWN0aXZlQ2xhc3M6YWN0aXZlQ2xhc3N9KVxuXG4gICAgICAgICMgQWRkIHRoZSBjZWxsc1xuICAgICAgICBAX3Jvd0NvbnRhaW5lckVsZW0uaW5uZXJIVE1MID0gcm93SHRtbFxuIl19


/*

Initialize the various WolfCage classes.

@author Destin Moulton
@git https://github.com/destinmoulton/wolfcage
@license MIT

Component of the Wolfram Cellular Automata Generator (WolfCage)
 */
var WolfCage;

WolfCage = (function() {
  function WolfCage(options) {
    var tabs;
    this.BUS = new Bus();
    this.BUS.set('thumbnails.path', options.thumbnails_path);
    this.BUS.set('board.cell.style.activeBackgroundColor', '#000000');
    this.BUS.set('board.cell.style.borderColor', '#000000');
    this.BUS.set('board.cell.style.inactiveBackgroundColor', '#ffffff');
    tabs = new Tabs(this.BUS);
    new Thumbnails(this.BUS);
    new TopRowEditor(this.BUS);
    new Generator(this.BUS);
    tabs.start();
  }

  return WolfCage;

})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV29sZkNhZ2UuanMiLCJzb3VyY2VzIjpbIldvbGZDYWdlLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7Ozs7Ozs7QUFBQSxJQUFBOztBQVlNO0VBRVUsa0JBQUMsT0FBRDtBQUdSLFFBQUE7SUFBQSxJQUFDLENBQUEsR0FBRCxHQUFXLElBQUEsR0FBQSxDQUFBO0lBRVgsSUFBQyxDQUFBLEdBQUcsQ0FBQyxHQUFMLENBQVMsaUJBQVQsRUFBNEIsT0FBTyxDQUFDLGVBQXBDO0lBR0EsSUFBQyxDQUFBLEdBQUcsQ0FBQyxHQUFMLENBQVMsd0NBQVQsRUFBbUQsU0FBbkQ7SUFDQSxJQUFDLENBQUEsR0FBRyxDQUFDLEdBQUwsQ0FBUyw4QkFBVCxFQUF5QyxTQUF6QztJQUNBLElBQUMsQ0FBQSxHQUFHLENBQUMsR0FBTCxDQUFTLDBDQUFULEVBQXFELFNBQXJEO0lBR0EsSUFBQSxHQUFXLElBQUEsSUFBQSxDQUFLLElBQUMsQ0FBQSxHQUFOO0lBR1AsSUFBQSxVQUFBLENBQVcsSUFBQyxDQUFBLEdBQVo7SUFHQSxJQUFBLFlBQUEsQ0FBYSxJQUFDLENBQUEsR0FBZDtJQUdBLElBQUEsU0FBQSxDQUFVLElBQUMsQ0FBQSxHQUFYO0lBR0osSUFBSSxDQUFDLEtBQUwsQ0FBQTtFQXpCUSIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuXG5Jbml0aWFsaXplIHRoZSB2YXJpb3VzIFdvbGZDYWdlIGNsYXNzZXMuXG5cbkBhdXRob3IgRGVzdGluIE1vdWx0b25cbkBnaXQgaHR0cHM6Ly9naXRodWIuY29tL2Rlc3Rpbm1vdWx0b24vd29sZmNhZ2VcbkBsaWNlbnNlIE1JVFxuXG5Db21wb25lbnQgb2YgdGhlIFdvbGZyYW0gQ2VsbHVsYXIgQXV0b21hdGEgR2VuZXJhdG9yIChXb2xmQ2FnZSlcblxuIyMjXG5cbmNsYXNzIFdvbGZDYWdlXG5cbiAgICBjb25zdHJ1Y3Rvcjoob3B0aW9ucykgLT5cblxuICAgICAgICAjIFBVQi9TVUIgYW5kIHZhcmlhYmxlIHN0b3JlIGZvciBpbnRlci1jbGFzcyBjb21tdW5pY2F0aW9uXG4gICAgICAgIEBCVVMgPSBuZXcgQnVzKClcblxuICAgICAgICBAQlVTLnNldCgndGh1bWJuYWlscy5wYXRoJywgb3B0aW9ucy50aHVtYm5haWxzX3BhdGgpO1xuXG4gICAgICAgICMgU2V0IHRoZSBpbml0aWFsIGNvbG9yc1xuICAgICAgICBAQlVTLnNldCgnYm9hcmQuY2VsbC5zdHlsZS5hY3RpdmVCYWNrZ3JvdW5kQ29sb3InLCAnIzAwMDAwMCcpXG4gICAgICAgIEBCVVMuc2V0KCdib2FyZC5jZWxsLnN0eWxlLmJvcmRlckNvbG9yJywgJyMwMDAwMDAnKVxuICAgICAgICBAQlVTLnNldCgnYm9hcmQuY2VsbC5zdHlsZS5pbmFjdGl2ZUJhY2tncm91bmRDb2xvcicsICcjZmZmZmZmJylcbiAgICAgICAgICAgIFxuICAgICAgICAjIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgVGFicyAodmlzdWFsIHNlY3Rpb25hbCBtYW5hZ2VtZW50KVxuICAgICAgICB0YWJzID0gbmV3IFRhYnMoQEJVUylcblxuICAgICAgICAjIENyZWF0ZSBpbnN0YW5jZSBvZiB0aGUgUnVsZSBUaHVtYm5haWxzIHByZXZpZXcvc2VsZWN0b3JcbiAgICAgICAgbmV3IFRodW1ibmFpbHMoQEJVUylcblxuICAgICAgICAjIENyZWF0ZSBpbnN0YW5jZSBvZiB0aGUgVG9wIFJvdyBFZGl0b3JcbiAgICAgICAgbmV3IFRvcFJvd0VkaXRvcihAQlVTKVxuXG4gICAgICAgICMgQ3JlYXRlIGluc3RhbmNlIG9mIHRoZSBEYXNoYm9hcmRcbiAgICAgICAgbmV3IEdlbmVyYXRvcihAQlVTKVxuXG4gICAgICAgICMgU3RhcnQgdGhlIHRhYiBpbnRlcmZhY2VcbiAgICAgICAgdGFicy5zdGFydCgpXG5cbiAgICBcblxuICAgICJdfQ==
